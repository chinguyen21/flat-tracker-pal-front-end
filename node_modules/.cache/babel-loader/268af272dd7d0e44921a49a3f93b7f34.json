{"ast":null,"code":"/*\r\n ***************************************************************************************************************************************************+\r\n * NUTRITIONIX.com                                                                                                                                  |\r\n *                                                                                                                                                  |\r\n * This plugin allows you to create a fully customizable nutrition label                                                                            |\r\n *                                                                                                                                                  |\r\n * @authors             Leo Joseph Gajitos <leejay22@gmail.com>, Rommel Malang <genesis23rd@gmail.com> and Yurko Fedoriv <yurko.fedoriv@gmail.com>  |\r\n * @copyright           Copyright (c) 2017 Nutritionix.                                                                                             |\r\n * @license             This Nutritionix jQuery Nutrition Label is dual licensed under the MIT and GPL licenses.                                    |\r\n * @link                http://www.nutritionix.com                                                                                                  |\r\n * @github              http://github.com/nutritionix/nutrition-label                                                                               |\r\n * @current version     11.0.4                                                                                                                      |\r\n * @stable version      11.0.2                                                                                                                      |\r\n * @supported browser   Firefox, Chrome, IE8+                                                                                                       |\r\n * @description         To be able to create a FDA-style nutrition label with any nutrition data source                                             |\r\n *                                                                                                                                                  |\r\n ***************************************************************************************************************************************************+\r\n*/\n//these variables are declared using eval\n\n/*global globalTab1, globalTab2, globalTab3, globalTab4, globalTab5, globalTab6, globalTab7 */\n;\n\n(function ($) {\n  // eslint-disable-line no-extra-semi\n  //initializing the global tab variables (for debugging and editing purposes)\n  //global tab variables are used to make the printing of the html code readable when you copy the code using firebug => inspect => copy innerhtml\n  for (let x = 1; x < 8; x++) {\n    let tab = '';\n\n    for (let y = 1; y <= x; y++) {\n      tab += '\\t';\n    }\n\n    eval('var globalTab' + x + ' = \"' + tab + '\";');\n  }\n\n  $.fn.nutritionLabel = function (option, settings) {\n    if (typeof option === 'object') {\n      settings = option;\n      init(settings, $(this));\n    } else if (typeof option === 'string' && option !== '') {\n      //destroy the nutrition label's html code\n      if (option === 'destroy') {\n        new NutritionLabel().destroy($(this)); //allows the user to hide the nutrition value\n      } else if (option === 'hide') {\n        new NutritionLabel().hide($(this)); //allows the user to show the nutrition value\n      } else if (option === 'show') {\n        new NutritionLabel().show($(this));\n      } else {\n        let values = [];\n        let elements = this.each(function () {\n          let data = $(this).data('_nutritionLabel');\n\n          if (data) {\n            if ($.fn.nutritionLabel.defaultSettings[option] !== undefined) {\n              if (settings !== undefined) {\n                //set the option and create the nutrition label\n                data.settings[option] = settings;\n                init(data.settings, $(this));\n              } else {\n                //return the value of a setting - can only be used after the label is created / initiated\n                values.push(data.settings[option]);\n              }\n            }\n          } else if ($.fn.nutritionLabel.defaultSettings[option] !== undefined) {\n            //set the option and create the nutrition label\n            //this is a special case so the single value setting will still work even if the label hasn't been initiated yet\n            if (settings !== undefined) {\n              $.fn.nutritionLabel.defaultSettings[option] = settings;\n              init(null, $(this));\n            }\n          }\n        }); //return the value of a setting\n\n        if (values.length === 1) {\n          return values[0];\n        } //return the setting values or the elements\n\n\n        return values.length > 0 ? values : elements;\n      } //end of => else if (typeof option === 'string' && option !== '')\n\n    } else if (typeof option === 'undefined' || option === '') {\n      //if no value / option is supplied, simply create the label using the default values\n      init(settings, $(this));\n    }\n  }; //end of => $.fn.nutritionLabel = function(option, settings)\n\n\n  $.fn.nutritionLabel.defaultSettings = {\n    //default fixedWidth of the nutrition label\n    width: 280,\n    //to allow custom width - usually needed for mobile sites\n    allowCustomWidth: false,\n    widthCustom: 'auto',\n    //to allow the label to have no border\n    allowNoBorder: false,\n    //to enable rounding of the nutritional values based on the FDA rounding rules http://goo.gl/RMD2O\n    allowFDARounding: false,\n    //to enabled the google analytics event logging\n    allowGoogleAnalyticsEventLog: false,\n    gooleAnalyticsFunctionName: 'ga',\n    //enable triggering of user function on quantity change: global function name\n    userFunctionNameOnQuantityChange: null,\n    //enable triggering of user function on quantity change: handler instance\n    userFunctionOnQuantityChange: null,\n    //when set to true, this will hide the values if they are not applicable\n    hideNotApplicableValues: false,\n    //when set to true, this will hide all the percent daily values\n    hidePercentDailyValues: false,\n    //the brand name of the item for this label (eg. just salad)\n    brandName: 'Brand where this item belongs to',\n    //to scroll the ingredients if the innerheight is > scrollHeightComparison\n    scrollLongIngredients: false,\n    scrollHeightComparison: 100,\n    //the height in px of the ingredients div\n    scrollHeightPixel: 95,\n    //this is to set how many decimal places will be shown on the nutrition values (calories, fat, protein, vitamin a, iron, etc)\n    decimalPlacesForNutrition: 1,\n    //this is to set how many decimal places will be shown for the \"% daily values*\"\n    decimalPlacesForDailyValues: 0,\n    //this is to set how many decimal places will be shown for the serving unit quantity textbox\n    decimalPlacesForQuantityTextbox: 1,\n    //to scroll the item name if the jQuery.height() is > scrollLongItemNamePixel\n    scrollLongItemName: true,\n    scrollLongItemNamePixel: 36,\n    //this is needed to fix some issues on the 2018 label as the layout of the label is very different than the legacy one\n    scrollLongItemNamePixel2018Override: 34,\n    //this will only affect Vitamin D (valueVitaminD), Calcium (valueCalcium), Iron (valueIron) and Potassium (valuePotassium_2018).\n    //this will tell the system to process these values as base values and not % Daily Values (default)\n    useBaseValueFor2018LabelAndNotDVPercentage: false,\n    //this is for the 2018 version\n    //show the customizable link at the bottom\n    showBottomLink: false,\n    //url for the customizable link at the bottom\n    urlBottomLink: 'http://www.nutritionix.com',\n    //link name for the customizable link at the bottom\n    nameBottomLink: 'Nutritionix',\n    //this value can be changed and the value of the nutritions will be affected directly\n    //the computation is \"current nutrition value\" * \"serving unit quantity value\" = \"final nutrition value\"\n    //this can't be less than zero, all values less than zero is converted to zero\n    //the textbox to change this value is visible / enabled by default\n    //if the initial value of the serving size unit quantity is less than or equal to zero, it is converted to 1.0\n    //when enabled, user can change this value by clicking the arrow or changing the value on the textbox and pressing enter.\n    //the value on the label will be updated automatically\n    //different scenarios and the result if this feature is enabled\n    //NOTE 1: [ ] => means a textbox will be shown\n    //NOTE 2: on all cases below showServingUnitQuantityTextbox == true AND showServingUnitQuantity == true\n    //if showServingUnitQuantity == false, the values that should be on the 'serving size div' are empty or null\n    //CASE 1a: valueServingSizeUnit != '' (AND NOT null) && valueServingUnitQuantity >= 0\n    //RESULT: textServingSize [valueServingUnitQuantity] valueServingSizeUnit\n    //NOTE 3: on all cases below showServingUnitQuantityTextbox == true AND showItemName == true\n    //if showItemName == false, the values that should be on the 'item name div' are empty or null\n    //CASE 1b: valueServingSizeUnit != '' (AND NOT null) && valueServingUnitQuantity <= 0\n    //RESULT: [valueServingUnitQuantity default to 1.0] itemName\n    //CASE 3a: valueServingSizeUnit == '' (OR null) && valueServingUnitQuantity > 0\n    //RESULT: [valueServingUnitQuantity] itemName\n    //CASE 3b: valueServingSizeUnit == '' (OR null) && valueServingUnitQuantity <= 0\n    //RESULT: [valueServingUnitQuantity default to 1.0] itemName\n    //NOTE 4: to see the different resulting labels, check the html/demo-texbox-case*.html files\n    valueServingUnitQuantity: 1.0,\n    valueServingSizeUnit: '',\n    showServingUnitQuantityTextbox: true,\n    //the name of the item for this label (eg. cheese burger or mayonnaise)\n    itemName: 'Item / Ingredient Name',\n    showServingUnitQuantity: true,\n    //allow hiding of the textbox arrows\n    hideTextboxArrows: false,\n    //this is for the 2018 version and will only work when showServingUnitQuantity is false. see https://github.com/nutritionix/nutrition-label/issues/123\n    showOnlyTheTextServingSize: false,\n    //these 2 settings are used internally.\n    //this is just added here instead of a global variable to prevent a bug when there are multiple instances of the plugin like on the demo pages\n    originalServingUnitQuantity: 0,\n    //this is used to fix the computation issue on the textbox\n    nutritionValueMultiplier: 1,\n    //this is used for the computation of the servings per container\n    totalContainerQuantity: 1,\n    //default calorie intake\n    calorieIntake: 2000,\n    //these are the recommended daily intake values\n    dailyValueTotalFat: 65,\n    //this should be 70 for the uk version\n    dailyValueSatFat: 20,\n    dailyValueCholesterol: 300,\n    dailyValueSodium: 2400,\n    dailyValuePotassium: 3500,\n    dailyValuePotassium_2018: 4700,\n    //this is for the 2018 version\n    dailyValueCarb: 300,\n    //this should be 260 for the uk version\n    dailyValueFiber: 25,\n    dailyValueCalcium: 1300,\n    //this is for the 2018 version\n    dailyValueIron: 18,\n    dailyValueVitaminD: 20,\n    dailyValueAddedSugar: 50,\n    dailyValueSugar: 100,\n    //this should be 90 for the uk version\n    dailyValueEnergyKcal: 2000,\n    //this is for the uk version\n    dailyValueProtein: 50,\n    //this is for the uk version\n    dailyValueSalt: 6,\n    //this is for the uk version\n    //these values can be change to hide some nutrition values\n    showCalories: true,\n    showFatCalories: true,\n    showTotalFat: true,\n    showSatFat: true,\n    showTransFat: true,\n    showPolyFat: false,\n    showMonoFat: false,\n    showCholesterol: true,\n    showSodium: true,\n    showPotassium: false,\n    //this is for the legacy version\n    showPotassium_2018: true,\n    //this is for the 2018 version\n    showTotalCarb: true,\n    showFibers: true,\n    showSugars: true,\n    showAddedSugars: true,\n    showSugarAlcohol: false,\n    //this is for the 2018 version\n    showProteins: true,\n    showVitaminA: true,\n    showVitaminC: true,\n    showVitaminD: true,\n    //this is for the 2018 version\n    showCalcium: true,\n    //this is for the 2018 version\n    showIron: true,\n    showCaffeine: true,\n    //this is for the 2018 version\n    showServingWeightGrams: true,\n    //these values can be change to hide some nutrition daily values\n    //take note that the setting 'hidePercentDailyValues' override these values\n    showDailyTotalFat: true,\n    showDailySatFat: true,\n    showDailyCholesterol: true,\n    showDailySodium: true,\n    showDailyPotassium: true,\n    //this is for the legacy version\n    showDailyPotassium_2018: true,\n    //this is for the 2018 version\n    showDailyTotalCarb: true,\n    showDailyFibers: true,\n    showDailySugars: false,\n    showDailyAddedSugars: true,\n    //this is for the 2018 version\n    showDailyVitaminD: true,\n    //this is for the 2018 version\n    showDailyCalcium: true,\n    //this is for the 2018 version\n    showDailyIron: true,\n    showDailyProtein: true,\n    //this is for the uk version\n    showDailyEnergy: true,\n    //this is for the uk version\n    //to show the 'amount per serving' text\n    showAmountPerServing: true,\n    //to show the 'servings per container' data and replace the default 'Serving Size' value (without unit and servings per container text and value)\n    showServingsPerContainer: false,\n    //to show the item name. there are special cases where the item name is replaced with 'servings per container' value\n    showItemName: true,\n    //to show the item name for the UK version. the main difference with the previous setting is this feature is set to false by default. the UK version will ignore the showItemName setting\n    showItemNameForUK: false,\n    //show the brand where this item belongs to\n    showBrandName: false,\n    //to show the ingredients value or not\n    showIngredients: true,\n    //to show the calorie diet info at the bottom of the label\n    showCalorieDiet: false,\n    //to show the customizable footer which can contain html and js codes\n    showCustomFooter: false,\n    //see https://github.com/nutritionix/nutrition-label/issues/93 and then https://github.com/nutritionix/nutrition-label/issues/104\n    indentSugarAndRemoveBoldStyleFor2018Label: true,\n    boldCaffeine: true,\n    //this is for the 2018 version\n    //to show the disclaimer text or not\n    showDisclaimer: false,\n    //the height in px of the disclaimer div\n    scrollDisclaimerHeightComparison: 100,\n    scrollDisclaimer: 95,\n    valueDisclaimer: 'Please note that these nutrition values are estimated based on our standard serving portions. ' + 'As food servings may have a slight variance each time you visit, please expect these values to be with in 10% +/- of your actual meal. ' + 'If you have any questions about our nutrition calculator, please contact Nutritionix.',\n    ingredientLabel: 'INGREDIENTS:',\n    valueCustomFooter: '',\n    //the are to set some values as 'not applicable'. this means that the nutrition label will appear but the value will be a 'gray dash'\n    naCalories: false,\n    naFatCalories: false,\n    naTotalFat: false,\n    naSatFat: false,\n    naTransFat: false,\n    naPolyFat: false,\n    naMonoFat: false,\n    naCholesterol: false,\n    naSodium: false,\n    naPotassium: false,\n    //this is for the legacy version\n    naPotassium_2018: false,\n    //this is for the 2018 version\n    naTotalCarb: false,\n    naFibers: false,\n    naSugars: false,\n    naAddedSugars: false,\n    //this is for the 2018 version\n    naSugarAlcohol: false,\n    naProteins: false,\n    naVitaminA: false,\n    naVitaminC: false,\n    naVitaminD: false,\n    //this is for the 2018 version\n    naCalcium: false,\n    //this is for the 2018 version\n    naIron: false,\n    naCaffeine: false,\n    //this is for the 2018 version\n    //these are the default values for the nutrition info\n    valueServingWeightGrams: 0,\n    valueServingPerContainer: 1,\n    valueCalories: 0,\n    valueFatCalories: 0,\n    valueTotalFat: 0,\n    valueSatFat: 0,\n    valueTransFat: 0,\n    valuePolyFat: 0,\n    valueMonoFat: 0,\n    valueCholesterol: 0,\n    valueSodium: 0,\n    valuePotassium: 0,\n    //this is for the legacy version\n    valuePotassium_2018: 0,\n    //this is for the 2018 version\n    valueTotalCarb: 0,\n    valueFibers: 0,\n    valueSugars: 0,\n    valueAddedSugars: 0,\n    //this is for the 2018 version\n    valueSugarAlcohol: 0,\n    valueProteins: 0,\n    valueVitaminA: 0,\n    valueVitaminC: 0,\n    valueVitaminD: 0,\n    //this is for the 2018 version\n    valueCalcium: 0,\n    //this is for the 2018 version\n    valueIron: 0,\n    valueCaffeine: 0,\n    //this is for the 2018 version\n    //customizable units for the values\n    unitCalories: '',\n    unitFatCalories: '',\n    unitTotalFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitSatFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitTransFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitPolyFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitMonoFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitCholesterol: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\n    unitSodium: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\n    unitPotassium: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\n    //this is for the legacy version\n    unitPotassium_base: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\n    //this is for the 2018 version\n    unitPotassium_percent: '%',\n    //this is for the 2018 version\n    unitTotalCarb: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitFibers: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitSugars: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitAddedSugars: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    //this is for the 2018 version\n    unitSugarAlcohol: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitProteins: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    unitVitaminA: '%',\n    unitVitaminC: '%',\n    unitVitaminD_base: '<span aria-hidden=\"true\">mcg</span><span class=\"sr-only\"> micrograms</span>',\n    //this is for the 2018 version\n    unitVitaminD_percent: '%',\n    //this is for the 2018 version\n    unitCalcium: '%',\n    //this is for the 2018 version\n    unitCalcium_base: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\n    //this is for the 2018 version\n    unitCalcium_percent: '%',\n    //this is for the 2018 version\n    unitIron: '%',\n    unitIron_base: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\n    //this is for the 2018 version\n    unitIron_percent: '%',\n    //this is for the 2018 version\n    unitServingWeight: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\n    //this is for the 2018 version\n    unitEnergy_kj: 'kj',\n    //this is for the uk version\n    unitEnergy_kcal: 'kcal',\n    //this is for the uk version\n    unitSalt: 'g',\n    //this is for the uk version\n    unitGramOrMlForThePer100Part: 'g',\n    //this is for the uk version\n    unitCaffeine: 'mg',\n    //this is for the 2018 version\n    //these are the values for the optional calorie diet\n    valueCol1CalorieDiet: 2000,\n    valueCol2CalorieDiet: 2500,\n    valueCol1DietaryTotalFat: 0,\n    valueCol2DietaryTotalFat: 0,\n    valueCol1DietarySatFat: 0,\n    valueCol2DietarySatFat: 0,\n    valueCol1DietaryCholesterol: 0,\n    valueCol2DietaryCholesterol: 0,\n    valueCol1DietarySodium: 0,\n    valueCol2DietarySodium: 0,\n    valueCol1DietaryPotassium: 0,\n    valueCol2DietaryPotassium: 0,\n    valueCol1DietaryTotalCarb: 0,\n    valueCol2DietaryTotalCarb: 0,\n    valueCol1Dietary: 0,\n    valueCol2Dietary: 0,\n    //these text settings is so you can create nutrition labels in different languages or to simply change them to your need\n    textNutritionFacts: 'Nutrition Facts',\n    textDailyValues: 'Daily Value',\n    textServingSize: 'Serving Size:',\n    textServingsPerContainer: 'Servings Per Container',\n    textAmountPerServing: 'Amount Per Serving',\n    textCalories: 'Calories',\n    textFatCalories: 'Calories from Fat',\n    textTotalFat: 'Total Fat',\n    textSatFat: 'Saturated Fat',\n    textTransFat: '<em>Trans</em> Fat',\n    textPolyFat: 'Polyunsaturated Fat',\n    textMonoFat: 'Monounsaturated Fat',\n    textCholesterol: 'Cholesterol',\n    textSodium: 'Sodium',\n    textPotassium: 'Potassium',\n    textTotalCarb: 'Total Carbohydrates',\n    textFibers: 'Dietary Fiber',\n    textSugars: 'Sugars',\n    textAddedSugars1: 'Includes ',\n    textAddedSugars2: ' Added Sugars',\n    //this is for the 2018 version\n    textSugarAlcohol: 'Sugar Alcohol',\n    textProteins: 'Protein',\n    textVitaminA: 'Vitamin A',\n    textVitaminC: 'Vitamin C',\n    textVitaminD: 'Vitamin D',\n    //this is for the 2018 version\n    textCalcium: 'Calcium',\n    //this is for the 2018 version\n    textIron: 'Iron',\n    textNotApplicable: '-',\n    ingredientList: 'None',\n    textPercentDailyPart1: 'Percent Daily Values are based on a',\n    textPercentDailyPart2: 'calorie diet',\n    textPercentDaily2018VersionPart1: 'The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. ',\n    textPercentDaily2018VersionPart2: ' calories a day is used for general nutrition advice.',\n    textGoogleAnalyticsEventCategory: 'Nutrition Label',\n    textGoogleAnalyticsEventActionUpArrow: 'Quantity Up Arrow Clicked',\n    textGoogleAnalyticsEventActionDownArrow: 'Quantity Down Arrow Clicked',\n    textGoogleAnalyticsEventActionTextbox: 'Quantity Textbox Changed',\n    textUKTypicalValues: 'Typical Values',\n    //this is for the uk version\n    textUKReferenceIntake: 'Reference intake of an average adult',\n    //this is for the uk version\n    textUKPer100: 'Per',\n    //this is for the uk version\n    textUKDefaultServingNameIfEmpty: 'Serving',\n    //this is for the uk version\n    textDataNotAvailable: 'Data not available',\n    textAriaLabelIncreaseQuantityArrow: 'Increase the Quantity Arrow',\n    textAriaLabelDecreaseQuantityArrow: 'Decrease the Quantity Arrow',\n    textAriaLabelChangeQuantityTextbox: 'Change the Quantity Textbox',\n    textCalorieDietHtmlLegacyLessThan: 'Less than',\n    textCalorieDietHtmlLegacyDietary: 'Dietary',\n    textCaffeine: 'Caffeine',\n    //this is for the 2018 version\n    //if the showLegacyVersion is true, the system will show the legacy version\n    //if both the showLegacyVersion and showUKVersion are false, the system will show the 2018 version\n    //if both the showLegacyVersion is false and showUKVersion is true, the system will show the uk version\n    showLegacyVersion: true,\n    showUKVersion: false,\n    //for the uk label, If the serving name is empty, have it default to \"Serving\"\n    convertEmptyServingNametoServingForUKLabel: true,\n    //more details here https://github.com/nutritionix/nutrition-label/issues/77#issuecomment-323510972\n    legacyVersion: 1\n  }; //end of => $.fn.nutritionLabel.defaultSettings\n  //this will store the unique individual properties for each instance of the plugin\n\n  function NutritionLabel(settings, $elem) {\n    this.nutritionLabel = null;\n    this.settings = settings;\n    this.$elem = $elem;\n    return this;\n  }\n\n  function cleanSettings(settings) {\n    let numericIndex = ['calorieIntake', 'dailyValueCalcium', 'dailyValueCarb', 'dailyValueCholesterol', 'dailyValueEnergyKcal', 'dailyValueFiber', 'dailyValueIron', 'dailyValuePotassium', 'dailyValueProtein', 'dailyValueSalt', 'dailyValueSatFat', 'dailyValueSodium', 'dailyValueSugar', 'dailyValueTotalFat', 'dailyValueVitaminD', 'decimalPlacesForDailyValues', 'decimalPlacesForNutrition', 'decimalPlacesForQuantityTextbox', 'scrollHeightComparison', 'scrollHeightPixel', 'scrollLongItemNamePixel', 'scrollLongItemNamePixel2018Override', 'valueAddedSugars', 'valueCaffeine', 'valueCalcium', 'valueCalories', 'valueCholesterol', 'valueCol1CalorieDiet', 'valueCol1Dietary', 'valueCol1DietaryCholesterol', 'valueCol1DietaryPotassium', 'valueCol1DietarySatFat', 'valueCol1DietarySodium', 'valueCol1DietaryTotalCarb', 'valueCol1DietaryTotalFat', 'valueCol2CalorieDiet', 'valueCol2Dietary', 'valueCol2DietaryCholesterol', 'valueCol2DietaryPotassium', 'valueCol2DietarySatFat', 'valueCol2DietarySodium', 'valueCol2DietaryTotalCarb', 'valueCol2DietaryTotalFat', 'valueFatCalories', 'valueFibers', 'valueIron', 'valueMonoFat', 'valuePolyFat', 'valuePotassium', 'valueProteins', 'valueSatFat', 'valueServingPerContainer', 'valueServingSize', 'valueServingUnitQuantity', 'valueServingWeightGrams', 'valueSodium', 'valueSugarAlcohol', 'valueSugars', 'valueTotalCarb', 'valueTotalFat', 'valueTransFat', 'valueVitaminA', 'valueVitaminC', 'valueVitaminD', 'width'];\n    $.each(settings, function (index, value) {\n      if (jQuery.inArray(index, numericIndex) !== -1) {\n        settings[index] = parseFloat(settings[index]);\n\n        if (isNaN(settings[index]) || settings[index] === undefined) {\n          settings[index] = 0;\n        }\n      }\n    });\n\n    if (settings['valueServingUnitQuantity'] < 0) {\n      settings['valueServingUnitQuantity'] = 0;\n    }\n\n    return settings;\n  } //end of => function cleanSettings(settings)\n\n\n  function updateNutritionValueWithMultiplier(settings) {\n    let nutritionIndex = ['valueAddedSugars', 'valueCaffeine', 'valueCalcium', 'valueCalories', 'valueCholesterol', 'valueFatCalories', 'valueFibers', 'valueIron', 'valueMonoFat', 'valuePolyFat', 'valuePotassium', 'valuePotassium_2018', 'valueProteins', 'valueSatFat', 'valueServingWeightGrams', 'valueSodium', 'valueSugarAlcohol', 'valueSugars', 'valueTotalCarb', 'valueTotalFat', 'valueTransFat', 'valueVitaminA', 'valueVitaminC', 'valueVitaminD'];\n    $.each(settings, function (index, value) {\n      if (jQuery.inArray(index, nutritionIndex) !== -1) {\n        settings[index] = parseFloat(settings[index]);\n\n        if (isNaN(settings[index]) || settings[index] === undefined) {\n          settings[index] = 0;\n        }\n\n        settings[index] = parseFloat(settings[index]) * parseFloat(settings['valueServingUnitQuantity']) * parseFloat(settings['nutritionValueMultiplier']);\n      }\n    });\n\n    if (parseFloat(settings['valueServingUnitQuantity']) == 0) {\n      settings['valueServingPerContainer'] = 0;\n    } else if (!isNaN(settings['valueServingPerContainer']) && settings['valueServingPerContainer'] != undefined) {\n      settings['valueServingPerContainer'] = parseFloat(settings.totalContainerQuantity) / parseFloat(settings['valueServingUnitQuantity']);\n    }\n\n    return settings;\n  } //end of => function updateNutritionValueWithMultiplier(settings)\n\n\n  function init(settings, $elem) {\n    //merge the default settins with the user supplied settings\n    let $settings = $.extend({}, $.fn.nutritionLabel.defaultSettings, settings || {});\n    let $originalCleanSettings = cleanSettings($.extend({}, $.fn.nutritionLabel.defaultSettings, settings || {}));\n    $settings.totalContainerQuantity = parseFloat($settings.valueServingPerContainer) * parseFloat($settings['valueServingUnitQuantity']);\n    $originalCleanSettings.totalContainerQuantity = parseFloat($originalCleanSettings.valueServingPerContainer) * parseFloat($originalCleanSettings['valueServingUnitQuantity']); //clean the settings and make sure that all numeric settings are really numeric, if not, force them to be\n\n    $settings = cleanSettings($settings);\n    $originalCleanSettings = cleanSettings($originalCleanSettings);\n    $settings.nutritionValueMultiplier = $settings.valueServingUnitQuantity <= 0 ? 1 : 1 / $settings.valueServingUnitQuantity; //update the nutrition values with the multiplier\n\n    let $updatedsettings = updateNutritionValueWithMultiplier($settings);\n    $settings.originalServingUnitQuantity = $updatedsettings.valueServingUnitQuantity; //if the original value is <= 0, set it to 1.0\n\n    if ($updatedsettings.valueServingUnitQuantity <= 0) {\n      $originalCleanSettings.valueServingUnitQuantity = 1;\n      $updatedsettings = updateNutritionValueWithMultiplier($originalCleanSettings);\n      $updatedsettings.valueServingUnitQuantity = 1;\n    } //initalize the nutrition label and create / recreate it\n\n\n    var nutritionLabel = new NutritionLabel($updatedsettings, $elem);\n\n    if ($updatedsettings.showLegacyVersion) {\n      //($localSettings nutritionLabel  $elem  forLegacyLabel forInitialization forUKLabel)\n      updateValuesAfterAQuantityChanged($settings, nutritionLabel, $elem, true, true, false); //if the text box for the unit quantity is shown\n\n      if ($settings.showServingUnitQuantityTextbox) {\n        //if the arrows are not hidden\n        if (!$settings.hideTextboxArrows) {\n          //increase the unit quantity by clicking the up arrow\n          $('#' + $elem.attr('id')).on('click', '.unitQuantityUp', function (e) {\n            e.preventDefault(); //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityByArrow($(this), 1, updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true, false);\n          }); //decrease the unit quantity by clicking the down arrow\n\n          $('#' + $elem.attr('id')).on('click', '.unitQuantityDown', function (e) {\n            e.preventDefault(); //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityByArrow($(this), -1, updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true, false);\n          });\n        } //the textbox unit quantity value is changed\n\n\n        $('#' + $elem.attr('id')).on('change', '.unitQuantityBox', function (e) {\n          e.preventDefault(); //($thisTextbox $localSettings                                     nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n          changeQuantityTextbox($(this), updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true, false);\n        }); //the textbox unit quantity value is changed\n\n        $('#' + $elem.attr('id')).on('keydown', '.unitQuantityBox', function (e) {\n          if (e.keyCode == 13) {\n            e.preventDefault(); //($thisTextbox $localSettings,                                     nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityTextbox($(this), updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true, false);\n          }\n        });\n      } //end of => if ($updatedsettings.showLegacyVersion)\n\n    } else if ($updatedsettings.showUKVersion) {\n      //this part is for the uk version\n      //($localSettings nutritionLabel  $elem  forLegacyLabel forInitialization forUKLabel)\n      updateValuesAfterAQuantityChanged($settings, nutritionLabel, $elem, false, true, true); //if the text box for the unit quantity is shown\n\n      if ($settings.showServingUnitQuantityTextbox) {\n        //if the arrows are not hidden\n        if (!$settings.hideTextboxArrows) {\n          //increase the unit quantity by clicking the up arrow\n          $('#' + $elem.attr('id')).on('click', '.uk_nf-unitQuantityUp', function (e) {\n            e.preventDefault(); //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityByArrow($(this), 1, updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, true);\n          }); //decrease the unit quantity by clicking the down arrow\n\n          $('#' + $elem.attr('id')).on('click', '.uk_nf-unitQuantityDown', function (e) {\n            e.preventDefault(); //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityByArrow($(this), -1, updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, true);\n          });\n        } //the textbox unit quantity value is changed\n\n\n        $('#' + $elem.attr('id')).on('change', '.uk_nf-unitQuantityBox', function (e) {\n          e.preventDefault(); //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n          changeQuantityTextbox($(this), updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, true);\n        }); //the textbox unit quantity value is changed\n\n        $('#' + $elem.attr('id')).on('keydown', '.uk_nf-unitQuantityBox', function (e) {\n          if (e.keyCode == 13) {\n            e.preventDefault(); //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityTextbox($(this), updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, true);\n          }\n        });\n      } //end of => else if ($updatedsettings.showUKVersion)\n\n    } else {\n      //this part is for the 2018 version\n      //($localSettings nutritionLabel  $elem  forLegacyLabel forInitialization forUKLabel)\n      updateValuesAfterAQuantityChanged($settings, nutritionLabel, $elem, false, true, false); //if the text box for the unit quantity is shown\n\n      if ($settings.showServingUnitQuantityTextbox) {\n        //if the arrows are not hidden\n        if (!$settings.hideTextboxArrows) {\n          //increase the unit quantity by clicking the up arrow\n          $('#' + $elem.attr('id')).on('click', 'div.nf-unitQuantityUp', function (e) {\n            e.preventDefault(); //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityByArrow($(this), 1, updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, false);\n          }); //decrease the unit quantity by clicking the down arrow\n\n          $('#' + $elem.attr('id')).on('click', 'div.nf-unitQuantityDown', function (e) {\n            e.preventDefault(); //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityByArrow($(this), -1, updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, false);\n          });\n        } //the textbox unit quantity value is changed\n\n\n        $('#' + $elem.attr('id')).on('change', '.nf-unitQuantityBox', function (e) {\n          e.preventDefault(); //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n          changeQuantityTextbox($(this), updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, false);\n        }); //the textbox unit quantity value is changed\n\n        $('#' + $elem.attr('id')).on('keydown', '.nf-unitQuantityBox', function (e) {\n          if (e.keyCode == 13) {\n            e.preventDefault(); //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\n\n            changeQuantityTextbox($(this), updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false, false);\n          }\n        });\n      }\n    } //end of => else => if ($updatedsettings.showLegacyVersion) => else if ($updatedsettings.showUKVersion)\n    //store the object for later reference\n\n\n    $elem.data('_nutritionLabel', nutritionLabel);\n  } //end of => function init(settings, $elem)\n\n\n  function updateTheSettingsAfterAnEvent($localSettings, localSettings) {\n    let $localSettingsHolder = cleanSettings($.extend({}, $.fn.nutritionLabel.defaultSettings, localSettings || {}));\n    $localSettingsHolder.originalServingUnitQuantity = $localSettings.originalServingUnitQuantity;\n    $localSettingsHolder.totalContainerQuantity = $localSettings.totalContainerQuantity;\n    $localSettingsHolder.nutritionValueMultiplier = $localSettingsHolder.valueServingUnitQuantity <= 0 ? 1 : 1 / $localSettingsHolder.valueServingUnitQuantity;\n    return $localSettingsHolder;\n  }\n\n  function addScrollToItemDiv($localElem, $localSettings, localNameClass, forLegacyLabel) {\n    let local_scrollLongItemNamePixel = parseInt($localSettings.scrollLongItemNamePixel);\n\n    if (!forLegacyLabel) {\n      local_scrollLongItemNamePixel = parseInt($localSettings.scrollLongItemNamePixel2018Override);\n    } //as of 05/14/2017 inline class only appears on the legacy version\n\n\n    if ($('#' + $localElem.attr('id') + ' .' + localNameClass + '.inline').val() != undefined) {\n      if ($('#' + $localElem.attr('id') + ' .' + localNameClass + '.inline').height() > local_scrollLongItemNamePixel + 1) {\n        $('#' + $localElem.attr('id') + ' .' + localNameClass + '.inline').css({\n          'margin-left': '3.90em',\n          'height': local_scrollLongItemNamePixel + 'px',\n          'overflow-y': 'auto'\n        });\n      }\n    } else {\n      if (forLegacyLabel) {\n        if ($('#' + $localElem.attr('id') + ' .' + localNameClass).height() > local_scrollLongItemNamePixel + 1) {\n          $('#' + $localElem.attr('id') + ' .' + localNameClass).css({\n            'height': local_scrollLongItemNamePixel + 'px',\n            'overflow-y': 'auto'\n          });\n        }\n      } else {\n        if ($('#' + $localElem.attr('id') + ' .' + localNameClass + ' div').height() >= local_scrollLongItemNamePixel + 1) {\n          $('#' + $localElem.attr('id') + ' .' + localNameClass + ' div').css({\n            'height': local_scrollLongItemNamePixel + 'px',\n            'overflow-y': 'auto'\n          });\n        }\n      }\n    }\n  }\n\n  function notApplicableHover($localElem) {\n    //this code is for pages with multiple nutrition labels generated by the plugin like the demo page\n    if ($localElem.attr('id') !== undefined && $localElem.attr('id') !== '') {\n      $('#' + $localElem.attr('id') + ' .notApplicable').on('mouseenter', function () {\n        $('#' + $localElem.attr('id') + ' .naTooltip').css({\n          top: $(this).position().top + 'px',\n          left: $(this).position().left + 10 + 'px'\n        }).show();\n      });\n      $('#' + $localElem.attr('id') + ' .notApplicable').on('mouseleave', function () {\n        $('#' + $localElem.attr('id') + ' .naTooltip').hide();\n      });\n    } else {\n      $('#' + $localElem.attr('id') + ' .notApplicable').on('mouseenter', function () {\n        $('.naTooltip').css({\n          top: $(this).position().top + 'px',\n          left: $(this).position().left + 10 + 'px'\n        }).show();\n      });\n      $('#' + $localElem.attr('id') + ' .notApplicable').on('mouseleave', function () {\n        $('.naTooltip').hide();\n      });\n    }\n  }\n\n  function updateScrollingFeature($localElem, $localSettings, localIDToScroll, localScrollHeightComparison, localScrollHeight) {\n    let $parentElement;\n\n    if ($localElem.attr('id') !== undefined && $localElem.attr('id') !== '') {\n      //this code is for pages with multiple nutrition labels generated by the plugin like the demo page\n      $parentElement = $('#' + $localElem.attr('id') + ' #' + localIDToScroll).parent();\n    } else {\n      $parentElement = $('#' + localIDToScroll).parent();\n    }\n\n    if ($parentElement.innerHeight() > localScrollHeightComparison) {\n      $parentElement.addClass('scroll').css({\n        height: localScrollHeight + 'px'\n      });\n    }\n  }\n\n  function updateValuesAfterAQuantityChanged($localSettings, nutritionLabel, $elem, forLegacyLabel, forInitialization, forUKLabel) {\n    let ingredientListID = 'ingredientList';\n    let calcDisclaimerTextID = 'calcDisclaimerText';\n    let nameElementClass = 'name';\n\n    if (!forLegacyLabel && !forUKLabel) {\n      //for the 2018 label\n      ingredientListID = 'nf-ingredientList';\n      calcDisclaimerTextID = 'nf-calcDisclaimerText';\n      nameElementClass = 'nf-item-name';\n    } else if (!forLegacyLabel && forUKLabel) {\n      //for the uk label\n      ingredientListID = 'uk_nf-ingredient-statement';\n      calcDisclaimerTextID = 'uk_nf-disclaimer';\n    }\n\n    if (!forInitialization) {\n      $localSettings = updateNutritionValueWithMultiplier($localSettings);\n      nutritionLabel = new NutritionLabel($localSettings, $elem);\n    } //if the showLegacyVersion is true, the system will show the legacy version\n    //if both the showLegacyVersion and showUKVersion are false, the system will show the 2018 version\n    //if both the showLegacyVersion is false and showUKVersion is true, the system will show the uk version\n\n\n    if (forLegacyLabel) {\n      $elem.html(nutritionLabel.generateLegacy());\n    } else if (forUKLabel) {\n      $elem.html(nutritionLabel.generateUK());\n    } else {\n      $elem.html(nutritionLabel.generate2018());\n    } //scroll the ingredients of the innerheight is > $localSettings.scrollHeightComparison and the settings showIngredients and scrollLongIngredients are true\n\n\n    if ($localSettings.showIngredients && $localSettings.scrollLongIngredients) {\n      //($localElem $localSettings  localIDToScroll   localScrollHeightComparison            localScrollHeight)\n      updateScrollingFeature($elem, $localSettings, ingredientListID, $localSettings.scrollHeightComparison, $localSettings.scrollHeightPixel);\n    } //scroll the disclaimer if the height of the disclaimer div is greater than scrollDisclaimerHeightComparison\n\n\n    if ($localSettings.showDisclaimer) {\n      //($localElem $localSettings  localIDToScroll       localScrollHeightComparison                      localScrollHeight)\n      updateScrollingFeature($elem, $localSettings, calcDisclaimerTextID, $localSettings.scrollDisclaimerHeightComparison, $localSettings.scrollDisclaimer);\n    } //this code is for pages with multiple nutrition labels generated by the plugin like the demo page\n\n\n    notApplicableHover($elem); //for the legacy and 2018 label\n\n    if (!forUKLabel) {\n      //add a scroll on long item names\n      if ($localSettings.scrollLongItemName) {\n        addScrollToItemDiv($elem, $localSettings, nameElementClass, forLegacyLabel);\n      }\n    }\n\n    if (!forInitialization) {\n      return $localSettings;\n    }\n  } //end of => function updateValuesAfterAQuantityChanged($localSettings, $elem, ingredientListID, calcDisclaimerTextID, forLegacyLabel, forInitialization, forUKLabel)\n\n\n  function handleQuantityChange($localSettings, source, previousValue, newValue) {\n    let handler;\n\n    if ($localSettings.userFunctionOnQuantityChange) {\n      handler = $localSettings.userFunctionOnQuantityChange;\n    } else if ($localSettings.userFunctionNameOnQuantityChange) {\n      handler = window[$localSettings.userFunctionNameOnQuantityChange];\n    }\n\n    if (typeof handler === 'function') {\n      handler(source, previousValue, newValue);\n    }\n  }\n\n  function changeQuantityTextbox($thisTextbox, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel) {\n    let nixLabelBeforeQuantityID = 'nixLabelBeforeQuantity';\n    let previousValue;\n    let textBoxValue;\n\n    if (!forLegacyLabel & !forUKLabel) {\n      nixLabelBeforeQuantityID = 'nf-nixLabelBeforeQuantity';\n    } else if (!forLegacyLabel & forUKLabel) {\n      nixLabelBeforeQuantityID = 'uk_nf-nixLabelBeforeQuantity';\n    }\n\n    previousValue = parseFloat($('#' + $elem.attr('id') + ' #' + nixLabelBeforeQuantityID).val());\n    textBoxValue = !regIsPosNumber($thisTextbox.val()) ? previousValue : parseFloat($thisTextbox.val());\n    $thisTextbox.val(roundLoDash(textBoxValue, $localSettings.decimalPlacesForQuantityTextbox));\n    $localSettings.valueServingUnitQuantity = textBoxValue; //($localSettings  nutritionLabel  $elem  forLegacyLabel  forInitialization forUKLabel)\n\n    $localSettings = updateValuesAfterAQuantityChanged($localSettings, nutritionLabel, $elem, forLegacyLabel, false, forUKLabel);\n\n    if ($localSettings.allowGoogleAnalyticsEventLog) {\n      window[$localSettings.gooleAnalyticsFunctionName]('send', 'event', $localSettings.textGoogleAnalyticsEventCategory, $localSettings.textGoogleAnalyticsEventActionTextbox);\n    }\n\n    handleQuantityChange($localSettings, 'textbox', roundLoDash(previousValue, $localSettings.decimalPlacesForQuantityTextbox), roundLoDash(textBoxValue, $localSettings.decimalPlacesForQuantityTextbox));\n  } //end of => function changeQuantityTextbox($thisTextbox, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel)\n\n\n  function changeQuantityByArrow($thisQuantity, changeValueBy, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel) {\n    let unitQuantityBoxClass = 'unitQuantityBox';\n\n    if (!forLegacyLabel & !forUKLabel) {\n      unitQuantityBoxClass = 'nf-unitQuantityBox';\n    } else if (!forLegacyLabel & forUKLabel) {\n      unitQuantityBoxClass = 'uk_nf-unitQuantityBox';\n    }\n\n    let currentQuantity = parseFloat($thisQuantity.parent().parent().find('input.' + unitQuantityBoxClass).val());\n\n    if (isNaN(currentQuantity)) {\n      currentQuantity = 1.0;\n    }\n\n    let beforeCurrentQuantityWasChanged = currentQuantity; //see https://github.com/nutritionix/nutrition-label/issues/14 for an explanation on this part\n\n    if (currentQuantity <= 1 && changeValueBy == -1) {\n      changeValueBy = -0.5;\n      currentQuantity += changeValueBy;\n    } else if (currentQuantity < 1 && changeValueBy == 1) {\n      changeValueBy = 0.5;\n      currentQuantity += changeValueBy;\n    } else if (currentQuantity <= 2 && currentQuantity > 1 && changeValueBy == -1) {\n      currentQuantity = 1;\n    } else {\n      currentQuantity += changeValueBy;\n    }\n\n    if (currentQuantity < 0) {\n      currentQuantity = 0;\n    }\n\n    $thisQuantity.parent().parent().find('input.' + unitQuantityBoxClass).val(roundLoDash(currentQuantity, $localSettings.decimalPlacesForQuantityTextbox));\n    $localSettings.valueServingUnitQuantity = currentQuantity; //($localSettings  nutritionLabel  $elem  forLegacyLabel  forInitialization forUKLabel)\n\n    $localSettings = updateValuesAfterAQuantityChanged($localSettings, nutritionLabel, $elem, forLegacyLabel, false, forUKLabel);\n\n    if ($localSettings.allowGoogleAnalyticsEventLog) {\n      if (changeValueBy > 0) {\n        window[$localSettings.gooleAnalyticsFunctionName]('send', 'event', $localSettings.textGoogleAnalyticsEventCategory, $localSettings.textGoogleAnalyticsEventActionUpArrow);\n      } else {\n        window[$localSettings.gooleAnalyticsFunctionName]('send', 'event', $localSettings.textGoogleAnalyticsEventCategory, $localSettings.textGoogleAnalyticsEventActionDownArrow);\n      }\n    }\n\n    handleQuantityChange($localSettings, changeValueBy > 0 ? 'up arrow' : 'down arrow', beforeCurrentQuantityWasChanged, currentQuantity);\n  } //end of => function changeQuantityByArrow($thisQuantity, changeValueBy, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel)\n  //round the value to the nearest number\n\n\n  function roundToNearestNum(input, nearest) {\n    return nearest < 0 ? Math.round(input * nearest) / nearest : Math.round(input / nearest) * nearest;\n  }\n\n  function roundCalories(toRound, decimalPlace) {\n    toRound = roundCaloriesRule(toRound);\n\n    if (toRound > 0) {\n      toRound = roundLoDash(toRound, decimalPlace);\n    }\n\n    return toRound;\n  }\n\n  function roundFat(toRound, decimalPlace) {\n    toRound = roundFatRule(toRound);\n\n    if (toRound > 0) {\n      toRound = roundLoDash(toRound, decimalPlace);\n    }\n\n    return toRound;\n  }\n\n  function roundSodium(toRound, decimalPlace) {\n    toRound = roundSodiumRule(toRound);\n\n    if (toRound > 0) {\n      toRound = roundLoDash(toRound, decimalPlace);\n    }\n\n    return toRound;\n  }\n\n  function roundPotassium(toRound, decimalPlace) {\n    toRound = roundPotassiumRule(toRound);\n\n    if (toRound > 0) {\n      toRound = roundLoDash(toRound, decimalPlace);\n    }\n\n    return toRound;\n  }\n\n  function roundCholesterol(toRound, decimalPlace) {\n    let normalVersion = true;\n    let roundResult = roundCholesterolRule(toRound);\n\n    if (roundResult === false) {\n      normalVersion = false;\n    } else {\n      toRound = roundResult;\n    }\n\n    if (normalVersion) {\n      if (toRound > 0) {\n        toRound = roundLoDash(toRound, decimalPlace);\n      }\n    } else {\n      toRound = '< 5';\n    }\n\n    return toRound;\n  }\n\n  function roundCarbFiberSugarProtein(toRound, decimalPlace) {\n    let normalVersion = true;\n    let roundResult = roundCarbFiberSugarProteinRule(toRound);\n\n    if (roundResult === false) {\n      normalVersion = false;\n    } else {\n      toRound = roundResult;\n    }\n\n    if (normalVersion) {\n      if (toRound > 0) {\n        toRound = roundLoDash(toRound, decimalPlace);\n      }\n    } else {\n      toRound = '< 1';\n    }\n\n    return toRound;\n  }\n\n  function roundCaffeine(toRound, decimalPlace) {\n    toRound = roundToNearestNum(toRound, 1);\n\n    if (toRound > 0) {\n      toRound = roundLoDash(toRound, decimalPlace);\n    }\n\n    return toRound;\n  } //Calories and Calories from Fat rounding rule\n\n\n  function roundCaloriesRule(toRound) {\n    if (toRound < 5) {\n      return 0;\n    } else if (toRound <= 50) {\n      //50 cal - express to nearest 5 cal increment\n      return roundToNearestNum(toRound, 5);\n    } //> 50 cal - express to nearest 10 cal increment\n\n\n    return roundToNearestNum(toRound, 10);\n  } //Total Fat, Saturated Fat, Polyunsaturated Fat and Monounsaturated Fat rounding rule\n\n\n  function roundFatRule(toRound) {\n    if (toRound < 0.5) {\n      return 0;\n    } else if (toRound < 5) {\n      //< 5 g - express to nearest .5g increment\n      return roundToNearestNum(toRound, 0.5);\n    } //>= 5 g - express to nearest 1 g increment\n\n\n    return roundToNearestNum(toRound, 1);\n  } //Sodium rounding rule\n\n\n  function roundSodiumRule(toRound) {\n    if (toRound < 5) {\n      return 0;\n    } else if (toRound <= 140) {\n      //5 - 140 mg - express to nearest 5 mg increment\n      return roundToNearestNum(toRound, 5);\n    } //>= 5 g - express to nearest 10 g increment\n\n\n    return roundToNearestNum(toRound, 10);\n  } //Potassium rounding rule\n\n\n  function roundPotassiumRule(toRound) {\n    if (toRound < 5) {\n      return 0;\n    } else if (toRound <= 140) {\n      //5 - 140 mg - express to nearest 5 mg increment\n      return roundToNearestNum(toRound, 5);\n    } //>= 5 g - express to nearest 10 g increment\n\n\n    return roundToNearestNum(toRound, 10);\n  } //Cholesterol rounding rule\n\n\n  function roundCholesterolRule(toRound) {\n    if (toRound < 2) {\n      return 0;\n    } else if (toRound <= 5) {\n      return false;\n    } //> 5 mg - express to nearest 5 mg increment\n\n\n    return roundToNearestNum(toRound, 5);\n  } //Total Carbohydrate, Dietary Fiber, Sugar and Protein rounding rule\n\n\n  function roundCarbFiberSugarProteinRule(toRound) {\n    if (toRound < 0.5) {\n      return 0;\n    } else if (toRound < 1) {\n      //< 1 g - express as \"Contains less than 1g\" or \"less than 1g\"\n      return false;\n    } //> 1 mg - express to nearest 1 g increment\n\n\n    return roundToNearestNum(toRound, 1);\n  } //Total Carbohydrate, Dietary Fiber, Sugar and Protein rounding rule\n\n\n  function roundVitaminsCalciumIron(toRound) {\n    if (toRound > 0) {\n      if (toRound < 10) {\n        //< 10 - round to nearest even number\n        return roundToNearestNum(toRound, 2);\n      } else if (toRound < 50) {\n        //between 10 and 50, round to the nearest 5 increment\n        return roundToNearestNum(toRound, 5);\n      } //else, round to the nearest 10 increment\n\n\n      return roundToNearestNum(toRound, 10);\n    }\n\n    return 0;\n  }\n\n  function roundForUKLabelTotalFatCarbsSugarFiberProtein(toRound) {\n    let normalVersion = true;\n    let roundResult = roundForUKLabelTotalFatCarbsSugarFiberProteinRule(toRound);\n\n    if (roundResult === false) {\n      normalVersion = false;\n    } else {\n      toRound = roundResult;\n    }\n\n    if (normalVersion && toRound == 0) {\n      toRound = '< 0.5';\n    }\n\n    return toRound;\n  }\n\n  function roundForUKLabelTotalFatCarbsSugarFiberProteinRule(toRound) {\n    if (toRound <= 0.5) {\n      return 0;\n    } else if (toRound < 10) {\n      //< 10 > 0.5 - express to nearest 0.1 increment\n      return roundLoDash(roundToNearestNum(toRound, 0.1), 1);\n    } //> 10 express to nearest 1 increment\n\n\n    return roundLoDash(roundToNearestNum(toRound, 1));\n  }\n\n  function roundForUKLabelSatFat(toRound) {\n    let normalVersion = true;\n    let roundResult = roundForUKLabelSatFatRule(toRound);\n\n    if (roundResult === false) {\n      normalVersion = false;\n    } else {\n      toRound = roundResult;\n    }\n\n    if (normalVersion && toRound == 0) {\n      toRound = '< 0.1';\n    }\n\n    return toRound;\n  }\n\n  function roundForUKLabelSatFatRule(toRound) {\n    if (toRound <= 0.1) {\n      return 0;\n    } else if (toRound < 10) {\n      //< 10 > 0.5 - express to nearest 0.1 increment\n      return roundLoDash(roundToNearestNum(toRound, 0.1), 1);\n    } //> 10 express to nearest 1 increment\n\n\n    return roundLoDash(roundToNearestNum(toRound, 1));\n  }\n\n  function roundForUKLabelSalt(toRound) {\n    let normalVersion = true;\n    let roundResult = roundForUKLabelSaltRule(toRound);\n\n    if (roundResult === false) {\n      normalVersion = false;\n    } else {\n      toRound = roundResult;\n    }\n\n    if (normalVersion && toRound == 0) {\n      toRound = '< 0.01';\n    }\n\n    return toRound;\n  }\n\n  function roundForUKLabelSaltRule(toRound) {\n    if (toRound <= 0.0125) {\n      return 0;\n    } else if (toRound < 1) {\n      //< 10 > 0.5 - express to nearest 0.1 increment\n      return roundLoDash(roundToNearestNum(toRound, 0.01), 2);\n    } //> 1 express to nearest 0.1 increment\n\n\n    return roundLoDash(roundToNearestNum(toRound, 0.1), 1);\n  }\n\n  function roundFor2018LabelVitaminDIron(toRound) {\n    toRound = roundFor2018LabelVitaminDIronRule(toRound);\n\n    if (toRound > 0) {\n      return roundLoDash(toRound, 1);\n    }\n\n    return 0;\n  }\n\n  function roundFor2018LabelVitaminDIronRule(toRound) {\n    //round to the nearest 0.1 increment\n    return roundToNearestNum(toRound, 0.1);\n  }\n\n  function roundFor2018LabelCalciumPotassium(toRound) {\n    toRound = roundFor2018LabelCalciumPotassiumRule(toRound);\n\n    if (toRound > 0) {\n      return toRound;\n    }\n\n    return 0;\n  }\n\n  function roundFor2018LabelCalciumPotassiumRule(toRound) {\n    //round to the nearest 10 increment\n    return roundToNearestNum(toRound, 10);\n  } //check if the value is a positive number\n\n\n  function regIsPosNumber(fData) {\n    /* eslint-disable no-useless-escape */\n    return new RegExp('(^[0-9]+[\\.]?[0-9]+$)|(^[0-9]+$)').test(fData);\n    /* eslint-enable no-useless-escape */\n  } //generate and return the html code for the item area\n\n\n  function itemNameHtmlLegacy($localSettings) {\n    let tabTemp = globalTab1;\n    let localNutritionLabel = '';\n    let itemNameClass = '';\n\n    if ($localSettings.showServingUnitQuantityTextbox) {\n      if ($localSettings.valueServingSizeUnit === null || $localSettings.valueServingSizeUnit == '' || $localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null && $localSettings.originalServingUnitQuantity <= 0) {\n        let textboxClass = 'unitQuantityBox';\n        localNutritionLabel += globalTab1 + '<div class=\"cf\">\\n';\n        localNutritionLabel += globalTab2 + '<div class=\"rel servingSizeField\">\\n';\n\n        if (!$localSettings.hideTextboxArrows) {\n          localNutritionLabel += globalTab3 + '<div class=\"setter\">\\n';\n          localNutritionLabel += globalTab4 + '<a href=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" class=\"unitQuantityUp\" ';\n          localNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\n          localNutritionLabel += globalTab4 + '<a href=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" class=\"unitQuantityDown\" ';\n          localNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\n          localNutritionLabel += globalTab3 + '</div><!-- closing class=\"setter\" -->\\n\\n';\n        } else {\n          textboxClass = 'unitQuantityBox arrowsAreHidden';\n        }\n\n        localNutritionLabel += globalTab3 + '<input type=\"text\" data-role=\"none\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" class=\"' + textboxClass + '\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\n        localNutritionLabel += globalTab3 + '<input type=\"hidden\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" id=\"nixLabelBeforeQuantity\">\\n';\n        localNutritionLabel += globalTab2 + '</div><!-- closing class=\"servingSizeField\" -->\\n\\n';\n        tabTemp = globalTab2;\n        itemNameClass = 'inline';\n      }\n    } //end of => if ($localSettings.showServingUnitQuantityTextbox) {\n\n\n    localNutritionLabel += tabTemp + '<div class=\"name ' + itemNameClass + '\" tabindex=\"0\">';\n    localNutritionLabel += $localSettings.itemName;\n\n    if ($localSettings.showBrandName && $localSettings.brandName !== null && $localSettings.brandName != '') {\n      localNutritionLabel += ' - ' + $localSettings.brandName;\n    }\n\n    localNutritionLabel += '</div>\\n';\n\n    if ($localSettings.showServingUnitQuantityTextbox) {\n      if ($localSettings.valueServingSizeUnit === null || $localSettings.valueServingSizeUnit == '' || $localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null && $localSettings.originalServingUnitQuantity <= 0) {\n        /* eslint-disable no-useless-escape */\n        localNutritionLabel += globalTab1 + '</div><!-- closing class=\"cf\" -->\\n\\n';\n        /* eslint-enable no-useless-escape */\n      }\n    }\n\n    return localNutritionLabel;\n  } //end of => function itemNameHtmlLegacy($localSettings)\n  //generate and return the html code for the serving unit quantity area\n\n\n  function sevingUnitQuantityHtmlLegacy($localSettings) {\n    let localServingSizeIsHidden = false;\n    let localServingContainerIsHidden = false;\n    let localNutritionLabel = '';\n\n    if ($localSettings.showServingUnitQuantity) {\n      localNutritionLabel += globalTab1 + '<div class=\"serving\" tabIndex=\"0\">\\n';\n\n      if ($localSettings.originalServingUnitQuantity > 0) {\n        let unitAddedClass = '';\n        let gramsAddedClass = '';\n        localNutritionLabel += globalTab2 + '<div class=\"cf\">\\n';\n        localNutritionLabel += globalTab3 + '<div class=\"servingSizeText fl\">' + $localSettings.textServingSize + '</div>\\n';\n        localNutritionLabel += $localSettings.showServingUnitQuantityTextbox ? '' : globalTab3 + '<div class=\"servingUnitQuantity fl\" itemprop=\"servingSize\">' + roundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) + '</div>\\n';\n\n        if ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null) {\n          if ($localSettings.showServingUnitQuantityTextbox && $localSettings.valueServingSizeUnit !== null && $localSettings.valueServingSizeUnit != '') {\n            let textboxClass = 'unitQuantityBox';\n            unitAddedClass = 'unitHasTextbox';\n            gramsAddedClass = 'gramsHasTextbox';\n            localNutritionLabel += globalTab3 + '<div class=\"rel servingSizeField fl\">\\n';\n\n            if (!$localSettings.hideTextboxArrows) {\n              localNutritionLabel += globalTab4 + '<div class=\"setter\">\\n';\n              localNutritionLabel += globalTab5 + '<a href=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" class=\"unitQuantityUp\" ';\n              localNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\n              localNutritionLabel += globalTab5 + '<a href=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" class=\"unitQuantityDown\" ';\n              localNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\n              localNutritionLabel += globalTab4 + '</div><!-- closing class=\"setter\" -->\\n\\n';\n            } else {\n              textboxClass = 'unitQuantityBox arrowsAreHidden';\n            }\n\n            localNutritionLabel += globalTab4 + '<input type=\"text\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" class=\"' + textboxClass + '\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\n            localNutritionLabel += globalTab4 + '<input type=\"hidden\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" id=\"nixLabelBeforeQuantity\">\\n';\n            localNutritionLabel += globalTab3 + '</div><!-- closing class=\"servingSizeField\" -->\\n\\n';\n          } else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\n            localNutritionLabel += globalTab3 + '<div class=\"servingUnitQuantity\" itemprop=\"servingSize\">' + roundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) + '</div>\\n';\n          }\n\n          localNutritionLabel += globalTab3 + '<div class=\"servingUnit fl ' + unitAddedClass + '\">' + $localSettings.valueServingSizeUnit + ($localSettings.legacyVersion == 1 ? '</div>\\n' : ''); //end of => if ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null)\n        } else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\n          localNutritionLabel += globalTab3 + '<div class=\"servingUnitQuantity fl\" itemprop=\"servingSize\">' + roundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) + '</div>\\n';\n        }\n\n        if ($localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\n          localNutritionLabel += globalTab3 + '<' + ($localSettings.legacyVersion == 1 ? 'div' : 'span') + ' class=\"servingWeightGrams ' + ($localSettings.legacyVersion == 1 ? 'fl' : '') + ' ' + gramsAddedClass + '\">' + '(<span itemprop=\"servingSize\">' + roundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) + $localSettings.unitServingWeight + '</span>)\\n</' + ($localSettings.legacyVersion == 1 ? 'div' : 'span') + '>\\n';\n        }\n\n        localNutritionLabel += globalTab3 + ($localSettings.legacyVersion == 1 ? '' : '</div>\\n');\n        localNutritionLabel += globalTab2 + '</div><!-- closing class=\"cf\" -->\\n\\n'; //end of => if ($localSettings.originalServingUnitQuantity > 0) {\n      } else {\n        localServingSizeIsHidden = true;\n      }\n\n      if ($localSettings.showServingsPerContainer) {\n        //Serving per container\n        if ($localSettings.valueServingPerContainer > 0) {\n          localNutritionLabel += globalTab2 + '<div tabindex=\"0\">' + $localSettings.textServingsPerContainer + ' ' + roundLoDash($localSettings.valueServingPerContainer, $localSettings.decimalPlacesForNutrition) + '</div>\\n';\n        } else {\n          localServingContainerIsHidden = true;\n        }\n      } else {\n        localServingContainerIsHidden = true;\n      }\n\n      localNutritionLabel += globalTab1 + '</div><!-- closing class=\"serving\" -->\\n\\n';\n    } //end of => if ($localSettings.showServingUnitQuantity)\n\n\n    return {\n      servingSizeIsHidden: localServingSizeIsHidden,\n      servingContainerIsHidden: localServingContainerIsHidden,\n      nutritionLabel: localNutritionLabel\n    };\n  } //end of => function sevingUnitQuantityHtmlLegacy($localSettings)\n  //generate and return the html code for the calorie diets area\n\n\n  function calorieDietHtmlLegacy($localSettings) {\n    let localNutritionLabel = globalTab2 + '<table class=\"tblCalorieDiet\" aria-hidden=\"true\">\\n';\n    localNutritionLabel += globalTab3 + '<thead>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<th>&nbsp;</th>\\n';\n    localNutritionLabel += globalTab5 + '<th>' + $localSettings.textCalories + '</th>\\n';\n    localNutritionLabel += globalTab5 + '<th>' + $localSettings.valueCol1CalorieDiet + '</th>\\n';\n    localNutritionLabel += globalTab5 + '<th>' + $localSettings.valueCol2CalorieDiet + '</th>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab3 + '</thead>\\n';\n    localNutritionLabel += globalTab3 + '<tbody>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textTotalFat + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryTotalFat + 'g</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryTotalFat + 'g</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>&nbsp;&nbsp; ' + $localSettings.textSatFat + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietarySatFat + 'g</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietarySatFat + 'g</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textCholesterol + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryCholesterol + 'mg</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryCholesterol + 'mg</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textSodium + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietarySodium + 'mg</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietarySodium + 'mg</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textPotassium + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryPotassium + 'mg</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryPotassium + 'mg</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.textTotalCarb + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>&nbsp;</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryTotalCarb + 'g</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryTotalCarb + 'g</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab4 + '<tr>\\n';\n    localNutritionLabel += globalTab5 + '<td>&nbsp;&nbsp; ' + $localSettings.textCalorieDietHtmlLegacyDietary + '</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>&nbsp;</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1Dietary + 'g</td>\\n';\n    localNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2Dietary + 'g</td>\\n';\n    localNutritionLabel += globalTab4 + '</tr>\\n';\n    localNutritionLabel += globalTab3 + '</tbody>\\n';\n    return localNutritionLabel += globalTab2 + '</table>\\n';\n  } //end of => function calorieDietHtmlLegacy($localSettings)\n  //generate and return the html code for the ingredients area\n\n\n  function ingredientsHtmlLegacy($localSettings) {\n    let localNutritionLabel = '';\n\n    if (!$localSettings.hidePercentDailyValues) {\n      localNutritionLabel += globalTab3 + '<br/>\\n';\n    }\n\n    localNutritionLabel += globalTab3 + '<div class=\"' + ($localSettings.hidePercentDailyValues ? 'ingredientListDivHiddenDailyValues' : 'ingredientListDiv') + '\" tabindex=\"0\">\\n';\n    localNutritionLabel += globalTab4 + '<strong class=\"active\" id=\"ingredientList\">' + $localSettings.ingredientLabel + '</strong>\\n';\n    localNutritionLabel += globalTab4 + $localSettings.ingredientList + '\\n';\n    return localNutritionLabel += globalTab3 + '</div><!-- closing class=\"ingredientListDiv\" -->\\n\\n';\n  } //generate and return the html code for the disclaimer area\n\n\n  function disclaimerHtmlLegacy($localSettings) {\n    let localNutritionLabel = globalTab3 + '<br/>\\n\\n';\n    localNutritionLabel += globalTab3 + '<div id=\"calcDisclaimer\">\\n';\n    localNutritionLabel += globalTab4 + '<span id=\"calcDisclaimerText\" tabindex=\"0\">' + $localSettings.valueDisclaimer + '</span>\\n';\n    localNutritionLabel += globalTab3 + '</div><!-- closing class=\"calcDisclaimer\" -->\\n\\n';\n    return localNutritionLabel += globalTab3 + '<br/>\\n\\n';\n  } //generate and return the html code for the bottom link area\n\n\n  function bottomLinkHtmlLegacy($localSettings) {\n    let localNutritionLabel = globalTab1 + '<div class=\"spaceAbove\"></div>\\n';\n    localNutritionLabel += globalTab1 + '<a href=\"' + $localSettings.urlBottomLink + '\" target=\"_newSite\" class=\"homeLinkPrint\">' + $localSettings.nameBottomLink + '</a>\\n';\n    return localNutritionLabel += globalTab1 + '<div class=\"spaceBelow\"></div>\\n';\n  }\n  /*\r\n   * generate and return the html code for these areas that share similar html format for the legacy version of the label:\r\n   *    fat calories, calories, trans fat, poly fat, mono fat, sugars, sugar alcohol, proteins, vitamin a, vitamin c, calcium and iron\r\n   * attributeDisplayType\r\n   *    1 => <strong> + $localSettings[attributeText] + </strong> <span itemprop=\" + itemPropValue + \">\r\n   *    2 => $localSettings[attributeText] + ' '\r\n   *    3 => localExtraTab + $localSettings[attributeText] + <span itemprop=\"transFatContent\">;\r\n   *    4 => globalTab1 + <div class=\"line indent\">;\r\n   *    5 => a bit special format for vitamin a, vitamin c, calcium and iron\r\n   */\n\n\n  function generateAttributeWithoutPercentageHtmlLegacy($localSettings, valueIndex, unitIndex, naIndex, attributeText, localTabValue, lineClass, attributeDisplayType, itemPropValue, localExtraTab, roundFunctionName) {\n    //initialize the not applicable image icon in case we need to use it\n    //attributeDisplayType == 5 => for vitamin a, vitamin c, calcium and iron\n    let localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' + $localSettings.textDataNotAvailable + '</font>\\n';\n    let localNutritionLabel = localTabValue + '<div class=\"' + lineClass + '\" tabindex=\"0\">';\n\n    if (attributeDisplayType == 1) {\n      localNutritionLabel += '<strong>' + $localSettings[attributeText] + '</strong> <span itemprop=\"' + itemPropValue + '\">';\n    } else if (attributeDisplayType == 2) {\n      localNutritionLabel += $localSettings[attributeText] + ' ';\n    } else if (attributeDisplayType == 3) {\n      localNutritionLabel += localExtraTab + $localSettings[attributeText] + ' <span itemprop=\"' + itemPropValue + '\">';\n    } else if (attributeDisplayType == 4) {\n      localNutritionLabel += $localSettings[attributeText] + ' <span itemprop=\"' + itemPropValue + '\">';\n    } else if (attributeDisplayType == 5) {\n      localNutritionLabel += localExtraTab + '<div class=\"dv\">';\n    }\n\n    localNutritionLabel += $localSettings[naIndex] ? localNaValue : ($localSettings.allowFDARounding ? eval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) : roundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)) + $localSettings[unitIndex];\n\n    if (attributeDisplayType == 1 || attributeDisplayType == 4) {\n      localNutritionLabel += '</span></div>\\n';\n    } else if (attributeDisplayType == 2) {\n      localNutritionLabel += '</div>\\n';\n    } else if (attributeDisplayType == 3) {\n      localNutritionLabel += '\\n' + localTabValue + '</span></div>\\n';\n    } else if (attributeDisplayType == 5) {\n      localNutritionLabel += '</div>\\n';\n      localNutritionLabel += localExtraTab + $localSettings[attributeText] + '\\n';\n      localNutritionLabel += localTabValue + '</div>\\n';\n    }\n\n    return localNutritionLabel;\n  } //end of => function generateAttributeWithoutPercentageHtmlLegacy(**too many parameters**)\n\n  /*\r\n   * generate and return the html code for these areas that share similar html format: total fat, sat fat, cholesterol, sodium, total carb, fiber and potassium\r\n   */\n\n\n  function generateAttributeWithPercentageHtmlLegacy($localSettings, valueIndex, dailyValueIndex, unitIndex, naIndex, attributeTexts, lineClass, itemPropValue, roundFunctionName, roundFunctionRuleName, boldName, showPercentageCode) {\n    //initialize the not applicable image icon in case we need to use it\n    let localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' + $localSettings.textDataNotAvailable + '</font>\\n'; //https://github.com/nutritionix/nutrition-label/wiki/How-the-Percent-Daily-Value-is-Computed\n\n    let localNutritionLabel = globalTab1 + '<div class=\"' + lineClass + '\" tabindex=\"0\">\\n';\n\n    if (!$localSettings['hidePercentDailyValues'] && showPercentageCode) {\n      localNutritionLabel += globalTab2 + '<div class=\"dv\" aria-hidden=\"true\">';\n      localNutritionLabel += $localSettings[naIndex] ? localNaValue : '<strong>' + roundLoDash(($localSettings.allowFDARounding ? eval(roundFunctionRuleName)($localSettings[valueIndex]) : $localSettings[valueIndex]) / ($localSettings[dailyValueIndex] == 0 ? 1 : $localSettings[dailyValueIndex] * roundLoDash(parseFloat($localSettings.calorieIntake) / 2000, 2) //the 2nd part is the calorie intake\n      ) * 100, $localSettings.decimalPlacesForDailyValues) + '</strong>%';\n      localNutritionLabel += '</div>\\n';\n    }\n\n    if (boldName) {\n      localNutritionLabel += globalTab2 + '<strong>' + $localSettings[attributeTexts] + '</strong> <span itemprop=\"' + itemPropValue + '\">';\n    } else {\n      localNutritionLabel += globalTab2 + $localSettings[attributeTexts] + ' <span itemprop=\"' + itemPropValue + '\">';\n    }\n\n    localNutritionLabel += ($localSettings[naIndex] ? localNaValue : ($localSettings.allowFDARounding ? eval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) : roundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)) + $localSettings[unitIndex]) + '\\n';\n    return localNutritionLabel += globalTab1 + '</span></div>\\n';\n  } //end of => function generateAttributeWithPercentageHtmlLegacy(**too many parameters**)\n\n  /*\r\n   * generate and return the html code for these areas that share similar html format for the 2018 version of the label:\r\n   *    calories, total fat, saturated fat, trans fat, poly fat, mono fat, cholesterol, sodium, total carb, fibers, sugars, added sugar, sugar alcohol, proteins\r\n   */\n\n\n  function generateAttributeHtml2018Version($localSettings, valueIndex, unitIndex, naIndex, attributeText, itemPropValue, topDivClass, showPercentageCode, roundFunctionName, roundFunctionRuleName, labelClass, valueClass, dailyValueIndex) {\n    //initialize the not applicable image icon in case we need to use it\n    let localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' + $localSettings.textDataNotAvailable + '</font>\\n';\n    let localNutritionLabel = globalTab1 + '<div class=\"' + topDivClass + '\" tabindex=\"0\">\\n';\n\n    if (showPercentageCode && !$localSettings['hidePercentDailyValues']) {\n      localNutritionLabel += globalTab2 + '<span class=\"nf-highlight nf-pr\" aria-hidden=\"true\">'; //https://github.com/nutritionix/nutrition-label/wiki/How-the-Percent-Daily-Value-is-Computed\n\n      localNutritionLabel += $localSettings[naIndex] ? localNaValue : roundLoDash(($localSettings.allowFDARounding ? eval(roundFunctionRuleName)($localSettings[valueIndex]) : $localSettings[valueIndex]) / ($localSettings[dailyValueIndex] == 0 ? 1 : $localSettings[dailyValueIndex] * roundLoDash(parseFloat($localSettings.calorieIntake) / 2000, 2)) * 100, $localSettings.decimalPlacesForDailyValues) + '%';\n      localNutritionLabel += '</span>\\n';\n    } //this is for everything else\n\n\n    if (valueIndex != 'valueAddedSugars') {\n      localNutritionLabel += globalTab2 + '<span class=\"' + labelClass + '\">';\n      localNutritionLabel += $localSettings[attributeText];\n      localNutritionLabel += '</span>\\n';\n      localNutritionLabel += globalTab2 + '<span class=\"' + valueClass + '\" itemprop=\"' + itemPropValue + '\">';\n      localNutritionLabel += $localSettings[naIndex] ? localNaValue : ($localSettings.allowFDARounding ? eval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) : roundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)) + $localSettings[unitIndex];\n      localNutritionLabel += '</span>\\n'; //special case for added sugars\n    } else {\n      localNutritionLabel += globalTab2 + '<span class=\"' + labelClass + '\">\\n';\n      localNutritionLabel += $localSettings['textAddedSugars1'] + '\\n';\n      localNutritionLabel += globalTab3 + '<span class=\"' + valueClass + '\" itemprop=\"' + itemPropValue + '\">';\n      localNutritionLabel += $localSettings[naIndex] ? localNaValue : ($localSettings.allowFDARounding ? eval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) : roundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)) + $localSettings[unitIndex];\n      localNutritionLabel += '</span>\\n';\n      localNutritionLabel += $localSettings['textAddedSugars2'];\n      localNutritionLabel += '</span>\\n';\n    }\n\n    return localNutritionLabel += globalTab1 + '</div>\\n';\n  } //end of => function generateAttributeHtml2018Version(**too many parameters**)\n  //generate and return the html code for the ingredients area\n\n\n  function ingredientsHtml2018Version($localSettings) {\n    let localNutritionLabel = '';\n\n    if (!$localSettings.hidePercentDailyValues) {\n      localNutritionLabel += globalTab3 + '<br/>\\n\\n';\n    }\n\n    localNutritionLabel += globalTab3 + '<div class=\"' + ($localSettings.hidePercentDailyValues ? 'nf-ingredientListDivHiddenDailyValues' : 'nf-ingredientListDiv') + '\" tabindex=\"0\">\\n';\n    localNutritionLabel += globalTab4 + '<strong class=\"active\" id=\"nf-ingredientList\">' + $localSettings.ingredientLabel + '</strong>\\n';\n    localNutritionLabel += globalTab4 + $localSettings.ingredientList + '\\n';\n    return localNutritionLabel += globalTab3 + '</div><!-- closing class=\"nf-ingredientListDiv\" -->\\n\\n';\n  } //generate and return the html code for the disclaimer area\n\n\n  function disclaimerHtml2018Version($localSettings) {\n    let localNutritionLabel = globalTab3 + '<br/>\\n\\n';\n    localNutritionLabel += globalTab3 + '<div id=\"nf-calcDisclaimer\">\\n';\n    localNutritionLabel += globalTab4 + '<span id=\"nf-calcDisclaimerText\" tabindex=\"0\">' + $localSettings.valueDisclaimer + '</span>\\n';\n    localNutritionLabel += globalTab3 + '</div><!-- closing class=\"nf-calcDisclaimer\" -->\\n\\n';\n    return localNutritionLabel += globalTab3 + '<br/>\\n\\n';\n  } //generate and return the html code for the bottom link area\n\n\n  function bottomLinkHtml2018Version($localSettings) {\n    let localNutritionLabel = globalTab1 + '<div class=\"nf-spaceAbove\"></div>\\n';\n    localNutritionLabel += globalTab1 + '<a href=\"' + $localSettings.urlBottomLink + '\" target=\"_newSite\" class=\"nf-homeLinkPrint\">' + $localSettings.nameBottomLink + '</a>\\n';\n    return localNutritionLabel += globalTab1 + '<div class=\"nf-spaceBelow\"></div>\\n';\n  }\n  /*\r\n   * generate and return the html code for these areas that share similar html format: vitamin d, calcium, iron and potassium\r\n   */\n\n\n  function generate2018HtmlAndComputeValueGivenThePercentage($localSettings, valueIndex, dailyValueIndex, unitIndex_base, unitIndex_percent, naIndex, attributeTexts, showPercentageCode, lastRow) {\n    //initialize the not applicable image icon in case we need to use it\n    let localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' + $localSettings.textDataNotAvailable + '</font>\\n';\n    let localNutritionLabel = '<div class=\"nf-vitamin-column' + (lastRow ? ' nf-vitamin-column-last' : '') + '\" tabindex=\"0\">\\n';\n    localNutritionLabel += $localSettings[attributeTexts] + ' ';\n    localNutritionLabel += ($localSettings[naIndex] ? localNaValue : roundLoDash( //percentage / 100 * daily value\n    $localSettings[valueIndex] / 100 * $localSettings[dailyValueIndex], $localSettings.decimalPlacesForDailyValues) + $localSettings[unitIndex_base] + (showPercentageCode ? ' <span class=\"nf-pr\" aria-hidden=\"true\">' + roundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForDailyValues) + $localSettings[unitIndex_percent] + '</span>' : '')) + '\\n';\n    return localNutritionLabel += '</div>\\n';\n  } //generate and return the html code for the item area\n\n\n  function itemNameHtml2018($localSettings) {\n    let itemNameClass = '';\n    let localNutritionLabel = '';\n\n    if ($localSettings.showServingUnitQuantityTextbox) {\n      if ($localSettings.valueServingSizeUnit === null || $localSettings.valueServingSizeUnit == '' || $localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null && $localSettings.originalServingUnitQuantity <= 0) {\n        let hideArrowsClass = '';\n        let textboxClass = 'nf-unitQuantityBox nf-modifier-field';\n\n        if (!$localSettings.hideTextboxArrows) {\n          localNutritionLabel += globalTab3 + '<div class=\"nf-arrows\">\\n';\n          localNutritionLabel += globalTab4 + '<div class=\"nf-unitQuantityUp nf-arrow-up\" aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" ';\n          localNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\n          localNutritionLabel += globalTab4 + '<div class=\"nf-unitQuantityDown nf-arrow-down\" aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" ';\n          localNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\n          localNutritionLabel += globalTab3 + '</div><!-- closing class=\"nf-arrows v1\" -->\\n\\n';\n        } else {\n          textboxClass = 'nf-unitQuantityBox nf-modifier-field nf-arrowsAreHidden';\n          hideArrowsClass = 'nf-fixed-serving ';\n        }\n\n        localNutritionLabel += globalTab3 + '<input type=\"text\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" class=\"' + textboxClass + '\" data-role=\"none\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\n        localNutritionLabel += globalTab3 + '<input type=\"hidden\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" id=\"nf-nixLabelBeforeQuantity\">\\n\\n';\n        itemNameClass = hideArrowsClass;\n      } else if (!$localSettings.showServingUnitQuantity) {\n        itemNameClass += 'no-indent';\n      } //end of => if ($localSettings.showServingUnitQuantityTextbox)\n\n    } else {\n      itemNameClass += 'no-indent';\n    }\n\n    localNutritionLabel += globalTab3 + '<div class=\"nf-item-name ' + itemNameClass + '\" tabindex=\"0\">\\n';\n\n    if ($localSettings.showServingUnitQuantity && $localSettings.originalServingUnitQuantity > 0 && $localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null) {\n      localNutritionLabel += globalTab4 + $localSettings.valueServingSizeUnit + '\\n';\n\n      if ($localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\n        localNutritionLabel += globalTab4 + '(<span itemprop=\"servingSize\">' + roundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) + $localSettings.unitServingWeight + '</span>)\\n';\n      }\n    }\n\n    localNutritionLabel += globalTab4 + '<div>\\n';\n    localNutritionLabel += globalTab5 + $localSettings.itemName + '\\n';\n\n    if ($localSettings.showBrandName && $localSettings.brandName !== null && $localSettings.brandName != '') {\n      localNutritionLabel += ' - ' + $localSettings.brandName;\n    }\n\n    localNutritionLabel += '\\n' + globalTab4 + '</div>\\n';\n    return localNutritionLabel += globalTab3 + '</div>\\n';\n  } //end of => function itemNameHtml2018($localSettings)\n  //generate and return the html code for the serving unit quantity area\n\n\n  function sevingUnitQuantityHtml2018($localSettings) {\n    let localServingSizeIsHidden = false;\n    let localServingContainerIsHidden = false;\n    let localNutritionLabel = '';\n\n    if ($localSettings.showServingUnitQuantity) {\n      if ($localSettings.originalServingUnitQuantity > 0) {\n        let servingSizeDivAlreadyClosed = false;\n        localNutritionLabel += globalTab3 + '<div tabIndex=\"0\" class=\"nf-line\"><!-- opening for serving size div -->\\n';\n        localNutritionLabel += globalTab4 + $localSettings.textServingSize;\n        localNutritionLabel += $localSettings.showServingUnitQuantityTextbox ? '' : ' <span itemprop=\"servingSize\">' + roundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) + ' </span>\\n';\n\n        if ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null) {\n          if ($localSettings.showServingUnitQuantityTextbox && $localSettings.valueServingSizeUnit !== null && $localSettings.valueServingSizeUnit != '') {\n            let textboxClass = 'nf-unitQuantityBox nf-modifier-field'; //close the serving size div\n            //this is needed so cases like this will be shown properly\n\n            servingSizeDivAlreadyClosed = true;\n            localNutritionLabel += '\\n' + globalTab3 + '</div><!-- closing for serving size div -->\\n\\n';\n\n            if (!$localSettings.hideTextboxArrows) {\n              localNutritionLabel += globalTab5 + '<div class=\"nf-arrows\"><!-- opening class=\"nf-arrows\" -->\\n';\n              localNutritionLabel += globalTab6 + '<div class=\"nf-unitQuantityUp nf-arrow-up\" aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" ';\n              localNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\n              localNutritionLabel += globalTab6 + '<div class=\"nf-unitQuantityDown nf-arrow-down\" aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" ';\n              localNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\n              localNutritionLabel += globalTab5 + '</div><!-- closing class=\"nf-arrows v2\" -->\\n\\n';\n            } else {\n              textboxClass = 'nf-unitQuantityBox nf-modifier-field nf-arrowsAreHidden';\n            }\n\n            localNutritionLabel += globalTab5 + '<input type=\"text\" data-role=\"none\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" class=\"' + textboxClass + '\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\n            localNutritionLabel += globalTab5 + '<input type=\"hidden\" value=\"' + roundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) + '\" id=\"nf-nixLabelBeforeQuantity\">\\n\\n';\n          } else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\n            localNutritionLabel += ' <span itemprop=\"servingSize\">' + roundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) + '</span>\\n';\n          }\n\n          if (!$localSettings.showItemName) {\n            localNutritionLabel += globalTab5 + '<div class=\"nf-item-name\" tabindex=\"0\">\\n';\n            localNutritionLabel += globalTab6 + $localSettings.valueServingSizeUnit + '\\n';\n\n            if ($localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\n              localNutritionLabel += globalTab6 + '(' + roundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) + $localSettings.unitServingWeight + ')\\n';\n            }\n\n            localNutritionLabel += globalTab5 + '</div>\\n';\n          } //end of => if ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null)\n\n        } else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\n          localNutritionLabel += ' <span itemprop=\"servingSize\">' + roundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) + '</span>\\n';\n\n          if (($localSettings.valueServingSizeUnit == '' || $localSettings.valueServingSizeUnit === null) && $localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\n            localNutritionLabel += globalTab4 + '(' + roundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) + $localSettings.unitServingWeight + ')\\n';\n          }\n        }\n\n        if (!servingSizeDivAlreadyClosed) {\n          localNutritionLabel += globalTab3 + '</div><!-- closing for serving size div -->\\n\\n';\n        } //end of => if ($localSettings.originalServingUnitQuantity > 0)\n\n      } else {\n        localServingSizeIsHidden = true;\n      } //end of => if ($localSettings.showServingUnitQuantity)\n\n    } else if (!$localSettings.showServingUnitQuantity && $localSettings.showOnlyTheTextServingSize) {\n      localNutritionLabel += globalTab3 + '<div tabIndex=\"0\" class=\"nf-line\">\\n';\n      localNutritionLabel += globalTab4 + $localSettings.textServingSize;\n      localNutritionLabel += globalTab3 + '</div>\\n\\n';\n    }\n\n    return {\n      servingSizeIsHidden: localServingSizeIsHidden,\n      servingContainerIsHidden: localServingContainerIsHidden,\n      nutritionLabel: localNutritionLabel\n    };\n  } //end of => function sevingUnitQuantityHtml2018($localSettings)\n\n  /*\r\n   * generate and return the html code for these areas that share similar html format: total fat, sat fat, cholesterol, sodium, total carb, fiber and potassium\r\n   */\n\n\n  function generateAttributeForUK($localSettings, valueIndex, dailyValueIndex, unitIndex, naIndex, attributeTexts, itemPropValue, roundFunctionName, roundFunctionRuleName, showPercentageCode, indentedName) {\n    //initialize the not applicable image icon in case we need to use it\n    let localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' + $localSettings.textDataNotAvailable + '</font>\\n';\n    let localNutritionLabel = globalTab2 + '<tr tabindex=\"0\">\\n';\n    let nameClass = '';\n    let nutritionValueLocal = $localSettings[valueIndex];\n\n    if (indentedName) {\n      nameClass = 'uk_nf-indent';\n    } //value on the name column\n\n\n    localNutritionLabel += globalTab3 + '<td class=\"' + nameClass + '\">';\n\n    if (String(attributeTexts) != '') {\n      localNutritionLabel += $localSettings[attributeTexts];\n    }\n\n    localNutritionLabel += '</td>\\n';\n\n    if (valueIndex == 'valueCalories' && unitIndex == 'unitEnergy_kj') {\n      nutritionValueLocal *= 4.184;\n    } else if (valueIndex == 'valueSodium') {\n      nutritionValueLocal *= 0.0025;\n    } //value on the second column (per 100 gram column)\n\n\n    localNutritionLabel += globalTab3 + '<td>';\n    localNutritionLabel += $localSettings[naIndex] ? localNaValue : ($localSettings.allowFDARounding ? valueIndex == 'valueCalories' ? eval(roundFunctionName)(nutritionValueLocal / $localSettings.valueServingWeightGrams * 100, 1) : eval(roundFunctionName)(nutritionValueLocal / $localSettings.valueServingWeightGrams * 100) : roundLoDash(nutritionValueLocal / $localSettings.valueServingWeightGrams * 100, $localSettings.decimalPlacesForNutrition)) + $localSettings[unitIndex];\n    localNutritionLabel += '</td>\\n'; //value on the third column (actual value of the nutrition)\n\n    localNutritionLabel += globalTab3 + '<td itemprop=\"' + itemPropValue + '\">';\n    localNutritionLabel += $localSettings[naIndex] ? localNaValue : ($localSettings.allowFDARounding ? valueIndex == 'valueCalories' ? eval(roundFunctionName)(nutritionValueLocal, 1) : eval(roundFunctionName)(nutritionValueLocal) : roundLoDash(nutritionValueLocal, $localSettings.decimalPlacesForNutrition)) + $localSettings[unitIndex];\n    localNutritionLabel += '</td>\\n'; //value on the percentage column (4th)\n\n    localNutritionLabel += globalTab3 + '<td aria-hidden=\"true\">';\n\n    if (!$localSettings['hidePercentDailyValues'] && showPercentageCode) {\n      //https://github.com/nutritionix/nutrition-label/wiki/How-the-Percent-Daily-Value-is-Computed\n      localNutritionLabel += $localSettings[naIndex] ? localNaValue : roundLoDash(($localSettings.allowFDARounding ? valueIndex == 'valueCalories' ? eval(roundFunctionRuleName)(nutritionValueLocal, 1) : eval(roundFunctionRuleName)(nutritionValueLocal) : nutritionValueLocal) / ($localSettings[dailyValueIndex] == 0 ? 1 : $localSettings[dailyValueIndex] * roundLoDash(parseFloat($localSettings.calorieIntake) / 2000, 2) //the 2nd part is the calorie intake\n      ) * 100, $localSettings.decimalPlacesForDailyValues) + '%';\n    }\n\n    return localNutritionLabel + '</td>\\n' + globalTab2 + '</tr>\\n';\n  } //end of => function generateAttributeForUK(**too many parameters**)\n  //generate and return the html code for the reference intake area\n\n\n  function referenceIntakeHtmlUKVersion($localSettings) {\n    let localNutritionLabel = globalTab6 + '<div class=\"referenceIntake\" tabindex=\"0\">\\n';\n    localNutritionLabel += globalTab7 + '* ' + $localSettings.textUKReferenceIntake + ' '; //the kj value on the reference intake is rounded to the nearest hundred\n\n    localNutritionLabel += '(' + roundToNearestNum($localSettings.calorieIntake * 4.184, 100) + $localSettings.unitEnergy_kj;\n    localNutritionLabel += '/' + $localSettings.calorieIntake + $localSettings.unitEnergy_kcal + ')\\n';\n    return localNutritionLabel += globalTab6 + '</div>\\n<div class=\"uk_nf-spaceBelow\"></div>\\n';\n  } //generate and return the html code for the ingredients area\n\n\n  function ingredientsHtmlUKVersion($localSettings) {\n    let localNutritionLabel = globalTab6 + '<div class=\"uk_nf-ingredientListDiv\" tabindex=\"0\">\\n';\n    localNutritionLabel += globalTab7 + '<strong class=\"active\" id=\"uk_nf-ingredient-statement\">' + $localSettings.ingredientLabel + '</strong> ' + $localSettings.ingredientList + '\\n';\n    return localNutritionLabel += globalTab6 + '</div><br/><!-- closing class=\"uk_nf-ingredientListDiv\" -->\\n\\n';\n  } //generate and return the html code for the disclaimer area\n\n\n  function disclaimerHtmlUKVersion($localSettings) {\n    let localNutritionLabel = globalTab6 + '<div id=\"uk_nf-calcDisclaimer\">\\n';\n    localNutritionLabel += globalTab7 + '<span id=\"uk_nf-disclaimer\" tabindex=\"0\">' + $localSettings.valueDisclaimer + '</span>\\n';\n    return localNutritionLabel += globalTab6 + '</div><br/><!-- closing id=\"uk_nf-calcDisclaimer\" -->\\n\\n';\n  } //generate and return the html code for the bottom link area\n\n\n  function bottomLinkHtmlUKVersion($localSettings) {\n    let localNutritionLabel = globalTab6 + '<div class=\"uk_nf-spaceAbove\"></div>\\n';\n    localNutritionLabel += globalTab6 + '<a href=\"' + $localSettings.urlBottomLink + '\" target=\"_newSite\" class=\"uk_nf-homeLinkPrint\">' + $localSettings.nameBottomLink + '</a>\\n';\n    return localNutritionLabel += globalTab6 + '<div class=\"uk_nf-spaceBelow\"></div>\\n';\n  } //based on https://github.com/lodash/lodash/blob/master/.internal/createRound.js\n\n  /**\r\n   * Creates a function like `round`.\r\n   *\r\n   * @private\r\n   * @param {string} methodName The name of the `Math` method to use when rounding.\r\n   * @returns {Function} Returns the new round function.\r\n   */\n\n\n  function createRound(methodName) {\n    const func = Math[methodName];\n    return (number, precision) => {\n      precision = precision === null ? 0 : precision >= 0 ? Math.min(precision, 292) : Math.max(precision, -292);\n\n      if (precision) {\n        // Shift with exponential notation to avoid floating-point issues.\n        // See [MDN](https://mdn.io/round#Examples) for more details.\n        let pair = `${number}e`.split('e');\n        const value = func(`${pair[0]}e${+pair[1] + precision}`);\n        pair = `${value}e`.split('e');\n        return +`${pair[0]}e${+pair[1] - precision}`;\n      }\n\n      return func(number);\n    };\n  } //based on https://github.com/lodash/lodash/blob/master/round.js\n\n  /**\r\n   * Computes `number` rounded to `precision`.\r\n   *\r\n   * @since 3.10.0\r\n   * @category Math\r\n   * @param {number} number The number to round.\r\n   * @param {number} [precision=0] The precision to round to.\r\n   * @returns {number} Returns the rounded number.\r\n   * @example\r\n   *\r\n   * round(4.006)\r\n   * // => 4\r\n   *\r\n   * round(4.006, 2)\r\n   * // => 4.01\r\n   *\r\n   * round(4060, -2)\r\n   * // => 4100\r\n   */\n\n\n  const roundLoDash = createRound('round');\n  NutritionLabel.prototype = {\n    generateLegacy: function () {\n      //this is the function that returns the html code for the nutrition label based on the settings that is supplied by the user\n      let $this = this;\n      let borderCSS = '';\n      let nutritionLabel = '';\n      let sevingUnitQuantityHtmlLegacyResult = sevingUnitQuantityHtmlLegacy($this.settings);\n      let servingSizeIsHidden = sevingUnitQuantityHtmlLegacyResult.servingSizeIsHidden;\n      let servingContainerIsHidden = sevingUnitQuantityHtmlLegacyResult.servingContainerIsHidden;\n      let useLine = 'addedPadding';\n      let useLineAgain = 'addedPadding'; //return the plugin incase it has already been created\n\n      if ($this.nutritionLabel) {\n        return $this.nutritionLabel;\n      }\n\n      if ($this.settings.hideNotApplicableValues) {\n        $this.settings.showCalories = $this.settings.naCalories ? false : $this.settings.showCalories;\n        $this.settings.showFatCalories = $this.settings.naFatCalories ? false : $this.settings.showFatCalories;\n        $this.settings.showTotalFat = $this.settings.naTotalFat ? false : $this.settings.showTotalFat;\n        $this.settings.showSatFat = $this.settings.naSatFat ? false : $this.settings.showSatFat;\n        $this.settings.showTransFat = $this.settings.naTransFat ? false : $this.settings.showTransFat;\n        $this.settings.showPolyFat = $this.settings.naPolyFat ? false : $this.settings.showPolyFat;\n        $this.settings.showMonoFat = $this.settings.naMonoFat ? false : $this.settings.showMonoFat;\n        $this.settings.showCholesterol = $this.settings.naCholesterol ? false : $this.settings.showCholesterol;\n        $this.settings.showSodium = $this.settings.naSodium ? false : $this.settings.showSodium;\n        $this.settings.showPotassium = $this.settings.naPotassium ? false : $this.settings.showPotassium;\n        $this.settings.showTotalCarb = $this.settings.naTotalCarb ? false : $this.settings.showTotalCarb;\n        $this.settings.showFibers = $this.settings.naFibers ? false : $this.settings.showFibers;\n        $this.settings.showSugars = $this.settings.naSugars ? false : $this.settings.showSugars;\n        $this.settings.showSugarAlcohol = $this.settings.naSugarAlcohol ? false : $this.settings.showSugarAlcohol;\n        $this.settings.showProteins = $this.settings.naProteins ? false : $this.settings.showProteins;\n        $this.settings.showVitaminA = $this.settings.naVitaminA ? false : $this.settings.showVitaminA;\n        $this.settings.showVitaminC = $this.settings.naVitaminC ? false : $this.settings.showVitaminC;\n        $this.settings.showCalcium = $this.settings.naCalcium ? false : $this.settings.showCalcium;\n        $this.settings.showIron = $this.settings.naIron ? false : $this.settings.showIron;\n      }\n\n      if ($this.settings.hidePercentDailyValues) {\n        $this.settings.showVitaminA = false;\n        $this.settings.showVitaminC = false;\n        $this.settings.showCalcium = false;\n        $this.settings.showIron = false;\n      }\n\n      if ($this.settings.allowNoBorder) {\n        borderCSS = 'border: 0;';\n      } //creates the html code for the label based on the settings\n\n\n      nutritionLabel = '<div itemscope itemtype=\"http://schema.org/NutritionInformation\" class=\"nutritionLabel\" role=\"region\" aria-label=\"nutrition label\" style=\"' + borderCSS;\n\n      if (!$this.settings.allowCustomWidth) {\n        nutritionLabel += ' width: ' + $this.settings.width + 'px;\">\\n';\n      } else {\n        nutritionLabel += ' width: ' + $this.settings.widthCustom + ';\">\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"title\" tabindex=\"0\">' + $this.settings.textNutritionFacts + '</div>\\n';\n\n      if ($this.settings.showItemName) {\n        nutritionLabel += itemNameHtmlLegacy($this.settings);\n      }\n\n      nutritionLabel += sevingUnitQuantityHtmlLegacyResult.nutritionLabel;\n\n      if (!$this.settings.showItemName && !$this.settings.showServingUnitQuantity || !$this.settings.showItemName && servingSizeIsHidden && servingContainerIsHidden) {\n        nutritionLabel += globalTab1 + '<div class=\"headerSpacer\"></div>\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"bar1\"></div>\\n';\n\n      if ($this.settings.showAmountPerServing) {\n        nutritionLabel += globalTab1 + '<div class=\"addedPadding m\" tabindex=\"0\">';\n        nutritionLabel += '<strong>' + $this.settings.textAmountPerServing + '</strong>';\n        nutritionLabel += '</div>\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"' + ($this.settings.showAmountPerServing ? 'line' : 'addedPadding') + '\">\\n';\n\n      if ($this.settings.showFatCalories) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex          unitIndex          naIndex          attributeText     localTabValue lineClass attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueFatCalories', 'unitFatCalories', 'naFatCalories', 'textFatCalories', globalTab2, 'fr', 2, '', '', 'roundCalories');\n      }\n\n      if ($this.settings.showCalories) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueCalories', 'unitCalories', 'naCalories', 'textCalories', globalTab2, '', 1, 'calories', '', 'roundCalories');\n      } else if ($this.settings.showFatCalories) {\n        nutritionLabel += globalTab2 + '<div>&nbsp;</div>\\n';\n      }\n\n      nutritionLabel += globalTab1 + '</div>\\n';\n      nutritionLabel += globalTab1 + '<div class=\"bar2\"></div>\\n';\n\n      if (!$this.settings.hidePercentDailyValues) {\n        useLine = 'line';\n        nutritionLabel += globalTab1 + '<div class=\"addedPadding ar\">';\n        nutritionLabel += '<strong>% ' + $this.settings.textDailyValues + '<sup>*</sup></strong>';\n        nutritionLabel += '</div>\\n';\n      }\n\n      if ($this.settings.showTotalFat) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex       dailyValueIndex       unitIndex       naIndex       attributeTexts  lineClass itemPropValue roundFunctionName roundFunctionRuleName boldName showPercentageCode\n        $this.settings, 'valueTotalFat', 'dailyValueTotalFat', 'unitTotalFat', 'naTotalFat', 'textTotalFat', useLine, 'fatContent', 'roundFat', 'roundFatRule', true, $this.settings.showDailyTotalFat);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showSatFat) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex     dailyValueIndex     unitIndex     naIndex     attributeTexts lineClass             itemPropValue          roundFunctionName roundFunctionRuleName boldName showPercentageCode\n        $this.settings, 'valueSatFat', 'dailyValueSatFat', 'unitSatFat', 'naSatFat', 'textSatFat', useLine + ' indent', 'saturatedFatContent', 'roundFat', 'roundFatRule', false, $this.settings.showDailySatFat);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showTransFat) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass            attributeDisplayType itemPropValue     localExtraTab roundFunctionName\n        $this.settings, 'valueTransFat', 'unitTransFat', 'naTransFat', 'textTransFat', globalTab1, useLine + ' indent', 3, 'transFatContent', globalTab2, 'roundFat');\n        useLine = 'line';\n      }\n\n      if ($this.settings.showPolyFat) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex      unitIndex      naIndex      attributeText localTabValue lineClass            attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valuePolyFat', 'unitPolyFat', 'naPolyFat', 'textPolyFat', globalTab1, useLine + ' indent', 2, '', '', 'roundFat');\n        useLine = 'line';\n      }\n\n      if ($this.settings.showMonoFat) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex      unitIndex      naIndex      attributeText localTabValue lineClass            attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueMonoFat', 'unitMonoFat', 'naMonoFat', 'textMonoFat', globalTab1, useLine + ' indent', 2, '', '', 'roundFat');\n        useLine = 'line';\n      }\n\n      if ($this.settings.showCholesterol) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex          dailyValueIndex          unitIndex          naIndex          attributeTexts    lineClass itemPropValue         roundFunctionName   roundFunctionRuleName  boldName showPercentageCode\n        $this.settings, 'valueCholesterol', 'dailyValueCholesterol', 'unitCholesterol', 'naCholesterol', 'textCholesterol', useLine, 'cholesterolContent', 'roundCholesterol', 'roundCholesterolRule', true, $this.settings.showDailyCholesterol);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showSodium) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex     dailyValueIndex     unitIndex     naIndex     attributeTexts lineClass itemPropValue    roundFunctionName roundFunctionRuleName boldName showPercentageCode\n        $this.settings, 'valueSodium', 'dailyValueSodium', 'unitSodium', 'naSodium', 'textSodium', useLine, 'sodiumContent', 'roundSodium', 'roundSodiumRule', true, $this.settings.showDailySodium);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showPotassium) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex        dailyValueIndex        unitIndex        naIndex        attributeTexts  lineClass itemPropValue       roundFunctionName roundFunctionRuleName boldName showPercentageCode\n        $this.settings, 'valuePotassium', 'dailyValuePotassium', 'unitPotassium', 'naPotassium', 'textPotassium', useLine, 'potassiumContent', 'roundPotassium', 'roundPotassiumRule', true, $this.settings.showDailyPotassium);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showTotalCarb) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex        dailyValueIndex   unitIndex        naIndex        attributeTexts  lineClass itemPropValue          roundFunctionName             roundFunctionRuleName            boldName showPercentageCode\n        $this.settings, 'valueTotalCarb', 'dailyValueCarb', 'unitTotalCarb', 'naTotalCarb', 'textTotalCarb', useLine, 'carbohydrateContent', 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', true, $this.settings.showDailyTotalCarb);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showFibers) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex     dailyValueIndex    unitIndex     naIndex     attributeTexts lineClass             itemPropValue   roundFunctionName             roundFunctionRuleName            boldName showPercentageCode\n        $this.settings, 'valueFibers', 'dailyValueFiber', 'unitFibers', 'naFibers', 'textFibers', useLine + ' indent', 'fiberContent', 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', false, $this.settings.showDailyFibers);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showSugars) {\n        nutritionLabel += generateAttributeWithPercentageHtmlLegacy( //$localSetting  valueIndex     dailyValueIndex    unitIndex     naIndex     attributeTexts lineClass             itemPropValue   roundFunctionName             roundFunctionRuleName            boldName showPercentageCode\n        $this.settings, 'valueSugars', 'dailyValueSugar', 'unitSugars', 'naSugars', 'textSugars', useLine + ' indent', 'sugarContent', 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', false, $this.settings.showDailySugars);\n        useLine = 'line';\n      }\n\n      if ($this.settings.showSugarAlcohol) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex           unitIndex           naIndex           attributeText      localTabValue lineClass            attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueSugarAlcohol', 'unitSugarAlcohol', 'naSugarAlcohol', 'textSugarAlcohol', globalTab1, useLine + ' indent', 4, '', '', 'roundCarbFiberSugarProtein');\n        useLine = 'line';\n      }\n\n      if ($this.settings.showProteins) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass attributeDisplayType itemPropValue    localExtraTab roundFunctionName\n        $this.settings, 'valueProteins', 'unitProteins', 'naProteins', 'textProteins', globalTab1, useLine, 1, 'proteinContent', '', 'roundCarbFiberSugarProtein');\n        useLine = 'line'; //in case we need to add more attributes below this in future updates\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"bar1\"></div>\\n';\n\n      if ($this.settings.showVitaminA) {\n        //in case we need to add more attributes above this in future updates\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass                   attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueVitaminA', 'unitVitaminA', 'naVitaminA', 'textVitaminA', globalTab1, useLineAgain + ' vitaminA', 5, '', globalTab2, 'roundVitaminsCalciumIron');\n        useLineAgain = 'line';\n      }\n\n      if ($this.settings.showVitaminC) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass                   attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueVitaminC', 'unitVitaminC', 'naVitaminC', 'textVitaminC', globalTab1, useLineAgain + ' vitaminC', 5, '', globalTab2, 'roundVitaminsCalciumIron');\n        useLineAgain = 'line';\n      }\n\n      if ($this.settings.showCalcium) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex      unitIndex      naIndex      attributeText localTabValue lineClass                  attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueCalcium', 'unitCalcium', 'naCalcium', 'textCalcium', globalTab1, useLineAgain + ' calcium', 5, '', globalTab2, 'roundVitaminsCalciumIron');\n        useLineAgain = 'line';\n      }\n\n      if ($this.settings.showIron) {\n        nutritionLabel += generateAttributeWithoutPercentageHtmlLegacy( //$localSettings valueIndex   unitIndex   naIndex   attributeText localTabValue lineClass               attributeDisplayType itemPropValue localExtraTab roundFunctionName\n        $this.settings, 'valueIron', 'unitIron', 'naIron', 'textIron', globalTab1, useLineAgain + ' iron', 5, '', globalTab2, 'roundVitaminsCalciumIron');\n        useLineAgain = 'line'; //in case we need to add more attributes below this in future updates\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"dvCalorieDiet ' + useLineAgain + '\">\\n';\n      nutritionLabel += globalTab2 + '<div class=\"calorieNote\">\\n';\n\n      if (!$this.settings.hidePercentDailyValues) {\n        nutritionLabel += globalTab3 + '<span tabindex=\"0\"><span class=\"star\" aria-hidden=\"true\">*</span> ' + $this.settings.textPercentDailyPart1 + ' ' + $this.settings.calorieIntake + ' ' + $this.settings.textPercentDailyPart2 + '.</span>\\n';\n      }\n\n      if ($this.settings.showIngredients) {\n        nutritionLabel += ingredientsHtmlLegacy($this.settings);\n      }\n\n      if ($this.settings.showDisclaimer) {\n        nutritionLabel += disclaimerHtmlLegacy($this.settings);\n      }\n\n      nutritionLabel += globalTab2 + '</div><!-- closing class=\"calorieNote\" -->\\n\\n';\n\n      if ($this.settings.showCalorieDiet) {\n        nutritionLabel += calorieDietHtmlLegacy($this.settings);\n      }\n\n      nutritionLabel += globalTab1 + '</div><!-- closing class=\"dvCalorieDiet line\" -->\\n\\n';\n\n      if ($this.settings.showBottomLink) {\n        nutritionLabel += bottomLinkHtmlLegacy($this.settings);\n      }\n\n      if ($this.settings.showCustomFooter) {\n        nutritionLabel += globalTab1 + '<div class=\"customFooter\" tabindex=\"0\">' + $this.settings.valueCustomFooter + '</div>\\n';\n      } //returns the html for the nutrition label\n\n\n      return nutritionLabel += '<div class=\"naTooltip\">' + $this.settings.textDataNotAvailable + '</div>\\n</div><!-- closing class=\"nutritionLabel\" -->\\n';\n    },\n    //end of => generateLegacy: function()\n    generate2018: function () {\n      //this is the function that returns the html code for the nutrition label based on the settings that is supplied by the user\n      let $this = this;\n      let borderCSS = '';\n      let nutritionLabel = '';\n      let showLineDiv;\n      let sevingUnitQuantityHtml2018Result = sevingUnitQuantityHtml2018($this.settings);\n      let servingSizeIsHidden = sevingUnitQuantityHtml2018Result.servingSizeIsHidden;\n      let servingContainerIsHidden = sevingUnitQuantityHtml2018Result.servingContainerIsHidden; //return the plugin incase it has already been created\n\n      if ($this.nutritionLabel) {\n        return $this.nutritionLabel;\n      }\n\n      if ($this.settings.hideNotApplicableValues) {\n        $this.settings.showCalories = $this.settings.naCalories ? false : $this.settings.showCalories;\n        $this.settings.showFatCalories = $this.settings.naFatCalories ? false : $this.settings.showFatCalories;\n        $this.settings.showTotalFat = $this.settings.naTotalFat ? false : $this.settings.showTotalFat;\n        $this.settings.showSatFat = $this.settings.naSatFat ? false : $this.settings.showSatFat;\n        $this.settings.showTransFat = $this.settings.naTransFat ? false : $this.settings.showTransFat;\n        $this.settings.showPolyFat = $this.settings.naPolyFat ? false : $this.settings.showPolyFat;\n        $this.settings.showMonoFat = $this.settings.naMonoFat ? false : $this.settings.showMonoFat;\n        $this.settings.showCholesterol = $this.settings.naCholesterol ? false : $this.settings.showCholesterol;\n        $this.settings.showSodium = $this.settings.naSodium ? false : $this.settings.showSodium;\n        $this.settings.showPotassium_2018 = $this.settings.naPotassium_2018 ? false : $this.settings.showPotassium_2018;\n        $this.settings.showTotalCarb = $this.settings.naTotalCarb ? false : $this.settings.showTotalCarb;\n        $this.settings.showFibers = $this.settings.naFibers ? false : $this.settings.showFibers;\n        $this.settings.showSugars = $this.settings.naSugars ? false : $this.settings.showSugars;\n        $this.settings.showAddedSugars = $this.settings.naAddedSugars ? false : $this.settings.showAddedSugars;\n        $this.settings.showSugarAlcohol = $this.settings.naSugarAlcohol ? false : $this.settings.showSugarAlcohol;\n        $this.settings.showProteins = $this.settings.naProteins ? false : $this.settings.showProteins;\n        $this.settings.showVitaminD = $this.settings.naVitaminD ? false : $this.settings.showVitaminD;\n        $this.settings.showCalcium = $this.settings.naCalcium ? false : $this.settings.showCalcium;\n        $this.settings.showIron = $this.settings.naIron ? false : $this.settings.showIron;\n        $this.settings.showCaffeine = $this.settings.naCaffeine ? false : $this.settings.showCaffeine;\n      }\n\n      if ($this.settings.hidePercentDailyValues) {\n        $this.settings.showDailyVitaminD = false;\n        $this.settings.showDailyCalcium = false;\n        $this.settings.showDailyIron = false;\n        $this.settings.showDailyPotassium_2018 = false;\n      }\n\n      if ($this.settings.allowNoBorder) {\n        borderCSS = 'border: 0;';\n      } //creates the html code for the label based on the settings\n\n\n      nutritionLabel = '<div itemscope itemtype=\"http://schema.org/NutritionInformation\" class=\"nf\" role=\"region\" aria-label=\"nutrition label\" style=\"' + borderCSS;\n\n      if (!$this.settings.allowCustomWidth) {\n        nutritionLabel += ' width: ' + $this.settings.width + 'px;\">\\n';\n      } else {\n        nutritionLabel += ' width: ' + $this.settings.widthCustom + ';\">\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"nf-title\" tabindex=\"0\">' + $this.settings.textNutritionFacts + '</div>\\n';\n      showLineDiv = $this.settings.showItemName || !$this.settings.showItemName && servingSizeIsHidden && servingContainerIsHidden || !$this.settings.showItemName && $this.settings.originalServingUnitQuantity > 0 && $this.settings.showServingWeightGrams && $this.settings.valueServingWeightGrams > 0 || $this.settings.showServingUnitQuantity && $this.settings.originalServingUnitQuantity > 0 && $this.settings.showServingsPerContainer && $this.settings.valueServingPerContainer > 0;\n\n      if (showLineDiv) {\n        nutritionLabel += globalTab1 + '<div class=\"nf-line\">\\n';\n      }\n\n      if ($this.settings.showServingUnitQuantity && $this.settings.originalServingUnitQuantity > 0 && $this.settings.showServingsPerContainer && $this.settings.valueServingPerContainer > 0) {\n        nutritionLabel += globalTab2 + '<div class=\"nf-per-container\" tabindex=\"0\">\\n';\n        nutritionLabel += globalTab3 + roundLoDash($this.settings.valueServingPerContainer, $this.settings.decimalPlacesForNutrition);\n        nutritionLabel += ' ' + $this.settings.textServingsPerContainer + '\\n';\n        nutritionLabel += globalTab2 + '</div>\\n\\n';\n      }\n\n      nutritionLabel += globalTab2 + '<div class=\"nf-serving\">\\n';\n      nutritionLabel += sevingUnitQuantityHtml2018Result.nutritionLabel;\n\n      if ($this.settings.showItemName) {\n        nutritionLabel += itemNameHtml2018($this.settings);\n      }\n\n      nutritionLabel += globalTab2 + '</div><!-- end of class=\"nf-serving\" -->\\n\\n';\n\n      if (showLineDiv) {\n        nutritionLabel += globalTab1 + '</div><!-- end of class=\"nf-line\" -->\\n\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"nf-bar2\"></div>\\n';\n      nutritionLabel += globalTab1 + '<div class=\"nf-amount-per-serving\" tabindex=\"0\">' + $this.settings.textAmountPerServing + '</div>\\n';\n\n      if ($this.settings.showCalories) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue topDivClass   showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\n        $this.settings, 'valueCalories', 'unitCalories', 'naCalories', 'textCalories', 'calories', 'nf-calories', false, 'roundCalories', '', '', 'nf-pr', '');\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"nf-bar1\"></div>\\n';\n\n      if (!$this.settings.hidePercentDailyValues) {\n        nutritionLabel += globalTab1 + '<div class=\"nf-line nf-text-right\">\\n';\n        nutritionLabel += globalTab2 + '<span class=\"nf-highlight nf-percent-dv\">% ' + $this.settings.textDailyValues + '*</span>\\n';\n        nutritionLabel += globalTab1 + '</div>\\n';\n      }\n\n      if ($this.settings.showTotalFat) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue topDivClass showPercentageCode                 roundFunctionName roundFunctionRuleName labelClass     valueClass dailyValueIndex\n        $this.settings, 'valueTotalFat', 'unitTotalFat', 'naTotalFat', 'textTotalFat', 'fatContent', 'nf-line', $this.settings.showDailyTotalFat, 'roundFat', 'roundFatRule', 'nf-highlight', '', 'dailyValueTotalFat');\n      }\n\n      if ($this.settings.showSatFat) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue          topDivClass         showPercentageCode               roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\n        $this.settings, 'valueSatFat', 'unitSatFat', 'naSatFat', 'textSatFat', 'saturatedFatContent', 'nf-line nf-indent', $this.settings.showDailySatFat, 'roundFat', 'roundFatRule', '', '', 'dailyValueSatFat');\n      }\n\n      if ($this.settings.showTransFat) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue      topDivClass         showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\n        $this.settings, 'valueTransFat', 'unitTransFat', 'naTransFat', 'textTransFat', 'transFatContent', 'nf-line nf-indent', false, 'roundFat', '', '', '', '');\n      }\n\n      if ($this.settings.showPolyFat) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex      unitIndex      naIndex      attributeText itemPropValue topDivClass         showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\n        $this.settings, 'valuePolyFat', 'unitPolyFat', 'naPolyFat', 'textPolyFat', '', 'nf-line nf-indent', false, 'roundFat', '', '', '', '');\n      }\n\n      if ($this.settings.showMonoFat) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex      unitIndex      naIndex      attributeText itemPropValue topDivClass         showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\n        $this.settings, 'valueMonoFat', 'unitMonoFat', 'naMonoFat', 'textMonoFat', '', 'nf-line nf-indent', false, 'roundFat', '', '', '', '');\n      }\n\n      if ($this.settings.showCholesterol) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex          unitIndex          naIndex          attributeText      itemPropValue         topDivClass showPercentageCode                    roundFunctionName   roundFunctionRuleName   labelClass     valueClass dailyValueIndex\n        $this.settings, 'valueCholesterol', 'unitCholesterol', 'naCholesterol', 'textCholesterol', 'cholesterolContent', 'nf-line', $this.settings.showDailyCholesterol, 'roundCholesterol', 'roundCholesterolRule', 'nf-highlight', '', 'dailyValueCholesterol');\n      }\n\n      if ($this.settings.showSodium) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue    topDivClass showPercentageCode               roundFunctionName roundFunctionRuleName labelClass     valueClass dailyValueIndex\n        $this.settings, 'valueSodium', 'unitSodium', 'naSodium', 'textSodium', 'sodiumContent', 'nf-line', $this.settings.showDailySodium, 'roundSodium', 'roundSodiumRule', 'nf-highlight', '', 'dailyValueSodium');\n      }\n\n      if ($this.settings.showTotalCarb) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex        unitIndex        naIndex        attributeText    itemPropValue          topDivClass showPercentageCode                  roundFunctionName             roundFunctionRuleName            labelClass      valueClass dailyValueIndex\n        $this.settings, 'valueTotalCarb', 'unitTotalCarb', 'naTotalCarb', 'textTotalCarb', 'carbohydrateContent', 'nf-line', $this.settings.showDailyTotalCarb, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', 'nf-highlight', '', 'dailyValueCarb');\n      }\n\n      if ($this.settings.showFibers) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue   topDivClass         showPercentageCode               roundFunctionName             roundFunctionRuleName            labelClass valueClass dailyValueIndex\n        $this.settings, 'valueFibers', 'unitFibers', 'naFibers', 'textFibers', 'fiberContent', 'nf-line nf-indent', $this.settings.showDailyFibers, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', '', '', 'dailyValueFiber');\n      }\n\n      if ($this.settings.showSugars) {\n        if (!$this.settings.indentSugarAndRemoveBoldStyleFor2018Label) {\n          nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue   topDivClass showPercentageCode               roundFunctionName             roundFunctionRuleName             labelClass     valueClass dailyValueIndex\n          $this.settings, 'valueSugars', 'unitSugars', 'naSugars', 'textSugars', 'sugarContent', 'nf-line', $this.settings.showDailySugars, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', 'nf-highlight', '', 'dailyValueSugar');\n        } else {\n          nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue   topDivClass         showPercentageCode               roundFunctionName             roundFunctionRuleName            labelClass valueClass dailyValueIndex\n          $this.settings, 'valueSugars', 'unitSugars', 'naSugars', 'textSugars', 'sugarContent', 'nf-line nf-indent', $this.settings.showDailySugars, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', '', '', 'dailyValueSugar');\n        }\n      }\n\n      if ($this.settings.showAddedSugars) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex          unitIndex          naIndex          attributeText      itemPropValue topDivClass          showPercentageCode                    roundFunctionName             roundFunctionRuleName            labelClass valueClass dailyValueIndex\n        $this.settings, 'valueAddedSugars', 'unitAddedSugars', 'naAddedSugars', 'textAddedSugars1', '', 'nf-line nf-indent2', $this.settings.showDailyAddedSugars, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', '', '', 'dailyValueAddedSugar');\n      }\n\n      if ($this.settings.showSugarAlcohol) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex           unitIndex           naIndex           attributeText       itemPropValue topDivClass         showPercentageCode roundFunctionName            roundFunctionRuleName labelClass valueClass dailyValueIndex\n        $this.settings, 'valueSugarAlcohol', 'unitSugarAlcohol', 'naSugarAlcohol', 'textSugarAlcohol', '', 'nf-line nf-indent', false, 'roundCarbFiberSugarProtein', '', '', '', '');\n      }\n\n      if ($this.settings.showProteins) {\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue     topDivClass showPercentageCode roundFunctionName            roundFunctionRuleName labelClass     valueClass dailyValueIndex\n        $this.settings, 'valueProteins', 'unitProteins', 'naProteins', 'textProteins', 'proteinContent', 'nf-line', false, 'roundCarbFiberSugarProtein', '', 'nf-highlight', '', '');\n      }\n\n      if ($this.settings.showVitaminD || $this.settings.showCalcium || $this.settings.showIron || $this.settings.showPotassium_2018) {\n        let lastRowNutrition = 'valueVitaminD';\n        let firstRowNutrition = 'valuePotassium_2018';\n        nutritionLabel += globalTab1 + '<div class=\"nf-bar2\"></div>\\n';\n        nutritionLabel += globalTab1 + '<div class=\"nf-vitamins\">\\n';\n        nutritionLabel += globalTab2 + '<div class=\"nf-vitamins\">\\n'; //check which one is the last row\n\n        if (!$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          if ($this.settings.showPotassium_2018) {\n            lastRowNutrition = 'valuePotassium_2018';\n          } else {\n            if ($this.settings.showIron) {\n              lastRowNutrition = 'valueIron';\n            } else if ($this.settings.showCalcium) {\n              lastRowNutrition = 'valueCalcium';\n            }\n          }\n        } //check which one is the first row\n\n\n        if ($this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          if ($this.settings.showVitaminD) {\n            firstRowNutrition = 'valueVitaminD';\n          } else {\n            if ($this.settings.showCalcium) {\n              firstRowNutrition = 'valueCalcium';\n            } else if ($this.settings.showIron) {\n              firstRowNutrition = 'valueIron';\n            }\n          }\n        }\n\n        if ($this.settings.showVitaminD && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage( //$localSettings valueIndex       dailyValueIndex       unitIndex_base       unitIndex_percent       naIndex       attributeTexts showPercentageCode                lastRow\n          $this.settings, 'valueVitaminD', 'dailyValueVitaminD', 'unitVitaminD_base', 'unitVitaminD_percent', 'naVitaminD', 'textVitaminD', $this.settings.showDailyVitaminD, lastRowNutrition == 'valueVitaminD');\n        } else if ($this.settings.showVitaminD && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex       unitIndex            naIndex       attributeText   itemPropValue     topDivClass                                            showPercentageCode                 roundFunctionName                roundFunctionRuleName               labelClass valueClass dailyValueIndex\n          $this.settings, 'valueVitaminD', 'unitVitaminD_base', 'naVitaminD', 'textVitaminD', 'vitaminDContent', firstRowNutrition == 'valueVitaminD' ? '' : 'nf-line', $this.settings.showDailyVitaminD, 'roundFor2018LabelVitaminDIron', 'roundFor2018LabelVitaminDIronRule', '', '', 'dailyValueVitaminD');\n        }\n\n        if ($this.settings.showCalcium && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage( //$localSettings valueIndex      dailyValueIndex      unitIndex_base      unitIndex_percent      naIndex      attributeTexts showPercentageCode               lastRow\n          $this.settings, 'valueCalcium', 'dailyValueCalcium', 'unitCalcium_base', 'unitCalcium_percent', 'naCalcium', 'textCalcium', $this.settings.showDailyCalcium, lastRowNutrition == 'valueCalcium');\n        } else if ($this.settings.showCalcium && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex      unitIndex            naIndex     attributeText  itemPropValue    topDivClass                                           showPercentageCode                roundFunctionName                    roundFunctionRuleName                   labelClass valueClass dailyValueIndex\n          $this.settings, 'valueCalcium', 'unitCalcium_base', 'naCalcium', 'textCalcium', 'calciumContent', firstRowNutrition == 'valueCalcium' ? '' : 'nf-line', $this.settings.showDailyCalcium, 'roundFor2018LabelCalciumPotassium', 'roundFor2018LabelCalciumPotassiumRule', '', '', 'dailyValueCalcium');\n        }\n\n        if ($this.settings.showIron && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage( //$localSettings valueIndex    dailyValueIndex  unitIndex_base   unitIndex_percent   naIndex   attributeTexts showPercentageCode            lastRow\n          $this.settings, 'valueIron', 'dailyValueIron', 'unitIron_base', 'unitIron_percent', 'naIron', 'textIron', $this.settings.showDailyIron, lastRowNutrition == 'valueIron');\n        } else if ($this.settings.showIron && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex   unitIndex        naIndex   attributeText itemPropValue topDivClass                                          showPercentageCode             roundFunctionName                roundFunctionRuleName               labelClass valueClass dailyValueIndex\n          $this.settings, 'valueIron', 'unitIron_base', 'naIron', 'textIron', 'ironContent', firstRowNutrition == 'valueIron' ? '' : 'nf-line', $this.settings.showDailyIron, 'roundFor2018LabelVitaminDIron', 'roundFor2018LabelVitaminDIronRule', '', '', 'dailyValueIron');\n        }\n\n        if ($this.settings.showPotassium_2018 && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage( //$localSettings valueIndex             dailyValueIndex             unitIndex_base        unitIndex_percent        naIndex             attributeTexts  showPercentageCode                      lastRow\n          $this.settings, 'valuePotassium_2018', 'dailyValuePotassium_2018', 'unitPotassium_base', 'unitPotassium_percent', 'naPotassium_2018', 'textPotassium', $this.settings.showDailyPotassium_2018, lastRowNutrition == 'valuePotassium_2018');\n        } else if ($this.settings.showPotassium_2018 && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\n          nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex             unitIndex             naIndex             attributeText    itemPropValue      topDivClass                                                  showPercentageCode                       roundFunctionName                    roundFunctionRuleName                   labelClass valueClass dailyValueIndex\n          $this.settings, 'valuePotassium_2018', 'unitPotassium_base', 'naPotassium_2018', 'textPotassium', 'potassiumContent', firstRowNutrition == 'valuePotassium_2018' ? '' : 'nf-line', $this.settings.showDailyPotassium_2018, 'roundFor2018LabelCalciumPotassium', 'roundFor2018LabelCalciumPotassiumRule', '', '', 'dailyValuePotassium_2018');\n        }\n\n        nutritionLabel += globalTab2 + '</div>\\n';\n        nutritionLabel += globalTab1 + '</div>\\n';\n      } //end of => if ($this.settings.showVitaminD || $this.settings.showCalcium || $this.settings.showIron || $this.settings.showPotassium_2018)\n\n\n      nutritionLabel += globalTab1 + '<div class=\"nf-bar2\"></div>\\n';\n\n      if ($this.settings.showCaffeine) {\n        let labelClassCaffeine = 'nf-highlight';\n\n        if (!$this.settings.boldCaffeine) {\n          labelClassCaffeine = '';\n        }\n\n        nutritionLabel += generateAttributeHtml2018Version( //$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue     topDivClass showPercentageCode roundFunctionName roundFunctionRuleName labelClass          valueClass dailyValueIndex\n        $this.settings, 'valueCaffeine', 'unitCaffeine', 'naCaffeine', 'textCaffeine', 'caffeineContent', '', false, 'roundCaffeine', '', labelClassCaffeine, '', '');\n        nutritionLabel += globalTab1 + '<div class=\"nf-bar1\"></div>\\n';\n        nutritionLabel += globalTab1 + '<div class=\"nf-vitamins\">\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"' + ($this.settings.hidePercentDailyValues ? 'nf-footnoteHiddenDailyValues' : 'nf-footnote') + '\">\\n';\n\n      if (!$this.settings.hidePercentDailyValues) {\n        nutritionLabel += globalTab2 + '<span tabIndex=\"0\">' + $this.settings.textPercentDaily2018VersionPart1;\n        nutritionLabel += $this.settings.calorieIntake;\n        nutritionLabel += $this.settings.textPercentDaily2018VersionPart2 + '</span>\\n';\n      }\n\n      if ($this.settings.showIngredients) {\n        nutritionLabel += ingredientsHtml2018Version($this.settings);\n      }\n\n      if ($this.settings.showDisclaimer) {\n        nutritionLabel += disclaimerHtml2018Version($this.settings);\n      }\n\n      nutritionLabel += globalTab1 + '</div>\\n';\n\n      if ($this.settings.showBottomLink) {\n        nutritionLabel += bottomLinkHtml2018Version($this.settings);\n      }\n\n      if ($this.settings.showCustomFooter) {\n        nutritionLabel += globalTab1 + '<div class=\"nf-customFooter\" tabindex=\"0\">' + $this.settings.valueCustomFooter + '</div>\\n';\n      } //returns the html for the nutrition label\n\n\n      return nutritionLabel += '<div class=\"naTooltip\">' + $this.settings.textDataNotAvailable + '</div>\\n</div><!-- closing class=\"nf\" -->\\n';\n    },\n    //end of => generate2018: function()\n    generateUK: function () {\n      //this is the function that returns the html code for the nutrition label based on the settings that is supplied by the user\n      let $this = this;\n      let borderCSS = '';\n      let nutritionLabel = ''; //return the plugin incase it has already been created\n\n      if ($this.nutritionLabel) {\n        return $this.nutritionLabel;\n      }\n\n      if ($this.settings.hideNotApplicableValues) {\n        $this.settings.showCalories = $this.settings.naCalories ? false : $this.settings.showCalories;\n        $this.settings.showTotalFat = $this.settings.naTotalFat ? false : $this.settings.showTotalFat;\n        $this.settings.showSatFat = $this.settings.naSatFat ? false : $this.settings.showSatFat;\n        $this.settings.showTotalCarb = $this.settings.naTotalCarb ? false : $this.settings.showTotalCarb;\n        $this.settings.showSugars = $this.settings.naSugars ? false : $this.settings.showSugars;\n        $this.settings.showFibers = $this.settings.naFibers ? false : $this.settings.showFibers;\n        $this.settings.showProteins = $this.settings.naProteins ? false : $this.settings.showProteins;\n        $this.settings.showSodium = $this.settings.naSodium ? false : $this.settings.showSodium;\n      } //the uk label requires a non zero serving weight value for the computations to work properly\n      //so i am setting the values to be \"not applicable\" if the serving weight value is not valid\n\n\n      if ($this.settings.valueServingWeightGrams <= 0) {\n        $this.settings.naCalories = true;\n        $this.settings.naTotalFat = true;\n        $this.settings.naSatFat = true;\n        $this.settings.naTotalCarb = true;\n        $this.settings.naSugars = true;\n        $this.settings.naFibers = true;\n        $this.settings.naProteins = true;\n        $this.settings.naSodium = true;\n      }\n\n      if ($this.settings.allowNoBorder) {\n        borderCSS = 'border: 0;';\n      } //creates the html code for the label based on the settings\n\n\n      nutritionLabel = '<div itemscope itemtype=\"http://schema.org/NutritionInformation\" role=\"region\" aria-label=\"nutrition label\" class=\"uk_nf uk\" style=\"' + borderCSS;\n\n      if (!$this.settings.allowCustomWidth) {\n        nutritionLabel += ' width: ' + $this.settings.width + 'px;\">\\n';\n      } else {\n        nutritionLabel += ' width: ' + $this.settings.widthCustom + ';\">\\n';\n      }\n\n      nutritionLabel += globalTab1 + '<div class=\"uk_nf-title\" tabindex=\"0\">' + $this.settings.textNutritionFacts + '</div>\\n';\n\n      if ($this.settings.showItemNameForUK) {\n        nutritionLabel += globalTab1 + '<div class=\"uk_nf-item-name\" tabindex=\"0\">' + $this.settings.itemName + '</div>\\n';\n      } //for the uk label, If the serving name is empty, have it default to \"Serving\" ($this.settings.textUKDefaultServingNameIfEmpty)\n\n\n      if ($this.settings.convertEmptyServingNametoServingForUKLabel && String($this.settings.valueServingSizeUnit) === '') {\n        $this.settings.valueServingSizeUnit = $this.settings.textUKDefaultServingNameIfEmpty;\n      }\n\n      nutritionLabel += globalTab1 + '<table>\\n';\n      nutritionLabel += globalTab2 + '<thead>\\n';\n      nutritionLabel += globalTab3 + '<tr>\\n';\n      nutritionLabel += globalTab4 + '<th>' + $this.settings.textUKTypicalValues + '</th>\\n';\n      nutritionLabel += globalTab4 + '<th>' + $this.settings.textUKPer100 + ' 100' + $this.settings.unitGramOrMlForThePer100Part + '</th>\\n';\n      nutritionLabel += globalTab4 + '<th>';\n\n      if ($this.settings.showServingUnitQuantityTextbox) {\n        if (!$this.settings.hideTextboxArrows) {\n          nutritionLabel += globalTab5 + '<div class=\"setter\">\\n';\n          nutritionLabel += globalTab6 + '<a href=\"' + $this.settings.textAriaLabelIncreaseQuantityArrow + '\" class=\"uk_nf-unitQuantityUp\" ';\n          nutritionLabel += 'aria-label=\"' + $this.settings.textAriaLabelIncreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\n          nutritionLabel += globalTab6 + '<a href=\"' + $this.settings.textAriaLabelDecreaseQuantityArrow + '\" class=\"uk_nf-unitQuantityDown\" ';\n          nutritionLabel += 'aria-label=\"' + $this.settings.textAriaLabelDecreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\n          nutritionLabel += globalTab5 + '</div><!-- closing class=\"setter\" -->\\n\\n';\n        }\n\n        nutritionLabel += globalTab5 + '<input type=\"text\" data-role=\"none\" value=\"' + roundLoDash($this.settings.valueServingUnitQuantity, this.settings.decimalPlacesForQuantityTextbox) + '\" ';\n        nutritionLabel += 'class=\"uk_nf-unitQuantityBox uk_nf-modifier-field\" aria-label=\"' + this.settings.textAriaLabelChangeQuantityTextbox + '\">\\n';\n        nutritionLabel += globalTab5 + '<input type=\"hidden\" value=\"' + roundLoDash(this.settings.valueServingUnitQuantity, this.settings.decimalPlacesForQuantityTextbox) + '\" id=\"uk_nf-nixLabelBeforeQuantity\">\\n\\n';\n      } else {\n        nutritionLabel += globalTab5 + $this.settings.valueServingUnitQuantity;\n      }\n\n      nutritionLabel += globalTab5 + '<span class=\"uk_nf-servingUnit\">' + $this.settings.valueServingSizeUnit;\n      nutritionLabel += ' (' + roundLoDash($this.settings.valueServingWeightGrams) + $this.settings.unitGramOrMlForThePer100Part + ')</span>\\n';\n      nutritionLabel += '</th>\\n';\n      nutritionLabel += globalTab4 + '<th>%*(' + roundLoDash($this.settings.valueServingWeightGrams) + $this.settings.unitGramOrMlForThePer100Part + ')</th>\\n';\n      nutritionLabel += globalTab3 + '</tr>\\n';\n      nutritionLabel += globalTab2 + '</thead>\\n';\n      nutritionLabel += globalTab1 + '<tbody>\\n';\n\n      if ($this.settings.showCalories) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex       dailyValueIndex unitIndex        naIndex       attributeTexts itemPropValue roundFunctionName    roundFunctionRuleName showPercentageCode indentedName\n        $this.settings, 'valueCalories', '', 'unitEnergy_kj', 'naCalories', 'textCalories', '', 'roundToNearestNum', 'roundToNearestNum', false, false);\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex       dailyValueIndex         unitIndex          naIndex      attributeTexts itemPropValue roundFunctionName    roundFunctionRuleName showPercentageCode              indentedName\n        $this.settings, 'valueCalories', 'dailyValueEnergyKcal', 'unitEnergy_kcal', 'naCalories', '', '', 'roundToNearestNum', 'roundToNearestNum', $this.settings.showDailyEnergy, false);\n      }\n\n      if ($this.settings.showTotalFat) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex       dailyValueIndex       unitIndex       naIndex       attributeTexts  itemPropValue roundFunctionName                                roundFunctionRuleName                               showPercentageCode                indentedName\n        $this.settings, 'valueTotalFat', 'dailyValueTotalFat', 'unitTotalFat', 'naTotalFat', 'textTotalFat', 'fatContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailyTotalFat, false);\n      }\n\n      if ($this.settings.showSatFat) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex     dailyValueIndex     unitIndex     naIndex     attributeTexts itemPropValue          roundFunctionName        roundFunctionRuleName       showPercentageCode              indentedName\n        $this.settings, 'valueSatFat', 'dailyValueSatFat', 'unitSatFat', 'naSatFat', 'textSatFat', 'saturatedFatContent', 'roundForUKLabelSatFat', 'roundForUKLabelSatFatRule', $this.settings.showDailySatFat, true);\n      }\n\n      if ($this.settings.showTotalCarb) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex        dailyValueIndex   unitIndex        naIndex        attributeTexts   itemPropValue          roundFunctionName                                roundFunctionRuleName                               showPercentageCode                 indentedName\n        $this.settings, 'valueTotalCarb', 'dailyValueCarb', 'unitTotalCarb', 'naTotalCarb', 'textTotalCarb', 'carbohydrateContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailyTotalCarb, false);\n      }\n\n      if ($this.settings.showSugars) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex     dailyValueIndex    unitIndex     naIndex     attributeTexts itemPropValue   roundFunctionName                                roundFunctionRuleName                               showPercentageCode             indentedName\n        $this.settings, 'valueSugars', 'dailyValueSugar', 'unitSugars', 'naSugars', 'textSugars', 'sugarContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailySugars, true);\n      }\n\n      if ($this.settings.showFibers) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex     dailyValueIndex unitIndex     naIndex     attributeTexts itemPropValue   roundFunctionName                                roundFunctionRuleName                               showPercentageCode indentedName\n        $this.settings, 'valueFibers', '', 'unitFibers', 'naFibers', 'textFibers', 'fiberContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', false, false);\n      }\n\n      if ($this.settings.showProteins) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex       dailyValueIndex      unitIndex       naIndex       attributeTexts  itemPropValue     roundFunctionName                                roundFunctionRuleName                               showPercentageCode               indentedName\n        $this.settings, 'valueProteins', 'dailyValueProtein', 'unitProteins', 'naProteins', 'textProteins', 'proteinContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailyProtein, false);\n      }\n\n      if ($this.settings.showSodium) {\n        nutritionLabel += generateAttributeForUK( //$localSettings valueIndex     dailyValueIndex   unitIndex   naIndex     attributeTexts itemPropValue    roundFunctionName      roundFunctionRuleName     showPercentageCode             indentedName\n        $this.settings, 'valueSodium', 'dailyValueSalt', 'unitSalt', 'naSodium', 'textSodium', 'sodiumContent', 'roundForUKLabelSalt', 'roundForUKLabelSaltRule', $this.settings.showDailySodium, false);\n      }\n\n      nutritionLabel += globalTab2 + '</tbody>\\n';\n      nutritionLabel += globalTab2 + '<tfoot>\\n';\n      nutritionLabel += globalTab3 + '<tr>\\n';\n      nutritionLabel += globalTab4 + '<td colspan=\"4\">\\n';\n      nutritionLabel += globalTab5 + '<div class=\"uk_nf-footnote\">\\n';\n      nutritionLabel += referenceIntakeHtmlUKVersion($this.settings);\n\n      if ($this.settings.showIngredients) {\n        nutritionLabel += ingredientsHtmlUKVersion($this.settings);\n      }\n\n      if ($this.settings.showDisclaimer) {\n        nutritionLabel += disclaimerHtmlUKVersion($this.settings);\n      }\n\n      if ($this.settings.showBottomLink) {\n        nutritionLabel += bottomLinkHtmlUKVersion($this.settings);\n      }\n\n      if ($this.settings.showCustomFooter) {\n        nutritionLabel += globalTab6 + '<div class=\"uk_nf-customFooter\" tabindex=\"0\">\\n' + globalTab7 + $this.settings.valueCustomFooter + '\\n' + globalTab6 + '</div>\\n';\n      }\n\n      nutritionLabel += globalTab5 + '</div>\\n';\n      nutritionLabel += globalTab4 + '</td>\\n';\n      nutritionLabel += globalTab3 + '</tr>\\n';\n      nutritionLabel += globalTab2 + '</tfoot>\\n';\n      nutritionLabel += globalTab1 + '</table>\\n'; //returns the html for the nutrition label\n\n      return nutritionLabel += '<div class=\"naTooltip\">' + $this.settings.textDataNotAvailable + '</div>\\n</div><!-- closing class=\"uk_nf\" -->\\n';\n    } //end of => generateUK: function()\n\n  }; //end of => NutritionLabel.prototype\n})(jQuery);","map":{"version":3,"sources":["/Users/frankienguyen/Desktop/FLAT_IRON /LABS/Week_13/Project_4/Phase_4_Project/frontend/src/nutritionLabel.js"],"names":["$","x","tab","y","eval","fn","nutritionLabel","option","settings","init","NutritionLabel","destroy","hide","show","values","elements","each","data","defaultSettings","undefined","push","length","width","allowCustomWidth","widthCustom","allowNoBorder","allowFDARounding","allowGoogleAnalyticsEventLog","gooleAnalyticsFunctionName","userFunctionNameOnQuantityChange","userFunctionOnQuantityChange","hideNotApplicableValues","hidePercentDailyValues","brandName","scrollLongIngredients","scrollHeightComparison","scrollHeightPixel","decimalPlacesForNutrition","decimalPlacesForDailyValues","decimalPlacesForQuantityTextbox","scrollLongItemName","scrollLongItemNamePixel","scrollLongItemNamePixel2018Override","useBaseValueFor2018LabelAndNotDVPercentage","showBottomLink","urlBottomLink","nameBottomLink","valueServingUnitQuantity","valueServingSizeUnit","showServingUnitQuantityTextbox","itemName","showServingUnitQuantity","hideTextboxArrows","showOnlyTheTextServingSize","originalServingUnitQuantity","nutritionValueMultiplier","totalContainerQuantity","calorieIntake","dailyValueTotalFat","dailyValueSatFat","dailyValueCholesterol","dailyValueSodium","dailyValuePotassium","dailyValuePotassium_2018","dailyValueCarb","dailyValueFiber","dailyValueCalcium","dailyValueIron","dailyValueVitaminD","dailyValueAddedSugar","dailyValueSugar","dailyValueEnergyKcal","dailyValueProtein","dailyValueSalt","showCalories","showFatCalories","showTotalFat","showSatFat","showTransFat","showPolyFat","showMonoFat","showCholesterol","showSodium","showPotassium","showPotassium_2018","showTotalCarb","showFibers","showSugars","showAddedSugars","showSugarAlcohol","showProteins","showVitaminA","showVitaminC","showVitaminD","showCalcium","showIron","showCaffeine","showServingWeightGrams","showDailyTotalFat","showDailySatFat","showDailyCholesterol","showDailySodium","showDailyPotassium","showDailyPotassium_2018","showDailyTotalCarb","showDailyFibers","showDailySugars","showDailyAddedSugars","showDailyVitaminD","showDailyCalcium","showDailyIron","showDailyProtein","showDailyEnergy","showAmountPerServing","showServingsPerContainer","showItemName","showItemNameForUK","showBrandName","showIngredients","showCalorieDiet","showCustomFooter","indentSugarAndRemoveBoldStyleFor2018Label","boldCaffeine","showDisclaimer","scrollDisclaimerHeightComparison","scrollDisclaimer","valueDisclaimer","ingredientLabel","valueCustomFooter","naCalories","naFatCalories","naTotalFat","naSatFat","naTransFat","naPolyFat","naMonoFat","naCholesterol","naSodium","naPotassium","naPotassium_2018","naTotalCarb","naFibers","naSugars","naAddedSugars","naSugarAlcohol","naProteins","naVitaminA","naVitaminC","naVitaminD","naCalcium","naIron","naCaffeine","valueServingWeightGrams","valueServingPerContainer","valueCalories","valueFatCalories","valueTotalFat","valueSatFat","valueTransFat","valuePolyFat","valueMonoFat","valueCholesterol","valueSodium","valuePotassium","valuePotassium_2018","valueTotalCarb","valueFibers","valueSugars","valueAddedSugars","valueSugarAlcohol","valueProteins","valueVitaminA","valueVitaminC","valueVitaminD","valueCalcium","valueIron","valueCaffeine","unitCalories","unitFatCalories","unitTotalFat","unitSatFat","unitTransFat","unitPolyFat","unitMonoFat","unitCholesterol","unitSodium","unitPotassium","unitPotassium_base","unitPotassium_percent","unitTotalCarb","unitFibers","unitSugars","unitAddedSugars","unitSugarAlcohol","unitProteins","unitVitaminA","unitVitaminC","unitVitaminD_base","unitVitaminD_percent","unitCalcium","unitCalcium_base","unitCalcium_percent","unitIron","unitIron_base","unitIron_percent","unitServingWeight","unitEnergy_kj","unitEnergy_kcal","unitSalt","unitGramOrMlForThePer100Part","unitCaffeine","valueCol1CalorieDiet","valueCol2CalorieDiet","valueCol1DietaryTotalFat","valueCol2DietaryTotalFat","valueCol1DietarySatFat","valueCol2DietarySatFat","valueCol1DietaryCholesterol","valueCol2DietaryCholesterol","valueCol1DietarySodium","valueCol2DietarySodium","valueCol1DietaryPotassium","valueCol2DietaryPotassium","valueCol1DietaryTotalCarb","valueCol2DietaryTotalCarb","valueCol1Dietary","valueCol2Dietary","textNutritionFacts","textDailyValues","textServingSize","textServingsPerContainer","textAmountPerServing","textCalories","textFatCalories","textTotalFat","textSatFat","textTransFat","textPolyFat","textMonoFat","textCholesterol","textSodium","textPotassium","textTotalCarb","textFibers","textSugars","textAddedSugars1","textAddedSugars2","textSugarAlcohol","textProteins","textVitaminA","textVitaminC","textVitaminD","textCalcium","textIron","textNotApplicable","ingredientList","textPercentDailyPart1","textPercentDailyPart2","textPercentDaily2018VersionPart1","textPercentDaily2018VersionPart2","textGoogleAnalyticsEventCategory","textGoogleAnalyticsEventActionUpArrow","textGoogleAnalyticsEventActionDownArrow","textGoogleAnalyticsEventActionTextbox","textUKTypicalValues","textUKReferenceIntake","textUKPer100","textUKDefaultServingNameIfEmpty","textDataNotAvailable","textAriaLabelIncreaseQuantityArrow","textAriaLabelDecreaseQuantityArrow","textAriaLabelChangeQuantityTextbox","textCalorieDietHtmlLegacyLessThan","textCalorieDietHtmlLegacyDietary","textCaffeine","showLegacyVersion","showUKVersion","convertEmptyServingNametoServingForUKLabel","legacyVersion","$elem","cleanSettings","numericIndex","index","value","jQuery","inArray","parseFloat","isNaN","updateNutritionValueWithMultiplier","nutritionIndex","$settings","extend","$originalCleanSettings","$updatedsettings","updateValuesAfterAQuantityChanged","attr","on","e","preventDefault","changeQuantityByArrow","updateTheSettingsAfterAnEvent","changeQuantityTextbox","keyCode","$localSettings","localSettings","$localSettingsHolder","addScrollToItemDiv","$localElem","localNameClass","forLegacyLabel","local_scrollLongItemNamePixel","parseInt","val","height","css","notApplicableHover","top","position","left","updateScrollingFeature","localIDToScroll","localScrollHeightComparison","localScrollHeight","$parentElement","parent","innerHeight","addClass","forInitialization","forUKLabel","ingredientListID","calcDisclaimerTextID","nameElementClass","html","generateLegacy","generateUK","generate2018","handleQuantityChange","source","previousValue","newValue","handler","window","$thisTextbox","nixLabelBeforeQuantityID","textBoxValue","regIsPosNumber","roundLoDash","$thisQuantity","changeValueBy","unitQuantityBoxClass","currentQuantity","find","beforeCurrentQuantityWasChanged","roundToNearestNum","input","nearest","Math","round","roundCalories","toRound","decimalPlace","roundCaloriesRule","roundFat","roundFatRule","roundSodium","roundSodiumRule","roundPotassium","roundPotassiumRule","roundCholesterol","normalVersion","roundResult","roundCholesterolRule","roundCarbFiberSugarProtein","roundCarbFiberSugarProteinRule","roundCaffeine","roundVitaminsCalciumIron","roundForUKLabelTotalFatCarbsSugarFiberProtein","roundForUKLabelTotalFatCarbsSugarFiberProteinRule","roundForUKLabelSatFat","roundForUKLabelSatFatRule","roundForUKLabelSalt","roundForUKLabelSaltRule","roundFor2018LabelVitaminDIron","roundFor2018LabelVitaminDIronRule","roundFor2018LabelCalciumPotassium","roundFor2018LabelCalciumPotassiumRule","fData","RegExp","test","itemNameHtmlLegacy","tabTemp","globalTab1","localNutritionLabel","itemNameClass","textboxClass","globalTab2","globalTab3","globalTab4","sevingUnitQuantityHtmlLegacy","localServingSizeIsHidden","localServingContainerIsHidden","unitAddedClass","gramsAddedClass","globalTab5","servingSizeIsHidden","servingContainerIsHidden","calorieDietHtmlLegacy","ingredientsHtmlLegacy","disclaimerHtmlLegacy","bottomLinkHtmlLegacy","generateAttributeWithoutPercentageHtmlLegacy","valueIndex","unitIndex","naIndex","attributeText","localTabValue","lineClass","attributeDisplayType","itemPropValue","localExtraTab","roundFunctionName","localNaValue","generateAttributeWithPercentageHtmlLegacy","dailyValueIndex","attributeTexts","roundFunctionRuleName","boldName","showPercentageCode","generateAttributeHtml2018Version","topDivClass","labelClass","valueClass","ingredientsHtml2018Version","disclaimerHtml2018Version","bottomLinkHtml2018Version","generate2018HtmlAndComputeValueGivenThePercentage","unitIndex_base","unitIndex_percent","lastRow","itemNameHtml2018","hideArrowsClass","sevingUnitQuantityHtml2018","servingSizeDivAlreadyClosed","globalTab6","generateAttributeForUK","indentedName","nameClass","nutritionValueLocal","String","referenceIntakeHtmlUKVersion","globalTab7","ingredientsHtmlUKVersion","disclaimerHtmlUKVersion","bottomLinkHtmlUKVersion","createRound","methodName","func","number","precision","min","max","pair","split","prototype","$this","borderCSS","sevingUnitQuantityHtmlLegacyResult","useLine","useLineAgain","showLineDiv","sevingUnitQuantityHtml2018Result","lastRowNutrition","firstRowNutrition","labelClassCaffeine"],"mappings":"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","sourcesContent":["/*\r\n ***************************************************************************************************************************************************+\r\n * NUTRITIONIX.com                                                                                                                                  |\r\n *                                                                                                                                                  |\r\n * This plugin allows you to create a fully customizable nutrition label                                                                            |\r\n *                                                                                                                                                  |\r\n * @authors             Leo Joseph Gajitos <leejay22@gmail.com>, Rommel Malang <genesis23rd@gmail.com> and Yurko Fedoriv <yurko.fedoriv@gmail.com>  |\r\n * @copyright           Copyright (c) 2017 Nutritionix.                                                                                             |\r\n * @license             This Nutritionix jQuery Nutrition Label is dual licensed under the MIT and GPL licenses.                                    |\r\n * @link                http://www.nutritionix.com                                                                                                  |\r\n * @github              http://github.com/nutritionix/nutrition-label                                                                               |\r\n * @current version     11.0.4                                                                                                                      |\r\n * @stable version      11.0.2                                                                                                                      |\r\n * @supported browser   Firefox, Chrome, IE8+                                                                                                       |\r\n * @description         To be able to create a FDA-style nutrition label with any nutrition data source                                             |\r\n *                                                                                                                                                  |\r\n ***************************************************************************************************************************************************+\r\n*/\r\n\r\n\r\n//these variables are declared using eval\r\n/*global globalTab1, globalTab2, globalTab3, globalTab4, globalTab5, globalTab6, globalTab7 */\r\n\r\n\r\n;(function($) { // eslint-disable-line no-extra-semi\r\n\t//initializing the global tab variables (for debugging and editing purposes)\r\n\t//global tab variables are used to make the printing of the html code readable when you copy the code using firebug => inspect => copy innerhtml\r\n\tfor (let x = 1; x < 8; x++) {\r\n\t\tlet tab = '';\r\n\t\tfor (let y = 1; y <= x; y++) {\r\n\t\t\ttab += '\\t';\r\n\t\t}\r\n\t\teval('var globalTab' + x + ' = \"' + tab + '\";');\r\n\t}\r\n\r\n\r\n\t$.fn.nutritionLabel = function(option, settings) {\r\n\t\tif (typeof option === 'object') {\r\n\t\t\tsettings = option;\r\n\t\t\tinit(settings, $(this));\r\n\t\t} else if (typeof option === 'string' && option !== '') {\r\n\t\t\t//destroy the nutrition label's html code\r\n\t\t\tif (option === 'destroy') {\r\n\t\t\t\tnew NutritionLabel().destroy($(this));\r\n\t\t\t//allows the user to hide the nutrition value\r\n\t\t\t} else if (option === 'hide') {\r\n\t\t\t\tnew NutritionLabel().hide($(this));\r\n\t\t\t//allows the user to show the nutrition value\r\n\t\t\t} else if (option === 'show') {\r\n\t\t\t\tnew NutritionLabel().show($(this));\r\n\t\t\t} else {\r\n\t\t\t\tlet values = [];\r\n\r\n\t\t\t\tlet elements = this.each(function() {\r\n\t\t\t\t\tlet data = $(this).data('_nutritionLabel');\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tif ($.fn.nutritionLabel.defaultSettings[option] !== undefined) {\r\n\t\t\t\t\t\t\tif (settings !== undefined) {\r\n\t\t\t\t\t\t\t\t//set the option and create the nutrition label\r\n\t\t\t\t\t\t\t\tdata.settings[option] = settings;\r\n\t\t\t\t\t\t\t\tinit(data.settings, $(this));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//return the value of a setting - can only be used after the label is created / initiated\r\n\t\t\t\t\t\t\t\tvalues.push(data.settings[option]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if ($.fn.nutritionLabel.defaultSettings[option] !== undefined) {\r\n\t\t\t\t\t\t//set the option and create the nutrition label\r\n\t\t\t\t\t\t//this is a special case so the single value setting will still work even if the label hasn't been initiated yet\r\n\t\t\t\t\t\tif (settings !== undefined) {\r\n\t\t\t\t\t\t\t$.fn.nutritionLabel.defaultSettings[option] = settings;\r\n\t\t\t\t\t\t\tinit(null, $(this));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//return the value of a setting\r\n\t\t\t\tif (values.length === 1) {\r\n\t\t\t\t\treturn values[0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//return the setting values or the elements\r\n\t\t\t\treturn values.length > 0 ? values : elements;\r\n\t\t\t}\r\n\t\t//end of => else if (typeof option === 'string' && option !== '')\r\n\t\t} else if (typeof option === 'undefined' || option === '') {\r\n\t\t\t//if no value / option is supplied, simply create the label using the default values\r\n\t\t\tinit(settings, $(this));\r\n\t\t}\r\n\t};//end of => $.fn.nutritionLabel = function(option, settings)\r\n\r\n\r\n\t$.fn.nutritionLabel.defaultSettings = {\r\n\t\t//default fixedWidth of the nutrition label\r\n\t\twidth: 280,\r\n\r\n\t\t//to allow custom width - usually needed for mobile sites\r\n\t\tallowCustomWidth: false,\r\n\t\twidthCustom: 'auto',\r\n\r\n\t\t//to allow the label to have no border\r\n\t\tallowNoBorder: false,\r\n\r\n\t\t//to enable rounding of the nutritional values based on the FDA rounding rules http://goo.gl/RMD2O\r\n\t\tallowFDARounding: false,\r\n\r\n\t\t//to enabled the google analytics event logging\r\n\t\tallowGoogleAnalyticsEventLog: false,\r\n\t\tgooleAnalyticsFunctionName: 'ga',\r\n\r\n\t\t//enable triggering of user function on quantity change: global function name\r\n\t\tuserFunctionNameOnQuantityChange: null,\r\n\t\t//enable triggering of user function on quantity change: handler instance\r\n\t\tuserFunctionOnQuantityChange: null,\r\n\r\n\t\t//when set to true, this will hide the values if they are not applicable\r\n\t\thideNotApplicableValues: false,\r\n\r\n\t\t//when set to true, this will hide all the percent daily values\r\n\t\thidePercentDailyValues: false,\r\n\r\n\t\t//the brand name of the item for this label (eg. just salad)\r\n\t\tbrandName: 'Brand where this item belongs to',\r\n\t\t//to scroll the ingredients if the innerheight is > scrollHeightComparison\r\n\t\tscrollLongIngredients: false,\r\n\t\tscrollHeightComparison: 100,\r\n\t\t//the height in px of the ingredients div\r\n\t\tscrollHeightPixel: 95,\r\n\t\t//this is to set how many decimal places will be shown on the nutrition values (calories, fat, protein, vitamin a, iron, etc)\r\n\t\tdecimalPlacesForNutrition: 1,\r\n\t\t//this is to set how many decimal places will be shown for the \"% daily values*\"\r\n\t\tdecimalPlacesForDailyValues: 0,\r\n\t\t//this is to set how many decimal places will be shown for the serving unit quantity textbox\r\n\t\tdecimalPlacesForQuantityTextbox: 1,\r\n\r\n\t\t//to scroll the item name if the jQuery.height() is > scrollLongItemNamePixel\r\n\t\tscrollLongItemName: true,\r\n\t\tscrollLongItemNamePixel: 36,\r\n\t\t//this is needed to fix some issues on the 2018 label as the layout of the label is very different than the legacy one\r\n\t\tscrollLongItemNamePixel2018Override: 34,\r\n\r\n\t\t//this will only affect Vitamin D (valueVitaminD), Calcium (valueCalcium), Iron (valueIron) and Potassium (valuePotassium_2018).\r\n\t\t\t//this will tell the system to process these values as base values and not % Daily Values (default)\r\n\t\tuseBaseValueFor2018LabelAndNotDVPercentage: false, //this is for the 2018 version\r\n\r\n\t\t//show the customizable link at the bottom\r\n\t\tshowBottomLink: false,\r\n\t\t//url for the customizable link at the bottom\r\n\t\turlBottomLink: 'http://www.nutritionix.com',\r\n\t\t//link name for the customizable link at the bottom\r\n\t\tnameBottomLink: 'Nutritionix',\r\n\r\n\t\t//this value can be changed and the value of the nutritions will be affected directly\r\n\t\t//the computation is \"current nutrition value\" * \"serving unit quantity value\" = \"final nutrition value\"\r\n\t\t//this can't be less than zero, all values less than zero is converted to zero\r\n\t\t//the textbox to change this value is visible / enabled by default\r\n\t\t//if the initial value of the serving size unit quantity is less than or equal to zero, it is converted to 1.0\r\n\t\t//when enabled, user can change this value by clicking the arrow or changing the value on the textbox and pressing enter.\r\n\t\t\t//the value on the label will be updated automatically\r\n\t\t//different scenarios and the result if this feature is enabled\r\n\t\t\t//NOTE 1: [ ] => means a textbox will be shown\r\n\t\t\t//NOTE 2: on all cases below showServingUnitQuantityTextbox == true AND showServingUnitQuantity == true\r\n\t\t\t\t\t//if showServingUnitQuantity == false, the values that should be on the 'serving size div' are empty or null\r\n\t\t\t//CASE 1a: valueServingSizeUnit != '' (AND NOT null) && valueServingUnitQuantity >= 0\r\n\t\t\t\t//RESULT: textServingSize [valueServingUnitQuantity] valueServingSizeUnit\r\n\r\n\t\t\t//NOTE 3: on all cases below showServingUnitQuantityTextbox == true AND showItemName == true\r\n\t\t\t\t\t//if showItemName == false, the values that should be on the 'item name div' are empty or null\r\n\t\t\t//CASE 1b: valueServingSizeUnit != '' (AND NOT null) && valueServingUnitQuantity <= 0\r\n\t\t\t\t//RESULT: [valueServingUnitQuantity default to 1.0] itemName\r\n\t\t\t//CASE 3a: valueServingSizeUnit == '' (OR null) && valueServingUnitQuantity > 0\r\n\t\t\t\t//RESULT: [valueServingUnitQuantity] itemName\r\n\t\t\t//CASE 3b: valueServingSizeUnit == '' (OR null) && valueServingUnitQuantity <= 0\r\n\t\t\t\t//RESULT: [valueServingUnitQuantity default to 1.0] itemName\r\n\r\n\t\t\t//NOTE 4: to see the different resulting labels, check the html/demo-texbox-case*.html files\r\n\t\tvalueServingUnitQuantity: 1.0,\r\n\t\tvalueServingSizeUnit: '',\r\n\t\tshowServingUnitQuantityTextbox: true,\r\n\t\t//the name of the item for this label (eg. cheese burger or mayonnaise)\r\n\t\titemName: 'Item / Ingredient Name',\r\n\t\tshowServingUnitQuantity: true,\r\n\t\t//allow hiding of the textbox arrows\r\n\t\thideTextboxArrows: false,\r\n\t\t//this is for the 2018 version and will only work when showServingUnitQuantity is false. see https://github.com/nutritionix/nutrition-label/issues/123\r\n\t\tshowOnlyTheTextServingSize: false,\r\n\r\n\t\t//these 2 settings are used internally.\r\n\t\t//this is just added here instead of a global variable to prevent a bug when there are multiple instances of the plugin like on the demo pages\r\n\t\toriginalServingUnitQuantity: 0,\r\n\t\t//this is used to fix the computation issue on the textbox\r\n\t\tnutritionValueMultiplier: 1,\r\n\t\t//this is used for the computation of the servings per container\r\n\t\ttotalContainerQuantity: 1,\r\n\r\n\t\t//default calorie intake\r\n\t\tcalorieIntake: 2000,\r\n\r\n\t\t//these are the recommended daily intake values\r\n\t\tdailyValueTotalFat: 65, //this should be 70 for the uk version\r\n\t\tdailyValueSatFat: 20,\r\n\t\tdailyValueCholesterol: 300,\r\n\t\tdailyValueSodium: 2400,\r\n\t\tdailyValuePotassium: 3500,\r\n\t\tdailyValuePotassium_2018: 4700, //this is for the 2018 version\r\n\t\tdailyValueCarb: 300, //this should be 260 for the uk version\r\n\t\tdailyValueFiber: 25,\r\n\t\tdailyValueCalcium: 1300, //this is for the 2018 version\r\n\t\tdailyValueIron: 18,\r\n\t\tdailyValueVitaminD: 20,\r\n\t\tdailyValueAddedSugar: 50,\r\n\t\tdailyValueSugar: 100, //this should be 90 for the uk version\r\n\t\tdailyValueEnergyKcal: 2000, //this is for the uk version\r\n\t\tdailyValueProtein: 50, //this is for the uk version\r\n\t\tdailyValueSalt: 6, //this is for the uk version\r\n\r\n\t\t//these values can be change to hide some nutrition values\r\n\t\tshowCalories: true,\r\n\t\tshowFatCalories: true,\r\n\t\tshowTotalFat: true,\r\n\t\tshowSatFat: true,\r\n\t\tshowTransFat: true,\r\n\t\tshowPolyFat: false,\r\n\t\tshowMonoFat: false,\r\n\t\tshowCholesterol: true,\r\n\t\tshowSodium: true,\r\n\t\tshowPotassium: false, //this is for the legacy version\r\n\t\tshowPotassium_2018: true, //this is for the 2018 version\r\n\t\tshowTotalCarb: true,\r\n\t\tshowFibers: true,\r\n\t\tshowSugars: true,\r\n\t\tshowAddedSugars: true,\r\n\t\tshowSugarAlcohol: false, //this is for the 2018 version\r\n\t\tshowProteins: true,\r\n\t\tshowVitaminA: true,\r\n\t\tshowVitaminC: true,\r\n\t\tshowVitaminD: true, //this is for the 2018 version\r\n\t\tshowCalcium: true, //this is for the 2018 version\r\n\t\tshowIron: true,\r\n\t\tshowCaffeine: true, //this is for the 2018 version\r\n\t\tshowServingWeightGrams: true,\r\n\r\n\t\t//these values can be change to hide some nutrition daily values\r\n\t\t\t//take note that the setting 'hidePercentDailyValues' override these values\r\n\t\tshowDailyTotalFat: true,\r\n\t\tshowDailySatFat: true,\r\n\t\tshowDailyCholesterol: true,\r\n\t\tshowDailySodium: true,\r\n\t\tshowDailyPotassium: true, //this is for the legacy version\r\n\t\tshowDailyPotassium_2018: true, //this is for the 2018 version\r\n\t\tshowDailyTotalCarb: true,\r\n\t\tshowDailyFibers: true,\r\n\t\tshowDailySugars: false,\r\n\t\tshowDailyAddedSugars: true, //this is for the 2018 version\r\n\t\tshowDailyVitaminD: true, //this is for the 2018 version\r\n\t\tshowDailyCalcium: true, //this is for the 2018 version\r\n\t\tshowDailyIron: true,\r\n\t\tshowDailyProtein: true, //this is for the uk version\r\n\t\tshowDailyEnergy: true, //this is for the uk version\r\n\r\n\t\t//to show the 'amount per serving' text\r\n\t\tshowAmountPerServing: true,\r\n\t\t//to show the 'servings per container' data and replace the default 'Serving Size' value (without unit and servings per container text and value)\r\n\t\tshowServingsPerContainer: false,\r\n\t\t//to show the item name. there are special cases where the item name is replaced with 'servings per container' value\r\n\t\tshowItemName: true,\r\n\t\t//to show the item name for the UK version. the main difference with the previous setting is this feature is set to false by default. the UK version will ignore the showItemName setting\r\n\t\tshowItemNameForUK: false,\r\n\t\t//show the brand where this item belongs to\r\n\t\tshowBrandName: false,\r\n\t\t//to show the ingredients value or not\r\n\t\tshowIngredients: true,\r\n\t\t//to show the calorie diet info at the bottom of the label\r\n\t\tshowCalorieDiet: false,\r\n\t\t//to show the customizable footer which can contain html and js codes\r\n\t\tshowCustomFooter: false,\r\n\t\t//see https://github.com/nutritionix/nutrition-label/issues/93 and then https://github.com/nutritionix/nutrition-label/issues/104\r\n\t\tindentSugarAndRemoveBoldStyleFor2018Label: true,\r\n\t\tboldCaffeine: true, //this is for the 2018 version\r\n\r\n\t\t//to show the disclaimer text or not\r\n\t\tshowDisclaimer: false,\r\n\t\t//the height in px of the disclaimer div\r\n\t\tscrollDisclaimerHeightComparison: 100,\r\n\t\tscrollDisclaimer: 95,\r\n\t\tvalueDisclaimer: 'Please note that these nutrition values are estimated based on our standard serving portions. ' +\r\n\t\t\t'As food servings may have a slight variance each time you visit, please expect these values to be with in 10% +/- of your actual meal. ' +\r\n\t\t\t'If you have any questions about our nutrition calculator, please contact Nutritionix.',\r\n\t\tingredientLabel: 'INGREDIENTS:',\r\n\t\tvalueCustomFooter: '',\r\n\r\n\t\t//the are to set some values as 'not applicable'. this means that the nutrition label will appear but the value will be a 'gray dash'\r\n\t\tnaCalories: false,\r\n\t\tnaFatCalories: false,\r\n\t\tnaTotalFat: false,\r\n\t\tnaSatFat: false,\r\n\t\tnaTransFat: false,\r\n\t\tnaPolyFat: false,\r\n\t\tnaMonoFat: false,\r\n\t\tnaCholesterol: false,\r\n\t\tnaSodium: false,\r\n\t\tnaPotassium: false, //this is for the legacy version\r\n\t\tnaPotassium_2018: false, //this is for the 2018 version\r\n\t\tnaTotalCarb: false,\r\n\t\tnaFibers: false,\r\n\t\tnaSugars: false,\r\n\t\tnaAddedSugars: false, //this is for the 2018 version\r\n\t\tnaSugarAlcohol: false,\r\n\t\tnaProteins: false,\r\n\t\tnaVitaminA: false,\r\n\t\tnaVitaminC: false,\r\n\t\tnaVitaminD: false, //this is for the 2018 version\r\n\t\tnaCalcium: false, //this is for the 2018 version\r\n\t\tnaIron: false,\r\n\t\tnaCaffeine: false, //this is for the 2018 version\r\n\r\n\t\t//these are the default values for the nutrition info\r\n\t\tvalueServingWeightGrams: 0,\r\n\t\tvalueServingPerContainer: 1,\r\n\t\tvalueCalories: 0,\r\n\t\tvalueFatCalories: 0,\r\n\t\tvalueTotalFat: 0,\r\n\t\tvalueSatFat: 0,\r\n\t\tvalueTransFat: 0,\r\n\t\tvaluePolyFat: 0,\r\n\t\tvalueMonoFat: 0,\r\n\t\tvalueCholesterol: 0,\r\n\t\tvalueSodium: 0,\r\n\t\tvaluePotassium: 0, //this is for the legacy version\r\n\t\tvaluePotassium_2018: 0, //this is for the 2018 version\r\n\t\tvalueTotalCarb: 0,\r\n\t\tvalueFibers: 0,\r\n\t\tvalueSugars: 0,\r\n\t\tvalueAddedSugars: 0, //this is for the 2018 version\r\n\t\tvalueSugarAlcohol: 0,\r\n\t\tvalueProteins: 0,\r\n\t\tvalueVitaminA: 0,\r\n\t\tvalueVitaminC: 0,\r\n\t\tvalueVitaminD: 0, //this is for the 2018 version\r\n\t\tvalueCalcium: 0, //this is for the 2018 version\r\n\t\tvalueIron: 0,\r\n\t\tvalueCaffeine: 0, //this is for the 2018 version\r\n\r\n\t\t//customizable units for the values\r\n\t\tunitCalories: '',\r\n\t\tunitFatCalories: '',\r\n\t\tunitTotalFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitSatFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitTransFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitPolyFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitMonoFat: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitCholesterol: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\r\n\t\tunitSodium: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>',\r\n\t\tunitPotassium: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>', //this is for the legacy version\r\n\t\tunitPotassium_base: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>', //this is for the 2018 version\r\n\t\tunitPotassium_percent: '%', //this is for the 2018 version\r\n\t\tunitTotalCarb: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitFibers: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitSugars: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitAddedSugars: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>', //this is for the 2018 version\r\n\t\tunitSugarAlcohol: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitProteins: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>',\r\n\t\tunitVitaminA: '%',\r\n\t\tunitVitaminC: '%',\r\n\t\tunitVitaminD_base: '<span aria-hidden=\"true\">mcg</span><span class=\"sr-only\"> micrograms</span>', //this is for the 2018 version\r\n\t\tunitVitaminD_percent: '%', //this is for the 2018 version\r\n\t\tunitCalcium: '%', //this is for the 2018 version\r\n\t\tunitCalcium_base: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>', //this is for the 2018 version\r\n\t\tunitCalcium_percent: '%', //this is for the 2018 version\r\n\t\tunitIron: '%',\r\n\t\tunitIron_base: '<span aria-hidden=\"true\">mg</span><span class=\"sr-only\"> milligrams</span>', //this is for the 2018 version\r\n\t\tunitIron_percent: '%', //this is for the 2018 version\r\n\t\tunitServingWeight: '<span aria-hidden=\"true\">g</span><span class=\"sr-only\"> grams</span>', //this is for the 2018 version\r\n\t\tunitEnergy_kj: 'kj', //this is for the uk version\r\n\t\tunitEnergy_kcal: 'kcal', //this is for the uk version\r\n\t\tunitSalt: 'g', //this is for the uk version\r\n\t\tunitGramOrMlForThePer100Part: 'g', //this is for the uk version\r\n\t\tunitCaffeine: 'mg', //this is for the 2018 version\r\n\r\n\t\t//these are the values for the optional calorie diet\r\n\t\tvalueCol1CalorieDiet: 2000,\r\n\t\tvalueCol2CalorieDiet: 2500,\r\n\t\tvalueCol1DietaryTotalFat: 0,\r\n\t\tvalueCol2DietaryTotalFat: 0,\r\n\t\tvalueCol1DietarySatFat: 0,\r\n\t\tvalueCol2DietarySatFat: 0,\r\n\t\tvalueCol1DietaryCholesterol: 0,\r\n\t\tvalueCol2DietaryCholesterol: 0,\r\n\t\tvalueCol1DietarySodium: 0,\r\n\t\tvalueCol2DietarySodium: 0,\r\n\t\tvalueCol1DietaryPotassium: 0,\r\n\t\tvalueCol2DietaryPotassium: 0,\r\n\t\tvalueCol1DietaryTotalCarb: 0,\r\n\t\tvalueCol2DietaryTotalCarb: 0,\r\n\t\tvalueCol1Dietary: 0,\r\n\t\tvalueCol2Dietary: 0,\r\n\r\n\t\t//these text settings is so you can create nutrition labels in different languages or to simply change them to your need\r\n\t\ttextNutritionFacts: 'Nutrition Facts',\r\n\t\ttextDailyValues: 'Daily Value',\r\n\t\ttextServingSize: 'Serving Size:',\r\n\t\ttextServingsPerContainer: 'Servings Per Container',\r\n\t\ttextAmountPerServing: 'Amount Per Serving',\r\n\t\ttextCalories: 'Calories',\r\n\t\ttextFatCalories: 'Calories from Fat',\r\n\t\ttextTotalFat: 'Total Fat',\r\n\t\ttextSatFat: 'Saturated Fat',\r\n\t\ttextTransFat: '<em>Trans</em> Fat',\r\n\t\ttextPolyFat: 'Polyunsaturated Fat',\r\n\t\ttextMonoFat: 'Monounsaturated Fat',\r\n\t\ttextCholesterol: 'Cholesterol',\r\n\t\ttextSodium: 'Sodium',\r\n\t\ttextPotassium: 'Potassium',\r\n\t\ttextTotalCarb: 'Total Carbohydrates',\r\n\t\ttextFibers: 'Dietary Fiber',\r\n\t\ttextSugars: 'Sugars',\r\n\t\ttextAddedSugars1: 'Includes ',\r\n\t\ttextAddedSugars2: ' Added Sugars', //this is for the 2018 version\r\n\t\ttextSugarAlcohol: 'Sugar Alcohol',\r\n\t\ttextProteins: 'Protein',\r\n\t\ttextVitaminA: 'Vitamin A',\r\n\t\ttextVitaminC: 'Vitamin C',\r\n\t\ttextVitaminD: 'Vitamin D', //this is for the 2018 version\r\n\t\ttextCalcium: 'Calcium', //this is for the 2018 version\r\n\t\ttextIron: 'Iron',\r\n\t\ttextNotApplicable: '-',\r\n\t\tingredientList: 'None',\r\n\t\ttextPercentDailyPart1: 'Percent Daily Values are based on a',\r\n\t\ttextPercentDailyPart2: 'calorie diet',\r\n\t\ttextPercentDaily2018VersionPart1: 'The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. ',\r\n\t\ttextPercentDaily2018VersionPart2: ' calories a day is used for general nutrition advice.',\r\n\t\ttextGoogleAnalyticsEventCategory: 'Nutrition Label',\r\n\t\ttextGoogleAnalyticsEventActionUpArrow: 'Quantity Up Arrow Clicked',\r\n\t\ttextGoogleAnalyticsEventActionDownArrow: 'Quantity Down Arrow Clicked',\r\n\t\ttextGoogleAnalyticsEventActionTextbox: 'Quantity Textbox Changed',\r\n\t\ttextUKTypicalValues: 'Typical Values', //this is for the uk version\r\n\t\ttextUKReferenceIntake: 'Reference intake of an average adult', //this is for the uk version\r\n\t\ttextUKPer100: 'Per', //this is for the uk version\r\n\t\ttextUKDefaultServingNameIfEmpty: 'Serving', //this is for the uk version\r\n\t\ttextDataNotAvailable: 'Data not available',\r\n\t\ttextAriaLabelIncreaseQuantityArrow: 'Increase the Quantity Arrow',\r\n\t\ttextAriaLabelDecreaseQuantityArrow: 'Decrease the Quantity Arrow',\r\n\t\ttextAriaLabelChangeQuantityTextbox: 'Change the Quantity Textbox',\r\n\t\ttextCalorieDietHtmlLegacyLessThan: 'Less than',\r\n\t\ttextCalorieDietHtmlLegacyDietary: 'Dietary',\r\n\t\ttextCaffeine: 'Caffeine', //this is for the 2018 version\r\n\r\n\t\t//if the showLegacyVersion is true, the system will show the legacy version\r\n\t\t//if both the showLegacyVersion and showUKVersion are false, the system will show the 2018 version\r\n\t\t//if both the showLegacyVersion is false and showUKVersion is true, the system will show the uk version\r\n\t\tshowLegacyVersion: true,\r\n\t\tshowUKVersion: false,\r\n\r\n\t\t//for the uk label, If the serving name is empty, have it default to \"Serving\"\r\n\t\tconvertEmptyServingNametoServingForUKLabel: true,\r\n\r\n\t\t//more details here https://github.com/nutritionix/nutrition-label/issues/77#issuecomment-323510972\r\n\t\tlegacyVersion: 1\r\n\t};//end of => $.fn.nutritionLabel.defaultSettings\r\n\r\n\r\n\t//this will store the unique individual properties for each instance of the plugin\r\n\tfunction NutritionLabel(settings, $elem) {\r\n\t\tthis.nutritionLabel = null;\r\n\t\tthis.settings = settings;\r\n\t\tthis.$elem = $elem;\r\n\t\treturn this;\r\n\t}\r\n\r\n\r\n\tfunction cleanSettings(settings) {\r\n\t\tlet numericIndex = [\r\n\t\t\t'calorieIntake',\r\n\t\t\t'dailyValueCalcium',\r\n\t\t\t'dailyValueCarb',\r\n\t\t\t'dailyValueCholesterol',\r\n\t\t\t'dailyValueEnergyKcal',\r\n\t\t\t'dailyValueFiber',\r\n\t\t\t'dailyValueIron',\r\n\t\t\t'dailyValuePotassium',\r\n\t\t\t'dailyValueProtein',\r\n\t\t\t'dailyValueSalt',\r\n\t\t\t'dailyValueSatFat',\r\n\t\t\t'dailyValueSodium',\r\n\t\t\t'dailyValueSugar',\r\n\t\t\t'dailyValueTotalFat',\r\n\t\t\t'dailyValueVitaminD',\r\n\t\t\t'decimalPlacesForDailyValues',\r\n\t\t\t'decimalPlacesForNutrition',\r\n\t\t\t'decimalPlacesForQuantityTextbox',\r\n\t\t\t'scrollHeightComparison',\r\n\t\t\t'scrollHeightPixel',\r\n\t\t\t'scrollLongItemNamePixel',\r\n\t\t\t'scrollLongItemNamePixel2018Override',\r\n\t\t\t'valueAddedSugars',\r\n\t\t\t'valueCaffeine',\r\n\t\t\t'valueCalcium',\r\n\t\t\t'valueCalories',\r\n\t\t\t'valueCholesterol',\r\n\t\t\t'valueCol1CalorieDiet',\r\n\t\t\t'valueCol1Dietary',\r\n\t\t\t'valueCol1DietaryCholesterol',\r\n\t\t\t'valueCol1DietaryPotassium',\r\n\t\t\t'valueCol1DietarySatFat',\r\n\t\t\t'valueCol1DietarySodium',\r\n\t\t\t'valueCol1DietaryTotalCarb',\r\n\t\t\t'valueCol1DietaryTotalFat',\r\n\t\t\t'valueCol2CalorieDiet',\r\n\t\t\t'valueCol2Dietary',\r\n\t\t\t'valueCol2DietaryCholesterol',\r\n\t\t\t'valueCol2DietaryPotassium',\r\n\t\t\t'valueCol2DietarySatFat',\r\n\t\t\t'valueCol2DietarySodium',\r\n\t\t\t'valueCol2DietaryTotalCarb',\r\n\t\t\t'valueCol2DietaryTotalFat',\r\n\t\t\t'valueFatCalories',\r\n\t\t\t'valueFibers',\r\n\t\t\t'valueIron',\r\n\t\t\t'valueMonoFat',\r\n\t\t\t'valuePolyFat',\r\n\t\t\t'valuePotassium',\r\n\t\t\t'valueProteins',\r\n\t\t\t'valueSatFat',\r\n\t\t\t'valueServingPerContainer',\r\n\t\t\t'valueServingSize',\r\n\t\t\t'valueServingUnitQuantity',\r\n\t\t\t'valueServingWeightGrams',\r\n\t\t\t'valueSodium',\r\n\t\t\t'valueSugarAlcohol',\r\n\t\t\t'valueSugars',\r\n\t\t\t'valueTotalCarb',\r\n\t\t\t'valueTotalFat',\r\n\t\t\t'valueTransFat',\r\n\t\t\t'valueVitaminA',\r\n\t\t\t'valueVitaminC',\r\n\t\t\t'valueVitaminD',\r\n\t\t\t'width'\r\n\t\t];\r\n\r\n\t\t$.each(settings, function(index, value) {\r\n\t\t\tif (jQuery.inArray(index, numericIndex) !== -1) {\r\n\t\t\t\tsettings[index] = parseFloat(settings[index]);\r\n\r\n\t\t\t\tif (isNaN(settings[index]) || settings[index] === undefined) {\r\n\t\t\t\t\tsettings[index] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (settings['valueServingUnitQuantity'] < 0) {\r\n\t\t\tsettings['valueServingUnitQuantity'] = 0;\r\n\t\t}\r\n\r\n\t\treturn settings;\r\n\t}//end of => function cleanSettings(settings)\r\n\r\n\r\n\tfunction updateNutritionValueWithMultiplier(settings) {\r\n\t\tlet nutritionIndex = [\r\n\t\t\t'valueAddedSugars',\r\n\t\t\t'valueCaffeine',\r\n\t\t\t'valueCalcium',\r\n\t\t\t'valueCalories',\r\n\t\t\t'valueCholesterol',\r\n\t\t\t'valueFatCalories',\r\n\t\t\t'valueFibers',\r\n\t\t\t'valueIron',\r\n\t\t\t'valueMonoFat',\r\n\t\t\t'valuePolyFat',\r\n\t\t\t'valuePotassium',\r\n\t\t\t'valuePotassium_2018',\r\n\t\t\t'valueProteins',\r\n\t\t\t'valueSatFat',\r\n\t\t\t'valueServingWeightGrams',\r\n\t\t\t'valueSodium',\r\n\t\t\t'valueSugarAlcohol',\r\n\t\t\t'valueSugars',\r\n\t\t\t'valueTotalCarb',\r\n\t\t\t'valueTotalFat',\r\n\t\t\t'valueTransFat',\r\n\t\t\t'valueVitaminA',\r\n\t\t\t'valueVitaminC',\r\n\t\t\t'valueVitaminD'\r\n\t\t];\r\n\r\n\t\t$.each(settings, function(index, value) {\r\n\t\t\tif (jQuery.inArray(index, nutritionIndex) !== -1) {\r\n\t\t\t\tsettings[index] = parseFloat(settings[index]);\r\n\t\t\t\tif (isNaN(settings[index]) || settings[index] === undefined) {\r\n\t\t\t\t\tsettings[index] = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsettings[index] =\r\n\t\t\t\t\tparseFloat(settings[index]) *\r\n\t\t\t\t\tparseFloat(settings['valueServingUnitQuantity']) *\r\n\t\t\t\t\tparseFloat(settings['nutritionValueMultiplier']);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (parseFloat(settings['valueServingUnitQuantity']) == 0) {\r\n\t\t\tsettings['valueServingPerContainer'] = 0;\r\n\t\t} else if (!isNaN(settings['valueServingPerContainer']) && settings['valueServingPerContainer'] != undefined) {\r\n\t\t\tsettings['valueServingPerContainer'] = parseFloat(settings.totalContainerQuantity) / parseFloat(settings['valueServingUnitQuantity']);\r\n\t\t}\r\n\r\n\t\treturn settings;\r\n\t}//end of => function updateNutritionValueWithMultiplier(settings)\r\n\r\n\r\n\tfunction init(settings, $elem) {\r\n\t\t//merge the default settins with the user supplied settings\r\n\t\tlet $settings = $.extend({}, $.fn.nutritionLabel.defaultSettings, settings || {});\r\n\t\tlet $originalCleanSettings = cleanSettings($.extend({}, $.fn.nutritionLabel.defaultSettings, settings || {}));\r\n\r\n\t\t$settings.totalContainerQuantity = parseFloat($settings.valueServingPerContainer) * parseFloat($settings['valueServingUnitQuantity']);\r\n\t\t$originalCleanSettings.totalContainerQuantity = parseFloat($originalCleanSettings.valueServingPerContainer) * parseFloat($originalCleanSettings['valueServingUnitQuantity']);\r\n\r\n\t\t//clean the settings and make sure that all numeric settings are really numeric, if not, force them to be\r\n\t\t$settings = cleanSettings($settings);\r\n\t\t$originalCleanSettings = cleanSettings($originalCleanSettings);\r\n\r\n\t\t$settings.nutritionValueMultiplier = $settings.valueServingUnitQuantity <= 0 ? 1 : 1 / $settings.valueServingUnitQuantity;\r\n\r\n\t\t//update the nutrition values with the multiplier\r\n\t\tlet $updatedsettings = updateNutritionValueWithMultiplier($settings);\r\n\t\t$settings.originalServingUnitQuantity = $updatedsettings.valueServingUnitQuantity;\r\n\r\n\t\t//if the original value is <= 0, set it to 1.0\r\n\t\tif ($updatedsettings.valueServingUnitQuantity <= 0) {\r\n\t\t\t$originalCleanSettings.valueServingUnitQuantity = 1;\r\n\t\t\t$updatedsettings = updateNutritionValueWithMultiplier($originalCleanSettings);\r\n\t\t\t$updatedsettings.valueServingUnitQuantity = 1;\r\n\t\t}\r\n\r\n\t\t//initalize the nutrition label and create / recreate it\r\n\t\tvar nutritionLabel = new NutritionLabel($updatedsettings, $elem);\r\n\r\n\t\tif ($updatedsettings.showLegacyVersion) {\r\n\t\t\t                               //($localSettings nutritionLabel  $elem  forLegacyLabel forInitialization forUKLabel)\r\n\t\t\tupdateValuesAfterAQuantityChanged($settings,     nutritionLabel, $elem, true,          true,             false);\r\n\r\n\t\t\t//if the text box for the unit quantity is shown\r\n\t\t\tif ($settings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t//if the arrows are not hidden\r\n\t\t\t\tif (!$settings.hideTextboxArrows) {\r\n\t\t\t\t\t//increase the unit quantity by clicking the up arrow\r\n\t\t\t\t\t$('#' + $elem.attr('id')).on('click', '.unitQuantityUp', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityByArrow($(this),      1,            updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true,          false);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//decrease the unit quantity by clicking the down arrow\r\n\t\t\t\t\t$('#' + $elem.attr('id')).on('click', '.unitQuantityDown', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityByArrow($(this),      -1,           updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true,          false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//the textbox unit quantity value is changed\r\n\t\t\t\t$('#' + $elem.attr('id')).on('change', '.unitQuantityBox', function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t                    //($thisTextbox $localSettings                                     nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\tchangeQuantityTextbox($(this),     updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true,          false);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//the textbox unit quantity value is changed\r\n\t\t\t\t$('#' + $elem.attr('id')).on('keydown', '.unitQuantityBox', function(e) {\r\n\t\t\t\t\tif (e.keyCode == 13) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisTextbox $localSettings,                                     nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityTextbox($(this),     updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, true,          false);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t//end of => if ($updatedsettings.showLegacyVersion)\r\n\t\t} else if ($updatedsettings.showUKVersion) {\r\n\t\t\t//this part is for the uk version\r\n\t\t\t                               //($localSettings nutritionLabel  $elem  forLegacyLabel forInitialization forUKLabel)\r\n\t\t\tupdateValuesAfterAQuantityChanged($settings,     nutritionLabel, $elem, false,         true,             true);\r\n\r\n\t\t\t//if the text box for the unit quantity is shown\r\n\t\t\tif ($settings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t//if the arrows are not hidden\r\n\t\t\t\tif (!$settings.hideTextboxArrows) {\r\n\t\t\t\t\t//increase the unit quantity by clicking the up arrow\r\n\t\t\t\t\t$('#' + $elem.attr('id')).on('click', '.uk_nf-unitQuantityUp', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityByArrow($(this),      1,            updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         true);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//decrease the unit quantity by clicking the down arrow\r\n\t\t\t\t\t$('#' + $elem.attr('id')).on('click', '.uk_nf-unitQuantityDown', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityByArrow($(this),      -1,           updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//the textbox unit quantity value is changed\r\n\t\t\t\t$('#' + $elem.attr('id')).on('change', '.uk_nf-unitQuantityBox', function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t                   //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\tchangeQuantityTextbox($(this),     updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//the textbox unit quantity value is changed\r\n\t\t\t\t$('#' + $elem.attr('id')).on('keydown', '.uk_nf-unitQuantityBox', function(e) {\r\n\t\t\t\t\tif (e.keyCode == 13) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityTextbox($(this),     updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t//end of => else if ($updatedsettings.showUKVersion)\r\n\t\t} else {\r\n\t\t\t//this part is for the 2018 version\r\n\t\t\t                               //($localSettings nutritionLabel  $elem  forLegacyLabel forInitialization forUKLabel)\r\n\t\t\tupdateValuesAfterAQuantityChanged($settings,     nutritionLabel, $elem, false,         true,             false);\r\n\r\n\t\t\t//if the text box for the unit quantity is shown\r\n\t\t\tif ($settings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t//if the arrows are not hidden\r\n\t\t\t\tif (!$settings.hideTextboxArrows) {\r\n\t\t\t\t\t//increase the unit quantity by clicking the up arrow\r\n\t\t\t\t\t$('#' + $elem.attr('id')).on('click', 'div.nf-unitQuantityUp', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityByArrow($(this),      1,            updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         false);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t//decrease the unit quantity by clicking the down arrow\r\n\t\t\t\t\t$('#' + $elem.attr('id')).on('click', 'div.nf-unitQuantityDown', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisQuantity changeValueBy $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityByArrow($(this),      -1,           updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//the textbox unit quantity value is changed\r\n\t\t\t\t$('#' + $elem.attr('id')).on('change', '.nf-unitQuantityBox', function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t                   //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\tchangeQuantityTextbox($(this),     updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         false);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//the textbox unit quantity value is changed\r\n\t\t\t\t$('#' + $elem.attr('id')).on('keydown', '.nf-unitQuantityBox', function(e) {\r\n\t\t\t\t\tif (e.keyCode == 13) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t                   //($thisTextbox $localSettings                                      nutritionLabel  $elem  forLegacyLabel forUKLabel)\r\n\t\t\t\t\t\tchangeQuantityTextbox($(this),     updateTheSettingsAfterAnEvent($settings, settings), nutritionLabel, $elem, false,         false);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}//end of => else => if ($updatedsettings.showLegacyVersion) => else if ($updatedsettings.showUKVersion)\r\n\r\n\t\t//store the object for later reference\r\n\t\t$elem.data('_nutritionLabel', nutritionLabel);\r\n\t}//end of => function init(settings, $elem)\r\n\r\n\r\n\tfunction updateTheSettingsAfterAnEvent($localSettings, localSettings) {\r\n\t\tlet $localSettingsHolder = cleanSettings($.extend({}, $.fn.nutritionLabel.defaultSettings, localSettings || {}));\r\n\t\t$localSettingsHolder.originalServingUnitQuantity = $localSettings.originalServingUnitQuantity;\r\n\t\t$localSettingsHolder.totalContainerQuantity = $localSettings.totalContainerQuantity;\r\n\t\t$localSettingsHolder.nutritionValueMultiplier = $localSettingsHolder.valueServingUnitQuantity <= 0 ? 1 : 1 / $localSettingsHolder.valueServingUnitQuantity;\r\n\t\treturn $localSettingsHolder;\r\n\t}\r\n\r\n\r\n\tfunction addScrollToItemDiv($localElem, $localSettings, localNameClass, forLegacyLabel) {\r\n\t\tlet local_scrollLongItemNamePixel = parseInt($localSettings.scrollLongItemNamePixel);\r\n\t\tif (!forLegacyLabel) {\r\n\t\t\tlocal_scrollLongItemNamePixel = parseInt($localSettings.scrollLongItemNamePixel2018Override);\r\n\t\t}\r\n\r\n\t\t//as of 05/14/2017 inline class only appears on the legacy version\r\n\t\tif ($('#' + $localElem.attr('id') + ' .' + localNameClass + '.inline').val() != undefined) {\r\n\t\t\tif ($('#' + $localElem.attr('id') + ' .' + localNameClass + '.inline').height() > local_scrollLongItemNamePixel + 1) {\r\n\t\t\t\t$('#' + $localElem.attr('id') + ' .' + localNameClass + '.inline').css({\r\n\t\t\t\t\t'margin-left': '3.90em',\r\n\t\t\t\t\t'height': local_scrollLongItemNamePixel + 'px',\r\n\t\t\t\t\t'overflow-y': 'auto'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (forLegacyLabel) {\r\n\t\t\t\tif ($('#' + $localElem.attr('id') + ' .' + localNameClass).height() > local_scrollLongItemNamePixel + 1) {\r\n\t\t\t\t\t$('#' + $localElem.attr('id') + ' .' + localNameClass).css({\r\n\t\t\t\t\t\t'height': local_scrollLongItemNamePixel + 'px',\r\n\t\t\t\t\t\t'overflow-y': 'auto'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ($('#' + $localElem.attr('id') + ' .' + localNameClass + ' div').height() >= local_scrollLongItemNamePixel + 1) {\r\n\t\t\t\t\t$('#' + $localElem.attr('id') + ' .' + localNameClass + ' div').css({\r\n\t\t\t\t\t\t'height': local_scrollLongItemNamePixel + 'px',\r\n\t\t\t\t\t\t'overflow-y': 'auto'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction notApplicableHover($localElem) {\r\n\t\t//this code is for pages with multiple nutrition labels generated by the plugin like the demo page\r\n\t\tif ($localElem.attr('id') !== undefined && $localElem.attr('id') !== '') {\r\n\t\t\t$('#' + $localElem.attr('id') + ' .notApplicable').on('mouseenter', function() {\r\n\t\t\t\t$('#' + $localElem.attr('id') + ' .naTooltip').css({\r\n\t\t\t\t\ttop: $(this).position().top + 'px',\r\n\t\t\t\t\tleft: $(this).position().left + 10 + 'px'\r\n\t\t\t\t}).show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#' + $localElem.attr('id') + ' .notApplicable').on('mouseleave', function() {\r\n\t\t\t\t$('#' + $localElem.attr('id') + ' .naTooltip').hide();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t$('#' + $localElem.attr('id') + ' .notApplicable').on('mouseenter', function() {\r\n\t\t\t\t$('.naTooltip').css({\r\n\t\t\t\t\ttop: $(this).position().top + 'px',\r\n\t\t\t\t\tleft: $(this).position().left + 10 + 'px'\r\n\t\t\t\t}).show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#' + $localElem.attr('id') + ' .notApplicable').on('mouseleave', function() {\r\n\t\t\t\t$('.naTooltip').hide();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction updateScrollingFeature($localElem, $localSettings, localIDToScroll, localScrollHeightComparison, localScrollHeight) {\r\n\t\tlet $parentElement;\r\n\t\tif ($localElem.attr('id') !== undefined && $localElem.attr('id') !== '') {\r\n\t\t\t//this code is for pages with multiple nutrition labels generated by the plugin like the demo page\r\n\t\t\t$parentElement = $('#' + $localElem.attr('id') + ' #' + localIDToScroll).parent();\r\n\t\t} else {\r\n\t\t\t$parentElement = $('#' + localIDToScroll).parent();\r\n\t\t}\r\n\r\n\t\tif ($parentElement.innerHeight() > localScrollHeightComparison) {\r\n\t\t\t$parentElement.addClass('scroll').css({\r\n\t\t\t\theight: localScrollHeight + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction updateValuesAfterAQuantityChanged($localSettings, nutritionLabel, $elem, forLegacyLabel, forInitialization, forUKLabel) {\r\n\t\tlet ingredientListID = 'ingredientList';\r\n\t\tlet calcDisclaimerTextID = 'calcDisclaimerText';\r\n\t\tlet nameElementClass = 'name';\r\n\r\n\t\tif (!forLegacyLabel && !forUKLabel) {\r\n\t\t\t//for the 2018 label\r\n\t\t\tingredientListID = 'nf-ingredientList';\r\n\t\t\tcalcDisclaimerTextID = 'nf-calcDisclaimerText';\r\n\t\t\tnameElementClass = 'nf-item-name';\r\n\t\t} else if (!forLegacyLabel && forUKLabel) {\r\n\t\t\t//for the uk label\r\n\t\t\tingredientListID = 'uk_nf-ingredient-statement';\r\n\t\t\tcalcDisclaimerTextID = 'uk_nf-disclaimer';\r\n\t\t}\r\n\r\n\t\tif (!forInitialization) {\r\n\t\t\t$localSettings = updateNutritionValueWithMultiplier($localSettings);\r\n\t\t\tnutritionLabel = new NutritionLabel($localSettings, $elem);\r\n\t\t}\r\n\r\n\t\t//if the showLegacyVersion is true, the system will show the legacy version\r\n\t\t//if both the showLegacyVersion and showUKVersion are false, the system will show the 2018 version\r\n\t\t//if both the showLegacyVersion is false and showUKVersion is true, the system will show the uk version\r\n\t\tif (forLegacyLabel) {\r\n\t\t\t$elem.html(nutritionLabel.generateLegacy());\r\n\t\t} else if (forUKLabel) {\r\n\t\t\t$elem.html(nutritionLabel.generateUK());\r\n\t\t} else {\r\n\t\t\t$elem.html(nutritionLabel.generate2018());\r\n\t\t}\r\n\r\n\t\t//scroll the ingredients of the innerheight is > $localSettings.scrollHeightComparison and the settings showIngredients and scrollLongIngredients are true\r\n\t\tif ($localSettings.showIngredients && $localSettings.scrollLongIngredients) {\r\n\t\t\t                    //($localElem $localSettings  localIDToScroll   localScrollHeightComparison            localScrollHeight)\r\n\t\t\tupdateScrollingFeature($elem,     $localSettings, ingredientListID, $localSettings.scrollHeightComparison, $localSettings.scrollHeightPixel);\r\n\t\t}\r\n\r\n\t\t//scroll the disclaimer if the height of the disclaimer div is greater than scrollDisclaimerHeightComparison\r\n\t\tif ($localSettings.showDisclaimer) {\r\n\t\t\t                    //($localElem $localSettings  localIDToScroll       localScrollHeightComparison                      localScrollHeight)\r\n\t\t\tupdateScrollingFeature($elem,     $localSettings, calcDisclaimerTextID, $localSettings.scrollDisclaimerHeightComparison, $localSettings.scrollDisclaimer);\r\n\t\t}\r\n\r\n\t\t//this code is for pages with multiple nutrition labels generated by the plugin like the demo page\r\n\t\tnotApplicableHover($elem);\r\n\r\n\t\t//for the legacy and 2018 label\r\n\t\tif (!forUKLabel) {\r\n\t\t\t//add a scroll on long item names\r\n\t\t\tif ($localSettings.scrollLongItemName) {\r\n\t\t\t\taddScrollToItemDiv($elem, $localSettings, nameElementClass, forLegacyLabel);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!forInitialization) {\r\n\t\t\treturn $localSettings;\r\n\t\t}\r\n\t}//end of => function updateValuesAfterAQuantityChanged($localSettings, $elem, ingredientListID, calcDisclaimerTextID, forLegacyLabel, forInitialization, forUKLabel)\r\n\r\n\r\n\tfunction handleQuantityChange($localSettings, source, previousValue, newValue) {\r\n\t\tlet handler;\r\n\t\tif ($localSettings.userFunctionOnQuantityChange) {\r\n\t\t\thandler = $localSettings.userFunctionOnQuantityChange;\r\n\t\t} else if ($localSettings.userFunctionNameOnQuantityChange) {\r\n\t\t\thandler = window[$localSettings.userFunctionNameOnQuantityChange];\r\n\t\t}\r\n\r\n\t\tif (typeof handler === 'function') {\r\n\t\t\thandler(source, previousValue, newValue);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction changeQuantityTextbox($thisTextbox, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel) {\r\n\t\tlet nixLabelBeforeQuantityID = 'nixLabelBeforeQuantity';\r\n\t\tlet previousValue;\r\n\t\tlet textBoxValue;\r\n\r\n\t\tif (!forLegacyLabel & !forUKLabel) {\r\n\t\t\tnixLabelBeforeQuantityID = 'nf-nixLabelBeforeQuantity';\r\n\t\t} else if (!forLegacyLabel & forUKLabel) {\r\n\t\t\tnixLabelBeforeQuantityID = 'uk_nf-nixLabelBeforeQuantity';\r\n\t\t}\r\n\r\n\t\tpreviousValue = parseFloat($('#' + $elem.attr('id') + ' #' + nixLabelBeforeQuantityID).val());\r\n\r\n\t\ttextBoxValue = !regIsPosNumber($thisTextbox.val()) ? previousValue : parseFloat($thisTextbox.val());\r\n\t\t$thisTextbox.val( roundLoDash(textBoxValue, $localSettings.decimalPlacesForQuantityTextbox) );\r\n\r\n\t\t$localSettings.valueServingUnitQuantity = textBoxValue;\r\n\t\t                                                //($localSettings  nutritionLabel  $elem  forLegacyLabel  forInitialization forUKLabel)\r\n\t\t$localSettings = updateValuesAfterAQuantityChanged($localSettings, nutritionLabel, $elem, forLegacyLabel, false,            forUKLabel);\r\n\r\n\t\tif ($localSettings.allowGoogleAnalyticsEventLog) {\r\n\t\t\twindow[$localSettings.gooleAnalyticsFunctionName](\r\n\t\t\t\t'send',\r\n\t\t\t\t'event',\r\n\t\t\t\t$localSettings.textGoogleAnalyticsEventCategory,\r\n\t\t\t\t$localSettings.textGoogleAnalyticsEventActionTextbox\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\thandleQuantityChange(\r\n\t\t\t$localSettings,\r\n\t\t\t'textbox',\r\n\t\t\troundLoDash(previousValue, $localSettings.decimalPlacesForQuantityTextbox),\r\n\t\t\troundLoDash(textBoxValue, $localSettings.decimalPlacesForQuantityTextbox)\r\n\t\t);\r\n\t}//end of => function changeQuantityTextbox($thisTextbox, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel)\r\n\r\n\r\n\tfunction changeQuantityByArrow($thisQuantity, changeValueBy, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel) {\r\n\t\tlet unitQuantityBoxClass = 'unitQuantityBox';\r\n\t\tif (!forLegacyLabel & !forUKLabel) {\r\n\t\t\tunitQuantityBoxClass = 'nf-unitQuantityBox';\r\n\t\t} else if (!forLegacyLabel & forUKLabel) {\r\n\t\t\tunitQuantityBoxClass = 'uk_nf-unitQuantityBox';\r\n\t\t}\r\n\r\n\t\tlet currentQuantity = parseFloat($thisQuantity.parent().parent().find('input.' + unitQuantityBoxClass).val());\r\n\t\tif (isNaN(currentQuantity)) {\r\n\t\t\tcurrentQuantity = 1.0;\r\n\t\t}\r\n\t\tlet beforeCurrentQuantityWasChanged = currentQuantity;\r\n\r\n\t\t//see https://github.com/nutritionix/nutrition-label/issues/14 for an explanation on this part\r\n\t\tif (currentQuantity <= 1 && changeValueBy == -1) {\r\n\t\t\tchangeValueBy = -0.5;\r\n\t\t\tcurrentQuantity += changeValueBy;\r\n\t\t} else if (currentQuantity < 1 && changeValueBy == 1) {\r\n\t\t\tchangeValueBy = 0.5;\r\n\t\t\tcurrentQuantity += changeValueBy;\r\n\t\t} else if (currentQuantity <= 2 && currentQuantity > 1 && changeValueBy == -1) {\r\n\t\t\tcurrentQuantity = 1;\r\n\t\t} else {\r\n\t\t\tcurrentQuantity += changeValueBy;\r\n\t\t}\r\n\r\n\t\tif (currentQuantity < 0) {\r\n\t\t\tcurrentQuantity = 0;\r\n\t\t}\r\n\r\n\t\t$thisQuantity.parent().parent().find('input.' + unitQuantityBoxClass).val(\r\n\t\t\troundLoDash(currentQuantity, $localSettings.decimalPlacesForQuantityTextbox)\r\n\t\t);\r\n\r\n\t\t$localSettings.valueServingUnitQuantity = currentQuantity;\r\n\t\t                                                //($localSettings  nutritionLabel  $elem  forLegacyLabel  forInitialization forUKLabel)\r\n\t\t$localSettings = updateValuesAfterAQuantityChanged($localSettings, nutritionLabel, $elem, forLegacyLabel, false,            forUKLabel);\r\n\r\n\t\tif ($localSettings.allowGoogleAnalyticsEventLog) {\r\n\t\t\tif (changeValueBy > 0) {\r\n\t\t\t\twindow[$localSettings.gooleAnalyticsFunctionName](\r\n\t\t\t\t\t'send',\r\n\t\t\t\t\t'event',\r\n\t\t\t\t\t$localSettings.textGoogleAnalyticsEventCategory,\r\n\t\t\t\t\t$localSettings.textGoogleAnalyticsEventActionUpArrow\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\twindow[$localSettings.gooleAnalyticsFunctionName](\r\n\t\t\t\t\t'send',\r\n\t\t\t\t\t'event',\r\n\t\t\t\t\t$localSettings.textGoogleAnalyticsEventCategory,\r\n\t\t\t\t\t$localSettings.textGoogleAnalyticsEventActionDownArrow\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandleQuantityChange(\r\n\t\t\t$localSettings,\r\n\t\t\tchangeValueBy > 0 ? 'up arrow' : 'down arrow',\r\n\t\t\tbeforeCurrentQuantityWasChanged,\r\n\t\t\tcurrentQuantity\r\n\t\t);\r\n\t}//end of => function changeQuantityByArrow($thisQuantity, changeValueBy, $localSettings, nutritionLabel, $elem, forLegacyLabel, forUKLabel)\r\n\r\n\r\n\t//round the value to the nearest number\r\n\tfunction roundToNearestNum(input, nearest) {\r\n\t\treturn nearest < 0 ?\r\n\t\t\tMath.round(input * nearest) / nearest :\r\n\t\t\tMath.round(input / nearest) * nearest;\r\n\t}\r\n\r\n\r\n\tfunction roundCalories(toRound, decimalPlace) {\r\n\t\ttoRound = roundCaloriesRule(toRound);\r\n\t\tif (toRound > 0) {\r\n\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundFat(toRound, decimalPlace) {\r\n\t\ttoRound = roundFatRule(toRound);\r\n\t\tif (toRound > 0) {\r\n\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundSodium(toRound, decimalPlace) {\r\n\t\ttoRound = roundSodiumRule(toRound);\r\n\t\tif (toRound > 0) {\r\n\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundPotassium(toRound, decimalPlace) {\r\n\t\ttoRound = roundPotassiumRule(toRound);\r\n\t\tif (toRound > 0) {\r\n\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundCholesterol(toRound, decimalPlace) {\r\n\t\tlet normalVersion = true;\r\n\t\tlet roundResult = roundCholesterolRule(toRound);\r\n\t\tif (roundResult === false) {\r\n\t\t\tnormalVersion = false;\r\n\t\t} else {\r\n\t\t\ttoRound = roundResult;\r\n\t\t}\r\n\r\n\t\tif (normalVersion) {\r\n\t\t\tif (toRound > 0) {\r\n\t\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttoRound = '< 5';\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundCarbFiberSugarProtein(toRound, decimalPlace) {\r\n\t\tlet normalVersion = true;\r\n\t\tlet roundResult = roundCarbFiberSugarProteinRule(toRound);\r\n\t\tif (roundResult === false) {\r\n\t\t\tnormalVersion = false;\r\n\t\t} else {\r\n\t\t\ttoRound = roundResult;\r\n\t\t}\r\n\r\n\t\tif (normalVersion) {\r\n\t\t\tif (toRound > 0) {\r\n\t\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttoRound = '< 1';\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundCaffeine(toRound, decimalPlace) {\r\n\t\ttoRound = roundToNearestNum(toRound, 1);\r\n\t\tif (toRound > 0) {\r\n\t\t\ttoRound = roundLoDash(toRound, decimalPlace);\r\n\t\t}\r\n\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\t//Calories and Calories from Fat rounding rule\r\n\tfunction roundCaloriesRule(toRound) {\r\n\t\tif (toRound < 5) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound <= 50) {\r\n\t\t\t//50 cal - express to nearest 5 cal increment\r\n\t\t\treturn roundToNearestNum(toRound, 5);\r\n\t\t}\r\n\r\n\t\t//> 50 cal - express to nearest 10 cal increment\r\n\t\treturn roundToNearestNum(toRound, 10);\r\n\t}\r\n\r\n\r\n\t//Total Fat, Saturated Fat, Polyunsaturated Fat and Monounsaturated Fat rounding rule\r\n\tfunction roundFatRule(toRound) {\r\n\t\tif (toRound < 0.5) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound < 5) {\r\n\t\t\t//< 5 g - express to nearest .5g increment\r\n\t\t\treturn roundToNearestNum(toRound, 0.5);\r\n\t\t}\r\n\r\n\t\t//>= 5 g - express to nearest 1 g increment\r\n\t\treturn roundToNearestNum(toRound, 1);\r\n\t}\r\n\r\n\r\n\t//Sodium rounding rule\r\n\tfunction roundSodiumRule(toRound) {\r\n\t\tif (toRound < 5) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound <= 140) {\r\n\t\t\t//5 - 140 mg - express to nearest 5 mg increment\r\n\t\t\treturn roundToNearestNum(toRound, 5);\r\n\t\t}\r\n\r\n\t\t//>= 5 g - express to nearest 10 g increment\r\n\t\treturn roundToNearestNum(toRound, 10);\r\n\t}\r\n\r\n\r\n\t//Potassium rounding rule\r\n\tfunction roundPotassiumRule(toRound) {\r\n\t\tif (toRound < 5) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound <= 140) {\r\n\t\t\t//5 - 140 mg - express to nearest 5 mg increment\r\n\t\t\treturn roundToNearestNum(toRound, 5);\r\n\t\t}\r\n\r\n\t\t//>= 5 g - express to nearest 10 g increment\r\n\t\treturn roundToNearestNum(toRound, 10);\r\n\t}\r\n\r\n\r\n\t//Cholesterol rounding rule\r\n\tfunction roundCholesterolRule(toRound) {\r\n\t\tif (toRound < 2) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound <= 5) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//> 5 mg - express to nearest 5 mg increment\r\n\t\treturn roundToNearestNum(toRound, 5);\r\n\t}\r\n\r\n\r\n\t//Total Carbohydrate, Dietary Fiber, Sugar and Protein rounding rule\r\n\tfunction roundCarbFiberSugarProteinRule(toRound) {\r\n\t\tif (toRound < 0.5) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound < 1) {\r\n\t\t\t//< 1 g - express as \"Contains less than 1g\" or \"less than 1g\"\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//> 1 mg - express to nearest 1 g increment\r\n\t\treturn roundToNearestNum(toRound, 1);\r\n\t}\r\n\r\n\r\n\t//Total Carbohydrate, Dietary Fiber, Sugar and Protein rounding rule\r\n\tfunction roundVitaminsCalciumIron(toRound) {\r\n\t\tif (toRound > 0) {\r\n\t\t\tif (toRound < 10) {\r\n\t\t\t\t//< 10 - round to nearest even number\r\n\t\t\t\treturn roundToNearestNum(toRound, 2);\r\n\t\t\t} else if (toRound < 50) {\r\n\t\t\t\t//between 10 and 50, round to the nearest 5 increment\r\n\t\t\t\treturn roundToNearestNum(toRound, 5);\r\n\t\t\t}\r\n\r\n\t\t\t//else, round to the nearest 10 increment\r\n\t\t\treturn roundToNearestNum(toRound, 10);\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\r\n\tfunction roundForUKLabelTotalFatCarbsSugarFiberProtein(toRound) {\r\n\t\tlet normalVersion = true;\r\n\t\tlet roundResult = roundForUKLabelTotalFatCarbsSugarFiberProteinRule(toRound);\r\n\t\tif (roundResult === false) {\r\n\t\t\tnormalVersion = false;\r\n\t\t} else {\r\n\t\t\ttoRound = roundResult;\r\n\t\t}\r\n\r\n\t\tif (normalVersion && toRound == 0) {\r\n\t\t\ttoRound = '< 0.5';\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundForUKLabelTotalFatCarbsSugarFiberProteinRule(toRound) {\r\n\t\tif (toRound <= 0.5) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound < 10) {\r\n\t\t\t//< 10 > 0.5 - express to nearest 0.1 increment\r\n\t\t\treturn roundLoDash(roundToNearestNum(toRound, 0.1), 1);\r\n\t\t}\r\n\r\n\t\t//> 10 express to nearest 1 increment\r\n\t\treturn roundLoDash( roundToNearestNum(toRound, 1) );\r\n\t}\r\n\r\n\r\n\tfunction roundForUKLabelSatFat(toRound) {\r\n\t\tlet normalVersion = true;\r\n\t\tlet roundResult = roundForUKLabelSatFatRule(toRound);\r\n\t\tif (roundResult === false) {\r\n\t\t\tnormalVersion = false;\r\n\t\t} else {\r\n\t\t\ttoRound = roundResult;\r\n\t\t}\r\n\r\n\t\tif (normalVersion && toRound == 0) {\r\n\t\t\ttoRound = '< 0.1';\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundForUKLabelSatFatRule(toRound) {\r\n\t\tif (toRound <= 0.1) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound < 10) {\r\n\t\t\t//< 10 > 0.5 - express to nearest 0.1 increment\r\n\t\t\treturn roundLoDash(roundToNearestNum(toRound, 0.1), 1);\r\n\t\t}\r\n\r\n\t\t//> 10 express to nearest 1 increment\r\n\t\treturn roundLoDash( roundToNearestNum(toRound, 1) );\r\n\t}\r\n\r\n\r\n\tfunction roundForUKLabelSalt(toRound) {\r\n\t\tlet normalVersion = true;\r\n\t\tlet roundResult = roundForUKLabelSaltRule(toRound);\r\n\r\n\t\tif (roundResult === false) {\r\n\t\t\tnormalVersion = false;\r\n\t\t} else {\r\n\t\t\ttoRound = roundResult;\r\n\t\t}\r\n\r\n\t\tif (normalVersion && toRound == 0) {\r\n\t\t\ttoRound = '< 0.01';\r\n\t\t}\r\n\t\treturn toRound;\r\n\t}\r\n\r\n\r\n\tfunction roundForUKLabelSaltRule(toRound) {\r\n\t\tif (toRound <= 0.0125) {\r\n\t\t\treturn 0;\r\n\t\t} else if (toRound < 1) {\r\n\t\t\t//< 10 > 0.5 - express to nearest 0.1 increment\r\n\t\t\treturn roundLoDash(roundToNearestNum(toRound, 0.01), 2);\r\n\t\t}\r\n\r\n\t\t//> 1 express to nearest 0.1 increment\r\n\t\treturn roundLoDash(roundToNearestNum(toRound, 0.1), 1);\r\n\t}\r\n\r\n\r\n\tfunction roundFor2018LabelVitaminDIron(toRound) {\r\n\t\ttoRound = roundFor2018LabelVitaminDIronRule(toRound);\r\n\t\tif (toRound > 0) {\r\n\t\t\treturn roundLoDash(toRound, 1);\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\r\n\tfunction roundFor2018LabelVitaminDIronRule(toRound) {\r\n\t\t//round to the nearest 0.1 increment\r\n\t\treturn roundToNearestNum(toRound, 0.1);\r\n\t}\r\n\r\n\r\n\tfunction roundFor2018LabelCalciumPotassium(toRound) {\r\n\t\ttoRound = roundFor2018LabelCalciumPotassiumRule(toRound);\r\n\t\tif (toRound > 0) {\r\n\t\t\treturn toRound;\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\r\n\tfunction roundFor2018LabelCalciumPotassiumRule(toRound) {\r\n\t\t//round to the nearest 10 increment\r\n\t\treturn roundToNearestNum(toRound, 10);\r\n\t}\r\n\r\n\r\n\t//check if the value is a positive number\r\n\tfunction regIsPosNumber(fData) {\r\n\t\t/* eslint-disable no-useless-escape */\r\n\t\treturn new RegExp('(^[0-9]+[\\.]?[0-9]+$)|(^[0-9]+$)').test(fData);\r\n\t\t/* eslint-enable no-useless-escape */\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the item area\r\n\tfunction itemNameHtmlLegacy($localSettings) {\r\n\t\tlet tabTemp = globalTab1;\r\n\t\tlet localNutritionLabel = '';\r\n\t\tlet itemNameClass = '';\r\n\t\tif ($localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\tif (\r\n\t\t\t\t\t($localSettings.valueServingSizeUnit === null || $localSettings.valueServingSizeUnit == '') ||\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== '' &&\r\n\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== null &&\r\n\t\t\t\t\t\t$localSettings.originalServingUnitQuantity <= 0\r\n\t\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tlet textboxClass = 'unitQuantityBox';\r\n\r\n\t\t\t\tlocalNutritionLabel += globalTab1 + '<div class=\"cf\">\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab2 + '<div class=\"rel servingSizeField\">\\n';\r\n\r\n\t\t\t\t\tif (!$localSettings.hideTextboxArrows) {\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"setter\">\\n';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<a href=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" class=\"unitQuantityUp\" ';\r\n\t\t\t\t\t\t\t\tlocalNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<a href=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" class=\"unitQuantityDown\" ';\r\n\t\t\t\t\t\t\t\tlocalNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '</div><!-- closing class=\"setter\" -->\\n\\n';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttextboxClass = 'unitQuantityBox arrowsAreHidden';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<input type=\"text\" data-role=\"none\" value=\"' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t'\" class=\"' + textboxClass + '\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\r\n\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<input type=\"hidden\" value=\"' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t'\" id=\"nixLabelBeforeQuantity\">\\n';\r\n\r\n\t\t\t\t\tlocalNutritionLabel += globalTab2 + '</div><!-- closing class=\"servingSizeField\" -->\\n\\n';\r\n\t\t\t\ttabTemp = globalTab2;\r\n\t\t\t\titemNameClass = 'inline';\r\n\t\t\t}\r\n\t\t}//end of => if ($localSettings.showServingUnitQuantityTextbox) {\r\n\r\n\t\t\tlocalNutritionLabel += tabTemp + '<div class=\"name ' + itemNameClass + '\" tabindex=\"0\">';\r\n\t\t\t\tlocalNutritionLabel += $localSettings.itemName;\r\n\t\t\tif ($localSettings.showBrandName && $localSettings.brandName !== null && $localSettings.brandName != '') {\r\n\t\t\t\tlocalNutritionLabel += ' - ' + $localSettings.brandName;\r\n\t\t\t}\r\n\t\t\tlocalNutritionLabel += '</div>\\n';\r\n\r\n\t\tif ($localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\tif (\r\n\t\t\t\t\t($localSettings.valueServingSizeUnit === null || $localSettings.valueServingSizeUnit == '') ||\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== '' &&\r\n\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== null &&\r\n\t\t\t\t\t\t$localSettings.originalServingUnitQuantity <= 0\r\n\t\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\t/* eslint-disable no-useless-escape */\r\n\t\t\t\tlocalNutritionLabel += globalTab1 + '</div><!-- closing class=\"cf\" -->\\n\\n';\r\n\t\t\t\t/* eslint-enable no-useless-escape */\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn localNutritionLabel;\r\n\t}//end of => function itemNameHtmlLegacy($localSettings)\r\n\r\n\r\n\t//generate and return the html code for the serving unit quantity area\r\n\tfunction sevingUnitQuantityHtmlLegacy($localSettings) {\r\n\t\tlet localServingSizeIsHidden = false;\r\n\t\tlet localServingContainerIsHidden = false;\r\n\t\tlet localNutritionLabel = '';\r\n\t\tif ($localSettings.showServingUnitQuantity) {\r\n\t\t\tlocalNutritionLabel += globalTab1 + '<div class=\"serving\" tabIndex=\"0\">\\n';\r\n\r\n\t\t\tif ($localSettings.originalServingUnitQuantity > 0) {\r\n\t\t\t\tlet unitAddedClass = '';\r\n\t\t\t\tlet gramsAddedClass = '';\r\n\r\n\t\t\t\tlocalNutritionLabel += globalTab2 + '<div class=\"cf\">\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"servingSizeText fl\">' + $localSettings.textServingSize + '</div>\\n';\r\n\t\t\t\t\t\tlocalNutritionLabel += $localSettings.showServingUnitQuantityTextbox ?\r\n\t\t\t\t\t\t\t'' :\r\n\t\t\t\t\t\t\tglobalTab3 + '<div class=\"servingUnitQuantity fl\" itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t\t'</div>\\n';\r\n\r\n\t\t\t\tif ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t$localSettings.showServingUnitQuantityTextbox &&\r\n\t\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== null &&\r\n\t\t\t\t\t\t\t$localSettings.valueServingSizeUnit != ''\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet textboxClass = 'unitQuantityBox';\r\n\r\n\t\t\t\t\t\tunitAddedClass = 'unitHasTextbox';\r\n\t\t\t\t\t\tgramsAddedClass = 'gramsHasTextbox';\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"rel servingSizeField fl\">\\n';\r\n\r\n\t\t\t\t\t\tif (!$localSettings.hideTextboxArrows) {\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<div class=\"setter\">\\n';\r\n\t\t\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<a href=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" class=\"unitQuantityUp\" ';\r\n\t\t\t\t\t\t\t\t\tlocalNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\r\n\t\t\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<a href=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" class=\"unitQuantityDown\" ';\r\n\t\t\t\t\t\t\t\t\tlocalNutritionLabel += 'aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '</div><!-- closing class=\"setter\" -->\\n\\n';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttextboxClass = 'unitQuantityBox arrowsAreHidden';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<input type=\"text\" value=\"' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t\t'\" class=\"' + textboxClass + '\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\r\n\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<input type=\"hidden\" value=\"' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t\t'\" id=\"nixLabelBeforeQuantity\">\\n';\r\n\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '</div><!-- closing class=\"servingSizeField\" -->\\n\\n';\r\n\t\t\t\t\t} else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"servingUnitQuantity\" itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t'</div>\\n';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"servingUnit fl ' + unitAddedClass + '\">' +\r\n\t\t\t\t\t\t\t$localSettings.valueServingSizeUnit +\r\n\t\t\t\t\t\t($localSettings.legacyVersion == 1 ? '</div>\\n' : '');\r\n\r\n\t\t\t\t//end of => if ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null)\r\n\t\t\t\t} else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"servingUnitQuantity fl\" itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t'</div>\\n';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<' + ($localSettings.legacyVersion == 1 ? 'div' : 'span') + ' class=\"servingWeightGrams ' +\r\n\t\t\t\t\t\t\t($localSettings.legacyVersion == 1 ? 'fl' : '') + ' ' + gramsAddedClass + '\">' +\r\n\t\t\t\t\t\t\t'(<span itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\t\t\troundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t\t\t\t$localSettings.unitServingWeight +\r\n\t\t\t\t\t\t\t\t'</span>)\\n</' +\r\n\t\t\t\t\t\t($localSettings.legacyVersion == 1 ? 'div' : 'span') + '>\\n';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + ($localSettings.legacyVersion == 1 ? '' : '</div>\\n');\r\n\r\n\t\t\t\tlocalNutritionLabel += globalTab2 + '</div><!-- closing class=\"cf\" -->\\n\\n';\r\n\t\t\t//end of => if ($localSettings.originalServingUnitQuantity > 0) {\r\n\t\t\t} else {\r\n\t\t\t\tlocalServingSizeIsHidden = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ($localSettings.showServingsPerContainer) {\r\n\t\t\t\t//Serving per container\r\n\t\t\t\tif ($localSettings.valueServingPerContainer > 0) {\r\n\t\t\t\t\tlocalNutritionLabel += globalTab2 + '<div tabindex=\"0\">' + $localSettings.textServingsPerContainer + ' ' +\r\n\t\t\t\t\t\troundLoDash($localSettings.valueServingPerContainer, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t'</div>\\n';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlocalServingContainerIsHidden = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlocalServingContainerIsHidden = true;\r\n\t\t\t}\r\n\r\n\t\t\tlocalNutritionLabel += globalTab1 + '</div><!-- closing class=\"serving\" -->\\n\\n';\r\n\t\t}//end of => if ($localSettings.showServingUnitQuantity)\r\n\r\n\t\treturn {\r\n\t\t\tservingSizeIsHidden: localServingSizeIsHidden,\r\n\t\t\tservingContainerIsHidden: localServingContainerIsHidden,\r\n\t\t\tnutritionLabel: localNutritionLabel\r\n\t\t};\r\n\t}//end of => function sevingUnitQuantityHtmlLegacy($localSettings)\r\n\r\n\r\n\t//generate and return the html code for the calorie diets area\r\n\tfunction calorieDietHtmlLegacy($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab2 + '<table class=\"tblCalorieDiet\" aria-hidden=\"true\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<thead>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<th>&nbsp;</th>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<th>' + $localSettings.textCalories + '</th>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<th>' + $localSettings.valueCol1CalorieDiet + '</th>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<th>' + $localSettings.valueCol2CalorieDiet + '</th>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\tlocalNutritionLabel += globalTab3 + '</thead>\\n';\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<tbody>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textTotalFat + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryTotalFat + 'g</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryTotalFat + 'g</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>&nbsp;&nbsp; ' + $localSettings.textSatFat + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietarySatFat + 'g</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietarySatFat + 'g</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textCholesterol + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryCholesterol + 'mg</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryCholesterol + 'mg</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textSodium + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietarySodium + 'mg</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietarySodium + 'mg</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textPotassium + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textCalorieDietHtmlLegacyLessThan + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryPotassium + 'mg</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryPotassium + 'mg</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.textTotalCarb + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>&nbsp;</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1DietaryTotalCarb + 'g</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2DietaryTotalCarb + 'g</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '<tr>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>&nbsp;&nbsp; ' + $localSettings.textCalorieDietHtmlLegacyDietary + '</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>&nbsp;</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol1Dietary + 'g</td>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<td>' + $localSettings.valueCol2Dietary + 'g</td>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + '</tr>\\n';\r\n\t\t\tlocalNutritionLabel += globalTab3 + '</tbody>\\n';\r\n\t\treturn localNutritionLabel += globalTab2 + '</table>\\n';\r\n\t}//end of => function calorieDietHtmlLegacy($localSettings)\r\n\r\n\r\n\t//generate and return the html code for the ingredients area\r\n\tfunction ingredientsHtmlLegacy($localSettings) {\r\n\t\tlet localNutritionLabel = '';\r\n\t\tif (!$localSettings.hidePercentDailyValues) {\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<br/>\\n';\r\n\t\t}\r\n\r\n\t\tlocalNutritionLabel += globalTab3 + '<div class=\"' + ($localSettings.hidePercentDailyValues ? 'ingredientListDivHiddenDailyValues' : 'ingredientListDiv') + '\" tabindex=\"0\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab4 + '<strong class=\"active\" id=\"ingredientList\">' + $localSettings.ingredientLabel + '</strong>\\n';\r\n\t\t\tlocalNutritionLabel += globalTab4 + $localSettings.ingredientList + '\\n';\r\n\t\treturn localNutritionLabel += globalTab3 + '</div><!-- closing class=\"ingredientListDiv\" -->\\n\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the disclaimer area\r\n\tfunction disclaimerHtmlLegacy($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab3 + '<br/>\\n\\n';\r\n\t\tlocalNutritionLabel += globalTab3 + '<div id=\"calcDisclaimer\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab4 + '<span id=\"calcDisclaimerText\" tabindex=\"0\">' + $localSettings.valueDisclaimer + '</span>\\n';\r\n\t\tlocalNutritionLabel += globalTab3 + '</div><!-- closing class=\"calcDisclaimer\" -->\\n\\n';\r\n\t\treturn localNutritionLabel += globalTab3 + '<br/>\\n\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the bottom link area\r\n\tfunction bottomLinkHtmlLegacy($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab1 + '<div class=\"spaceAbove\"></div>\\n';\r\n\t\tlocalNutritionLabel += globalTab1 + '<a href=\"' + $localSettings.urlBottomLink + '\" target=\"_newSite\" class=\"homeLinkPrint\">' + $localSettings.nameBottomLink + '</a>\\n';\r\n\t\treturn localNutritionLabel += globalTab1 + '<div class=\"spaceBelow\"></div>\\n';\r\n\t}\r\n\r\n\r\n\t/*\r\n\t * generate and return the html code for these areas that share similar html format for the legacy version of the label:\r\n\t *    fat calories, calories, trans fat, poly fat, mono fat, sugars, sugar alcohol, proteins, vitamin a, vitamin c, calcium and iron\r\n\t * attributeDisplayType\r\n\t *    1 => <strong> + $localSettings[attributeText] + </strong> <span itemprop=\" + itemPropValue + \">\r\n\t *    2 => $localSettings[attributeText] + ' '\r\n\t *    3 => localExtraTab + $localSettings[attributeText] + <span itemprop=\"transFatContent\">;\r\n\t *    4 => globalTab1 + <div class=\"line indent\">;\r\n\t *    5 => a bit special format for vitamin a, vitamin c, calcium and iron\r\n\t */\r\n\tfunction generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t$localSettings, valueIndex, unitIndex, naIndex, attributeText, localTabValue, lineClass, attributeDisplayType, itemPropValue, localExtraTab, roundFunctionName\r\n\t) {\r\n\t\t//initialize the not applicable image icon in case we need to use it\r\n\t\t//attributeDisplayType == 5 => for vitamin a, vitamin c, calcium and iron\r\n\t\tlet localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' +\r\n\t\t\t$localSettings.textDataNotAvailable + '</font>\\n';\r\n\t\tlet localNutritionLabel = localTabValue + '<div class=\"' + lineClass + '\" tabindex=\"0\">';\r\n\r\n\t\tif (attributeDisplayType == 1) {\r\n\t\t\tlocalNutritionLabel += '<strong>' + $localSettings[attributeText] + '</strong> <span itemprop=\"' + itemPropValue + '\">';\r\n\t\t} else if (attributeDisplayType == 2) {\r\n\t\t\tlocalNutritionLabel += $localSettings[attributeText] + ' ';\r\n\t\t} else if (attributeDisplayType == 3) {\r\n\t\t\tlocalNutritionLabel += localExtraTab + $localSettings[attributeText] + ' <span itemprop=\"' + itemPropValue + '\">';\r\n\t\t} else if (attributeDisplayType == 4) {\r\n\t\t\tlocalNutritionLabel += $localSettings[attributeText] + ' <span itemprop=\"' + itemPropValue + '\">';\r\n\t\t} else if (attributeDisplayType == 5) {\r\n\t\t\tlocalNutritionLabel += localExtraTab + '<div class=\"dv\">';\r\n\t\t}\r\n\r\n\t\tlocalNutritionLabel += $localSettings[naIndex] ?\r\n\t\t\tlocalNaValue :\r\n\t\t\t(\r\n\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\teval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) :\r\n\t\t\t\t\troundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)\r\n\t\t\t) + $localSettings[unitIndex];\r\n\r\n\t\tif (attributeDisplayType == 1 || attributeDisplayType == 4) {\r\n\t\t\tlocalNutritionLabel += '</span></div>\\n';\r\n\t\t} else if (attributeDisplayType == 2) {\r\n\t\t\tlocalNutritionLabel += '</div>\\n';\r\n\t\t} else if (attributeDisplayType == 3) {\r\n\t\t\tlocalNutritionLabel += '\\n' + localTabValue + '</span></div>\\n';\r\n\t\t} else if (attributeDisplayType == 5) {\r\n\t\t\t\tlocalNutritionLabel += '</div>\\n';\r\n\t\t\t\tlocalNutritionLabel += localExtraTab + $localSettings[attributeText] + '\\n';\r\n\t\t\tlocalNutritionLabel += localTabValue + '</div>\\n';\r\n\t\t}\r\n\r\n\t\treturn localNutritionLabel;\r\n\t}//end of => function generateAttributeWithoutPercentageHtmlLegacy(**too many parameters**)\r\n\r\n\r\n\t/*\r\n\t * generate and return the html code for these areas that share similar html format: total fat, sat fat, cholesterol, sodium, total carb, fiber and potassium\r\n\t */\r\n\tfunction generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t$localSettings, valueIndex, dailyValueIndex, unitIndex, naIndex, attributeTexts, lineClass, itemPropValue, roundFunctionName, roundFunctionRuleName, boldName, showPercentageCode\r\n\t) {\r\n\t\t//initialize the not applicable image icon in case we need to use it\r\n\t\tlet localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' +\r\n\t\t\t$localSettings.textDataNotAvailable + '</font>\\n';\r\n\r\n\t\t//https://github.com/nutritionix/nutrition-label/wiki/How-the-Percent-Daily-Value-is-Computed\r\n\t\tlet localNutritionLabel = globalTab1 + '<div class=\"' + lineClass + '\" tabindex=\"0\">\\n';\r\n\r\n\t\tif (!$localSettings['hidePercentDailyValues'] && showPercentageCode) {\r\n\t\t\tlocalNutritionLabel += globalTab2 + '<div class=\"dv\" aria-hidden=\"true\">';\r\n\t\t\t\tlocalNutritionLabel += $localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\t'<strong>' +\r\n\t\t\t\t\t\troundLoDash(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t$localSettings.allowFDARounding ? eval(roundFunctionRuleName)($localSettings[valueIndex]) : $localSettings[valueIndex]\r\n\t\t\t\t\t\t\t\t) / (\r\n\t\t\t\t\t\t\t\t\t$localSettings[dailyValueIndex] == 0 ? 1 : $localSettings[dailyValueIndex] * roundLoDash(parseFloat($localSettings.calorieIntake) / 2000, 2) //the 2nd part is the calorie intake\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) * 100,\r\n\t\t\t\t\t\t\t$localSettings.decimalPlacesForDailyValues\r\n\t\t\t\t\t\t) +\r\n\t\t\t\t\t'</strong>%';\r\n\t\t\tlocalNutritionLabel += '</div>\\n';\r\n\t\t}\r\n\r\n\t\tif (boldName) {\r\n\t\t\tlocalNutritionLabel += globalTab2 + '<strong>' + $localSettings[attributeTexts] + '</strong> <span itemprop=\"' + itemPropValue + '\">';\r\n\t\t} else {\r\n\t\t\tlocalNutritionLabel += globalTab2 + $localSettings[attributeTexts] + ' <span itemprop=\"' + itemPropValue + '\">';\r\n\t\t}\r\n\r\n\t\tlocalNutritionLabel += (\r\n\t\t\t$localSettings[naIndex] ?\r\n\t\t\t\tlocalNaValue :\r\n\t\t\t\t(\r\n\t\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\t\teval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) :\r\n\t\t\t\t\t\troundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)\r\n\t\t\t\t) + $localSettings[unitIndex]\r\n\t\t) + '\\n';\r\n\t\treturn localNutritionLabel += globalTab1 + '</span></div>\\n';\r\n\t}//end of => function generateAttributeWithPercentageHtmlLegacy(**too many parameters**)\r\n\r\n\r\n\t/*\r\n\t * generate and return the html code for these areas that share similar html format for the 2018 version of the label:\r\n\t *    calories, total fat, saturated fat, trans fat, poly fat, mono fat, cholesterol, sodium, total carb, fibers, sugars, added sugar, sugar alcohol, proteins\r\n\t */\r\n\tfunction generateAttributeHtml2018Version(\r\n\t\t\t$localSettings, valueIndex, unitIndex, naIndex, attributeText, itemPropValue, topDivClass, showPercentageCode, roundFunctionName, roundFunctionRuleName, labelClass, valueClass, dailyValueIndex\r\n\t) {\r\n\t\t//initialize the not applicable image icon in case we need to use it\r\n\t\tlet localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' +\r\n\t\t\t$localSettings.textDataNotAvailable + '</font>\\n';\r\n\t\tlet localNutritionLabel = globalTab1 + '<div class=\"' + topDivClass + '\" tabindex=\"0\">\\n';\r\n\r\n\t\tif (showPercentageCode && !$localSettings['hidePercentDailyValues']) {\r\n\t\t\tlocalNutritionLabel += globalTab2 + '<span class=\"nf-highlight nf-pr\" aria-hidden=\"true\">';\r\n\t\t\t\t//https://github.com/nutritionix/nutrition-label/wiki/How-the-Percent-Daily-Value-is-Computed\r\n\t\t\t\tlocalNutritionLabel += $localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\troundLoDash(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t$localSettings.allowFDARounding ? eval(roundFunctionRuleName)($localSettings[valueIndex]) : $localSettings[valueIndex]\r\n\t\t\t\t\t\t\t) / (\r\n\t\t\t\t\t\t\t\t$localSettings[dailyValueIndex] == 0 ? 1 : $localSettings[dailyValueIndex] * roundLoDash(parseFloat($localSettings.calorieIntake) / 2000, 2)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) * 100,\r\n\t\t\t\t\t\t$localSettings.decimalPlacesForDailyValues\r\n\t\t\t\t\t) + '%';\r\n\t\t\tlocalNutritionLabel += '</span>\\n';\r\n\t\t}\r\n\r\n\t\t//this is for everything else\r\n\t\tif (valueIndex != 'valueAddedSugars') {\r\n\t\t\tlocalNutritionLabel += globalTab2 + '<span class=\"' + labelClass + '\">';\r\n\t\t\t\tlocalNutritionLabel += $localSettings[attributeText];\r\n\t\t\tlocalNutritionLabel += '</span>\\n';\r\n\r\n\t\t\tlocalNutritionLabel += globalTab2 + '<span class=\"' + valueClass + '\" itemprop=\"' + itemPropValue + '\">';\r\n\t\t\t\tlocalNutritionLabel += $localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\t\t\teval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) :\r\n\t\t\t\t\t\t\troundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)\r\n\t\t\t\t\t) + $localSettings[unitIndex];\r\n\t\t\tlocalNutritionLabel += '</span>\\n';\r\n\t\t//special case for added sugars\r\n\t\t} else {\r\n\t\t\tlocalNutritionLabel += globalTab2 + '<span class=\"' + labelClass + '\">\\n';\r\n\t\t\t\tlocalNutritionLabel += $localSettings['textAddedSugars1'] + '\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab3 + '<span class=\"' + valueClass + '\" itemprop=\"' + itemPropValue + '\">';\r\n\t\t\t\t\tlocalNutritionLabel += $localSettings[naIndex] ?\r\n\t\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\t\t\t\teval(roundFunctionName)($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition) :\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForNutrition)\r\n\t\t\t\t\t\t) + $localSettings[unitIndex];\r\n\t\t\t\tlocalNutritionLabel += '</span>\\n';\r\n\t\t\t\tlocalNutritionLabel += $localSettings['textAddedSugars2'];\r\n\t\t\tlocalNutritionLabel += '</span>\\n';\r\n\t\t}\r\n\r\n\t\treturn localNutritionLabel += globalTab1 + '</div>\\n';\r\n\t}//end of => function generateAttributeHtml2018Version(**too many parameters**)\r\n\r\n\r\n\t//generate and return the html code for the ingredients area\r\n\tfunction ingredientsHtml2018Version($localSettings) {\r\n\t\tlet localNutritionLabel = '';\r\n\t\tif (!$localSettings.hidePercentDailyValues) {\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<br/>\\n\\n';\r\n\t\t}\r\n\r\n\t\tlocalNutritionLabel += globalTab3 + '<div class=\"' + ($localSettings.hidePercentDailyValues ? 'nf-ingredientListDivHiddenDailyValues' : 'nf-ingredientListDiv') + '\" tabindex=\"0\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab4 + '<strong class=\"active\" id=\"nf-ingredientList\">' + $localSettings.ingredientLabel + '</strong>\\n';\r\n\t\t\tlocalNutritionLabel += globalTab4 + $localSettings.ingredientList + '\\n';\r\n\t\treturn localNutritionLabel += globalTab3 + '</div><!-- closing class=\"nf-ingredientListDiv\" -->\\n\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the disclaimer area\r\n\tfunction disclaimerHtml2018Version($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab3 + '<br/>\\n\\n';\r\n\t\tlocalNutritionLabel += globalTab3 + '<div id=\"nf-calcDisclaimer\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab4 + '<span id=\"nf-calcDisclaimerText\" tabindex=\"0\">' + $localSettings.valueDisclaimer + '</span>\\n';\r\n\t\tlocalNutritionLabel += globalTab3 + '</div><!-- closing class=\"nf-calcDisclaimer\" -->\\n\\n';\r\n\t\treturn localNutritionLabel += globalTab3 + '<br/>\\n\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the bottom link area\r\n\tfunction bottomLinkHtml2018Version($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab1 + '<div class=\"nf-spaceAbove\"></div>\\n';\r\n\t\tlocalNutritionLabel += globalTab1 + '<a href=\"' + $localSettings.urlBottomLink + '\" target=\"_newSite\" class=\"nf-homeLinkPrint\">' + $localSettings.nameBottomLink + '</a>\\n';\r\n\t\treturn localNutritionLabel += globalTab1 + '<div class=\"nf-spaceBelow\"></div>\\n';\r\n\t}\r\n\r\n\r\n\t/*\r\n\t * generate and return the html code for these areas that share similar html format: vitamin d, calcium, iron and potassium\r\n\t */\r\n\tfunction generate2018HtmlAndComputeValueGivenThePercentage(\r\n\t\t\t$localSettings, valueIndex, dailyValueIndex, unitIndex_base, unitIndex_percent, naIndex, attributeTexts, showPercentageCode, lastRow\r\n\t) {\r\n\t\t//initialize the not applicable image icon in case we need to use it\r\n\t\tlet localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' +\r\n\t\t\t$localSettings.textDataNotAvailable + '</font>\\n';\r\n\t\tlet localNutritionLabel = '<div class=\"nf-vitamin-column' + (lastRow ? ' nf-vitamin-column-last' : '') + '\" tabindex=\"0\">\\n';\r\n\t\t\tlocalNutritionLabel += $localSettings[attributeTexts] + ' ';\r\n\t\t\tlocalNutritionLabel += (\r\n\t\t\t\t$localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\troundLoDash(\r\n\t\t\t\t\t\t\t//percentage / 100 * daily value\r\n\t\t\t\t\t\t\t($localSettings[valueIndex] / 100) * $localSettings[dailyValueIndex],\r\n\t\t\t\t\t\t\t$localSettings.decimalPlacesForDailyValues\r\n\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t$localSettings[unitIndex_base] +\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tshowPercentageCode ?\r\n\t\t\t\t\t\t\t\t' <span class=\"nf-pr\" aria-hidden=\"true\">' +\r\n\t\t\t\t\t\t\t\t\troundLoDash($localSettings[valueIndex], $localSettings.decimalPlacesForDailyValues) + $localSettings[unitIndex_percent] +\r\n\t\t\t\t\t\t\t\t'</span>' :\r\n\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t) + '\\n';\r\n\t\treturn localNutritionLabel += '</div>\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the item area\r\n\tfunction itemNameHtml2018($localSettings) {\r\n\t\tlet itemNameClass = '';\r\n\t\tlet localNutritionLabel = '';\r\n\r\n\t\tif ($localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\tif (\r\n\t\t\t\t\t($localSettings.valueServingSizeUnit === null || $localSettings.valueServingSizeUnit == '') ||\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== '' &&\r\n\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== null &&\r\n\t\t\t\t\t\t$localSettings.originalServingUnitQuantity <= 0\r\n\t\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tlet hideArrowsClass = '';\r\n\t\t\t\tlet textboxClass = 'nf-unitQuantityBox nf-modifier-field';\r\n\t\t\t\tif (!$localSettings.hideTextboxArrows) {\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<div class=\"nf-arrows\">\\n';\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<div class=\"nf-unitQuantityUp nf-arrow-up\" aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" ';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '<div class=\"nf-unitQuantityDown nf-arrow-down\" aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" ';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + '</div><!-- closing class=\"nf-arrows v1\" -->\\n\\n';\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttextboxClass = 'nf-unitQuantityBox nf-modifier-field nf-arrowsAreHidden';\r\n\t\t\t\t\thideArrowsClass = 'nf-fixed-serving ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<input type=\"text\" value=\"' +\r\n\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t'\" class=\"' + textboxClass + '\" data-role=\"none\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\r\n\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + '<input type=\"hidden\" value=\"' +\r\n\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t'\" id=\"nf-nixLabelBeforeQuantity\">\\n\\n';\r\n\r\n\t\t\t\titemNameClass = hideArrowsClass;\r\n\t\t\t} else if (!$localSettings.showServingUnitQuantity) {\r\n\t\t\t\titemNameClass += 'no-indent';\r\n\t\t\t}\r\n\t\t//end of => if ($localSettings.showServingUnitQuantityTextbox)\r\n\t\t} else {\r\n\t\t\titemNameClass += 'no-indent';\r\n\t\t}\r\n\r\n\t\tlocalNutritionLabel += globalTab3 + '<div class=\"nf-item-name ' + itemNameClass + '\" tabindex=\"0\">\\n';\r\n\r\n\t\t\tif (\r\n\t\t\t\t\t$localSettings.showServingUnitQuantity &&\r\n\t\t\t\t\t$localSettings.originalServingUnitQuantity > 0 &&\r\n\t\t\t\t\t$localSettings.valueServingSizeUnit !== '' &&\r\n\t\t\t\t\t$localSettings.valueServingSizeUnit !== null\r\n\t\t\t) {\r\n\t\t\t\tlocalNutritionLabel += globalTab4 + $localSettings.valueServingSizeUnit + '\\n';\r\n\r\n\t\t\t\tif ($localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\r\n\t\t\t\t\tlocalNutritionLabel += globalTab4 + '(<span itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\troundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t$localSettings.unitServingWeight +\r\n\t\t\t\t\t'</span>)\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlocalNutritionLabel += globalTab4 + '<div>\\n';\r\n\t\t\t\tlocalNutritionLabel += globalTab5 + $localSettings.itemName + '\\n';\r\n\t\t\t\tif ($localSettings.showBrandName && $localSettings.brandName !== null && $localSettings.brandName != '') {\r\n\t\t\t\t\tlocalNutritionLabel += ' - ' + $localSettings.brandName;\r\n\t\t\t\t}\r\n\t\t\tlocalNutritionLabel += '\\n' + globalTab4 + '</div>\\n';\r\n\t\treturn localNutritionLabel += globalTab3 + '</div>\\n';\r\n\t}//end of => function itemNameHtml2018($localSettings)\r\n\r\n\r\n\t//generate and return the html code for the serving unit quantity area\r\n\tfunction sevingUnitQuantityHtml2018($localSettings) {\r\n\t\tlet localServingSizeIsHidden = false;\r\n\t\tlet localServingContainerIsHidden = false;\r\n\t\tlet localNutritionLabel = '';\r\n\r\n\t\tif ($localSettings.showServingUnitQuantity) {\r\n\t\t\tif ($localSettings.originalServingUnitQuantity > 0) {\r\n\t\t\t\tlet servingSizeDivAlreadyClosed = false;\r\n\r\n\t\t\t\tlocalNutritionLabel += globalTab3 + '<div tabIndex=\"0\" class=\"nf-line\"><!-- opening for serving size div -->\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab4 + $localSettings.textServingSize;\r\n\r\n\t\t\t\t\tlocalNutritionLabel += $localSettings.showServingUnitQuantityTextbox ?\r\n\t\t\t\t\t\t'' :\r\n\t\t\t\t\t\t' <span itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t' </span>\\n';\r\n\r\n\t\t\t\tif ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t$localSettings.showServingUnitQuantityTextbox &&\r\n\t\t\t\t\t\t\t$localSettings.valueServingSizeUnit !== null &&\r\n\t\t\t\t\t\t\t$localSettings.valueServingSizeUnit != ''\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet textboxClass = 'nf-unitQuantityBox nf-modifier-field';\r\n\r\n\t\t\t\t\t\t//close the serving size div\r\n\t\t\t\t\t\t//this is needed so cases like this will be shown properly\r\n\t\t\t\t\t\tservingSizeDivAlreadyClosed = true;\r\n\t\t\t\t\t\tlocalNutritionLabel += '\\n' + globalTab3 + '</div><!-- closing for serving size div -->\\n\\n';\r\n\r\n\t\t\t\t\t\tif (!$localSettings.hideTextboxArrows) {\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<div class=\"nf-arrows\"><!-- opening class=\"nf-arrows\" -->\\n';\r\n\t\t\t\t\t\t\t\tlocalNutritionLabel += globalTab6 + '<div class=\"nf-unitQuantityUp nf-arrow-up\" aria-label=\"' + $localSettings.textAriaLabelIncreaseQuantityArrow + '\" ';\r\n\t\t\t\t\t\t\t\t\tlocalNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\r\n\t\t\t\t\t\t\t\tlocalNutritionLabel += globalTab6 + '<div class=\"nf-unitQuantityDown nf-arrow-down\" aria-label=\"' + $localSettings.textAriaLabelDecreaseQuantityArrow + '\" ';\r\n\t\t\t\t\t\t\t\t\tlocalNutritionLabel += 'rel=\"nofollow\" tabindex=\"0\"></div>\\n';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '</div><!-- closing class=\"nf-arrows v2\" -->\\n\\n';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttextboxClass = 'nf-unitQuantityBox nf-modifier-field nf-arrowsAreHidden';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<input type=\"text\" data-role=\"none\" value=\"' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t\t'\" class=\"' + textboxClass + '\" aria-label=\"' + $localSettings.textAriaLabelChangeQuantityTextbox + '\">\\n';\r\n\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<input type=\"hidden\" value=\"' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.valueServingUnitQuantity, $localSettings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t\t'\" id=\"nf-nixLabelBeforeQuantity\">\\n\\n';\r\n\t\t\t\t\t} else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t\t\t\tlocalNutritionLabel += ' <span itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t\t'</span>\\n';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!$localSettings.showItemName) {\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '<div class=\"nf-item-name\" tabindex=\"0\">\\n';\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab6 + $localSettings.valueServingSizeUnit + '\\n';\r\n\r\n\t\t\t\t\t\tif ($localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\r\n\t\t\t\t\t\t\tlocalNutritionLabel += globalTab6 + '(' +\r\n\t\t\t\t\t\t\t\troundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t\t\t$localSettings.unitServingWeight +\r\n\t\t\t\t\t\t\t')\\n';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab5 + '</div>\\n';\r\n\t\t\t\t\t}\r\n\t\t\t\t//end of => if ($localSettings.valueServingSizeUnit !== '' && $localSettings.valueServingSizeUnit !== null)\r\n\t\t\t\t} else if ($localSettings.originalServingUnitQuantity > 0 && $localSettings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t\t\tlocalNutritionLabel += ' <span itemprop=\"servingSize\">' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.originalServingUnitQuantity, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t'</span>\\n';\r\n\r\n\t\t\t\t\tif (($localSettings.valueServingSizeUnit == '' || $localSettings.valueServingSizeUnit === null) && $localSettings.showServingWeightGrams && $localSettings.valueServingWeightGrams > 0) {\r\n\t\t\t\t\t\tlocalNutritionLabel += globalTab4 + '(' +\r\n\t\t\t\t\t\t\troundLoDash($localSettings.valueServingWeightGrams, $localSettings.decimalPlacesForNutrition) +\r\n\t\t\t\t\t\t\t$localSettings.unitServingWeight +\r\n\t\t\t\t\t\t')\\n';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!servingSizeDivAlreadyClosed) {\r\n\t\t\t\t\tlocalNutritionLabel += globalTab3 + '</div><!-- closing for serving size div -->\\n\\n';\r\n\t\t\t\t}\r\n\t\t\t//end of => if ($localSettings.originalServingUnitQuantity > 0)\r\n\t\t\t} else {\r\n\t\t\t\tlocalServingSizeIsHidden = true;\r\n\t\t\t}\r\n\t\t//end of => if ($localSettings.showServingUnitQuantity)\r\n\t\t} else if (!$localSettings.showServingUnitQuantity && $localSettings.showOnlyTheTextServingSize) {\r\n\t\t\t\tlocalNutritionLabel += globalTab3 + '<div tabIndex=\"0\" class=\"nf-line\">\\n';\r\n\t\t\t\t\tlocalNutritionLabel += globalTab4 + $localSettings.textServingSize;\r\n\t\t\t\tlocalNutritionLabel += globalTab3 + '</div>\\n\\n';\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tservingSizeIsHidden: localServingSizeIsHidden,\r\n\t\t\tservingContainerIsHidden: localServingContainerIsHidden,\r\n\t\t\tnutritionLabel: localNutritionLabel\r\n\t\t};\r\n\t}//end of => function sevingUnitQuantityHtml2018($localSettings)\r\n\r\n\r\n\t/*\r\n\t * generate and return the html code for these areas that share similar html format: total fat, sat fat, cholesterol, sodium, total carb, fiber and potassium\r\n\t */\r\n\tfunction generateAttributeForUK(\r\n\t\t\t$localSettings, valueIndex, dailyValueIndex, unitIndex, naIndex, attributeTexts, itemPropValue, roundFunctionName, roundFunctionRuleName, showPercentageCode, indentedName\r\n\t) {\r\n\t\t//initialize the not applicable image icon in case we need to use it\r\n\t\tlet localNaValue = '<font class=\"notApplicable\" aria-hidden=\"true\">' + $localSettings.textNotApplicable + '&nbsp;</font><font class=\"sr-only\">' +\r\n\t\t\t$localSettings.textDataNotAvailable + '</font>\\n';\r\n\t\tlet localNutritionLabel = globalTab2 + '<tr tabindex=\"0\">\\n';\r\n\t\tlet nameClass = '';\r\n\t\tlet nutritionValueLocal = $localSettings[valueIndex];\r\n\r\n\t\t\tif (indentedName) {\r\n\t\t\t\tnameClass = 'uk_nf-indent';\r\n\t\t\t}\r\n\r\n\t\t\t//value on the name column\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<td class=\"' + nameClass + '\">';\r\n\t\t\tif (String(attributeTexts) != '') {\r\n\t\t\t\tlocalNutritionLabel += $localSettings[attributeTexts];\r\n\t\t\t}\r\n\t\t\tlocalNutritionLabel += '</td>\\n';\r\n\r\n\r\n\t\t\tif (valueIndex == 'valueCalories' && unitIndex == 'unitEnergy_kj') {\r\n\t\t\t\tnutritionValueLocal *= 4.184;\r\n\t\t\t} else if (valueIndex == 'valueSodium') {\r\n\t\t\t\tnutritionValueLocal *= 0.0025;\r\n\t\t\t}\r\n\r\n\t\t\t//value on the second column (per 100 gram column)\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<td>';\r\n\t\t\tlocalNutritionLabel += (\r\n\t\t\t\t$localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\tvalueIndex == 'valueCalories' ?\r\n\t\t\t\t\t\t\t\t\teval(roundFunctionName)(nutritionValueLocal / $localSettings.valueServingWeightGrams * 100, 1) :\r\n\t\t\t\t\t\t\t\t\teval(roundFunctionName)(nutritionValueLocal / $localSettings.valueServingWeightGrams * 100)\r\n\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\troundLoDash((nutritionValueLocal / $localSettings.valueServingWeightGrams * 100), $localSettings.decimalPlacesForNutrition)\r\n\t\t\t\t\t) + $localSettings[unitIndex]\r\n\t\t\t);\r\n\t\t\tlocalNutritionLabel += '</td>\\n';\r\n\r\n\t\t\t//value on the third column (actual value of the nutrition)\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<td itemprop=\"' + itemPropValue + '\">';\r\n\t\t\tlocalNutritionLabel += (\r\n\t\t\t\t$localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\tvalueIndex == 'valueCalories' ?\r\n\t\t\t\t\t\t\t\t\teval(roundFunctionName)(nutritionValueLocal, 1) :\r\n\t\t\t\t\t\t\t\t\teval(roundFunctionName)(nutritionValueLocal)\r\n\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\troundLoDash(nutritionValueLocal, $localSettings.decimalPlacesForNutrition)\r\n\t\t\t\t\t) + $localSettings[unitIndex]\r\n\t\t\t);\r\n\t\t\tlocalNutritionLabel += '</td>\\n';\r\n\r\n\t\t\t//value on the percentage column (4th)\r\n\t\t\tlocalNutritionLabel += globalTab3 + '<td aria-hidden=\"true\">';\r\n\r\n\t\t\tif (!$localSettings['hidePercentDailyValues'] && showPercentageCode) {\r\n\t\t\t\t//https://github.com/nutritionix/nutrition-label/wiki/How-the-Percent-Daily-Value-is-Computed\r\n\t\t\t\tlocalNutritionLabel += $localSettings[naIndex] ?\r\n\t\t\t\t\tlocalNaValue :\r\n\t\t\t\t\troundLoDash(\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t$localSettings.allowFDARounding ?\r\n\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\tvalueIndex == 'valueCalories' ?\r\n\t\t\t\t\t\t\t\t\t\t\teval(roundFunctionRuleName)(nutritionValueLocal, 1) :\r\n\t\t\t\t\t\t\t\t\t\t\teval(roundFunctionRuleName)(nutritionValueLocal)\r\n\t\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\tnutritionValueLocal\r\n\t\t\t\t\t\t\t) / (\r\n\t\t\t\t\t\t\t\t$localSettings[dailyValueIndex] == 0 ?\r\n\t\t\t\t\t\t\t\t\t1 :\r\n\t\t\t\t\t\t\t\t\t$localSettings[dailyValueIndex] * roundLoDash( (parseFloat($localSettings.calorieIntake) / 2000), 2 ) //the 2nd part is the calorie intake\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) * 100,\r\n\t\t\t\t\t\t$localSettings.decimalPlacesForDailyValues\r\n\t\t\t\t\t) + '%';\r\n\t\t\t}\r\n\r\n\t\treturn localNutritionLabel + '</td>\\n' + globalTab2 + '</tr>\\n';\r\n\t}//end of => function generateAttributeForUK(**too many parameters**)\r\n\r\n\r\n\t//generate and return the html code for the reference intake area\r\n\tfunction referenceIntakeHtmlUKVersion($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab6 + '<div class=\"referenceIntake\" tabindex=\"0\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab7 + '* ' + $localSettings.textUKReferenceIntake + ' ';\r\n\t\t\t//the kj value on the reference intake is rounded to the nearest hundred\r\n\t\t\tlocalNutritionLabel += '(' + roundToNearestNum($localSettings.calorieIntake * 4.184, 100) + $localSettings.unitEnergy_kj;\r\n\t\t\t\tlocalNutritionLabel += '/' + $localSettings.calorieIntake + $localSettings.unitEnergy_kcal + ')\\n';\r\n\t\treturn localNutritionLabel += globalTab6 + '</div>\\n<div class=\"uk_nf-spaceBelow\"></div>\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the ingredients area\r\n\tfunction ingredientsHtmlUKVersion($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab6 + '<div class=\"uk_nf-ingredientListDiv\" tabindex=\"0\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab7 + '<strong class=\"active\" id=\"uk_nf-ingredient-statement\">' + $localSettings.ingredientLabel + '</strong> ' + $localSettings.ingredientList + '\\n';\r\n\t\treturn localNutritionLabel += globalTab6 + '</div><br/><!-- closing class=\"uk_nf-ingredientListDiv\" -->\\n\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the disclaimer area\r\n\tfunction disclaimerHtmlUKVersion($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab6 + '<div id=\"uk_nf-calcDisclaimer\">\\n';\r\n\t\t\tlocalNutritionLabel += globalTab7 + '<span id=\"uk_nf-disclaimer\" tabindex=\"0\">' + $localSettings.valueDisclaimer + '</span>\\n';\r\n\t\treturn localNutritionLabel += globalTab6 + '</div><br/><!-- closing id=\"uk_nf-calcDisclaimer\" -->\\n\\n';\r\n\t}\r\n\r\n\r\n\t//generate and return the html code for the bottom link area\r\n\tfunction bottomLinkHtmlUKVersion($localSettings) {\r\n\t\tlet localNutritionLabel = globalTab6 + '<div class=\"uk_nf-spaceAbove\"></div>\\n';\r\n\t\tlocalNutritionLabel += globalTab6 + '<a href=\"' + $localSettings.urlBottomLink + '\" target=\"_newSite\" class=\"uk_nf-homeLinkPrint\">' + $localSettings.nameBottomLink + '</a>\\n';\r\n\t\treturn localNutritionLabel += globalTab6 + '<div class=\"uk_nf-spaceBelow\"></div>\\n';\r\n\t}\r\n\r\n\r\n\t//based on https://github.com/lodash/lodash/blob/master/.internal/createRound.js\r\n\t/**\r\n\t * Creates a function like `round`.\r\n\t *\r\n\t * @private\r\n\t * @param {string} methodName The name of the `Math` method to use when rounding.\r\n\t * @returns {Function} Returns the new round function.\r\n\t */\r\n\tfunction createRound(methodName) {\r\n\t\tconst func = Math[methodName];\r\n\t\treturn (number, precision) => {\r\n\t\t\tprecision = precision === null ? 0 : ( precision >= 0 ? Math.min(precision, 292) : Math.max(precision, -292) );\r\n\t\t\tif (precision) {\r\n\t\t\t\t// Shift with exponential notation to avoid floating-point issues.\r\n\t\t\t\t// See [MDN](https://mdn.io/round#Examples) for more details.\r\n\t\t\t\tlet pair = `${number}e`.split('e');\r\n\t\t\t\tconst value = func(`${pair[0]}e${+pair[1] + precision}`);\r\n\r\n\t\t\t\tpair = `${value}e`.split('e');\r\n\t\t\t\treturn +`${pair[0]}e${+pair[1] - precision}`;\r\n\t\t\t}\r\n\r\n\t\t\treturn func(number);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//based on https://github.com/lodash/lodash/blob/master/round.js\r\n\t/**\r\n\t * Computes `number` rounded to `precision`.\r\n\t *\r\n\t * @since 3.10.0\r\n\t * @category Math\r\n\t * @param {number} number The number to round.\r\n\t * @param {number} [precision=0] The precision to round to.\r\n\t * @returns {number} Returns the rounded number.\r\n\t * @example\r\n\t *\r\n\t * round(4.006)\r\n\t * // => 4\r\n\t *\r\n\t * round(4.006, 2)\r\n\t * // => 4.01\r\n\t *\r\n\t * round(4060, -2)\r\n\t * // => 4100\r\n\t */\r\n\tconst roundLoDash = createRound('round');\r\n\r\n\r\n\tNutritionLabel.prototype = {\r\n\t\tgenerateLegacy: function() {\r\n\t\t\t//this is the function that returns the html code for the nutrition label based on the settings that is supplied by the user\r\n\t\t\tlet $this = this;\r\n\t\t\tlet borderCSS = '';\r\n\t\t\tlet nutritionLabel = '';\r\n\t\t\tlet sevingUnitQuantityHtmlLegacyResult = sevingUnitQuantityHtmlLegacy($this.settings);\r\n\t\t\tlet servingSizeIsHidden = sevingUnitQuantityHtmlLegacyResult.servingSizeIsHidden;\r\n\t\t\tlet servingContainerIsHidden = sevingUnitQuantityHtmlLegacyResult.servingContainerIsHidden;\r\n\t\t\tlet useLine = 'addedPadding';\r\n\t\t\tlet useLineAgain = 'addedPadding';\r\n\r\n\t\t\t//return the plugin incase it has already been created\r\n\t\t\tif ($this.nutritionLabel) {\r\n\t\t\t\treturn $this.nutritionLabel;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.hideNotApplicableValues) {\r\n\t\t\t\t$this.settings.showCalories = $this.settings.naCalories ? false : $this.settings.showCalories;\r\n\t\t\t\t$this.settings.showFatCalories = $this.settings.naFatCalories ? false : $this.settings.showFatCalories;\r\n\t\t\t\t$this.settings.showTotalFat = $this.settings.naTotalFat ? false : $this.settings.showTotalFat;\r\n\t\t\t\t$this.settings.showSatFat = $this.settings.naSatFat ? false : $this.settings.showSatFat;\r\n\t\t\t\t$this.settings.showTransFat = $this.settings.naTransFat ? false : $this.settings.showTransFat;\r\n\t\t\t\t$this.settings.showPolyFat = $this.settings.naPolyFat ? false : $this.settings.showPolyFat;\r\n\t\t\t\t$this.settings.showMonoFat = $this.settings.naMonoFat ? false : $this.settings.showMonoFat;\r\n\t\t\t\t$this.settings.showCholesterol = $this.settings.naCholesterol ? false : $this.settings.showCholesterol;\r\n\t\t\t\t$this.settings.showSodium = $this.settings.naSodium ? false : $this.settings.showSodium;\r\n\t\t\t\t$this.settings.showPotassium = $this.settings.naPotassium ? false : $this.settings.showPotassium;\r\n\t\t\t\t$this.settings.showTotalCarb = $this.settings.naTotalCarb ? false : $this.settings.showTotalCarb;\r\n\t\t\t\t$this.settings.showFibers = $this.settings.naFibers ? false : $this.settings.showFibers;\r\n\t\t\t\t$this.settings.showSugars = $this.settings.naSugars ? false : $this.settings.showSugars;\r\n\t\t\t\t$this.settings.showSugarAlcohol = $this.settings.naSugarAlcohol ? false : $this.settings.showSugarAlcohol;\r\n\t\t\t\t$this.settings.showProteins = $this.settings.naProteins ? false : $this.settings.showProteins;\r\n\t\t\t\t$this.settings.showVitaminA = $this.settings.naVitaminA ? false : $this.settings.showVitaminA;\r\n\t\t\t\t$this.settings.showVitaminC = $this.settings.naVitaminC ? false : $this.settings.showVitaminC;\r\n\t\t\t\t$this.settings.showCalcium = $this.settings.naCalcium ? false : $this.settings.showCalcium;\r\n\t\t\t\t$this.settings.showIron = $this.settings.naIron ? false : $this.settings.showIron;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.hidePercentDailyValues) {\r\n\t\t\t\t$this.settings.showVitaminA = false;\r\n\t\t\t\t$this.settings.showVitaminC = false;\r\n\t\t\t\t$this.settings.showCalcium = false;\r\n\t\t\t\t$this.settings.showIron = false;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.allowNoBorder) {\r\n\t\t\t\tborderCSS = 'border: 0;';\r\n\t\t\t}\r\n\r\n\t\t\t//creates the html code for the label based on the settings\r\n\t\t\tnutritionLabel = '<div itemscope itemtype=\"http://schema.org/NutritionInformation\" class=\"nutritionLabel\" role=\"region\" aria-label=\"nutrition label\" style=\"' + borderCSS;\r\n\t\t\tif (!$this.settings.allowCustomWidth) {\r\n\t\t\t\tnutritionLabel += ' width: ' + $this.settings.width + 'px;\">\\n';\r\n\t\t\t} else {\r\n\t\t\t\tnutritionLabel += ' width: ' + $this.settings.widthCustom + ';\">\\n';\r\n\t\t\t}\r\n\r\n\t\t\tnutritionLabel += globalTab1 + '<div class=\"title\" tabindex=\"0\">' + $this.settings.textNutritionFacts + '</div>\\n';\r\n\r\n\t\t\tif ($this.settings.showItemName) {\r\n\t\t\t\tnutritionLabel += itemNameHtmlLegacy($this.settings);\r\n\t\t\t}\r\n\r\n\t\t\tnutritionLabel += sevingUnitQuantityHtmlLegacyResult.nutritionLabel;\r\n\r\n\t\t\tif (\r\n\t\t\t\t\t(!$this.settings.showItemName && !$this.settings.showServingUnitQuantity) ||\r\n\t\t\t\t\t(!$this.settings.showItemName && servingSizeIsHidden && servingContainerIsHidden)\r\n\t\t\t) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"headerSpacer\"></div>\\n';\r\n\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"bar1\"></div>\\n';\r\n\r\n\t\t\tif ($this.settings.showAmountPerServing) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"addedPadding m\" tabindex=\"0\">';\r\n\t\t\t\t\tnutritionLabel += '<strong>' + $this.settings.textAmountPerServing + '</strong>';\r\n\t\t\t\tnutritionLabel += '</div>\\n';\r\n\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"' + ($this.settings.showAmountPerServing ? 'line' : 'addedPadding') + '\">\\n';\r\n\r\n\t\t\t\tif ($this.settings.showFatCalories) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t\t//$localSettings valueIndex          unitIndex          naIndex          attributeText     localTabValue lineClass attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t\t$this.settings, 'valueFatCalories', 'unitFatCalories', 'naFatCalories', 'textFatCalories', globalTab2,  'fr',      2,                   '',           '',          'roundCalories'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showCalories) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t\t$this.settings, 'valueCalories', 'unitCalories', 'naCalories', 'textCalories', globalTab2,   '',       1,                  'calories',    '',          'roundCalories'\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if ($this.settings.showFatCalories) {\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '<div>&nbsp;</div>\\n';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '</div>\\n';\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"bar2\"></div>\\n';\r\n\r\n\t\t\tif (!$this.settings.hidePercentDailyValues) {\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"addedPadding ar\">';\r\n\t\t\t\t\tnutritionLabel += '<strong>% ' + $this.settings.textDailyValues + '<sup>*</sup></strong>';\r\n\t\t\t\tnutritionLabel += '</div>\\n';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showTotalFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex       dailyValueIndex       unitIndex       naIndex       attributeTexts  lineClass itemPropValue roundFunctionName roundFunctionRuleName boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueTotalFat', 'dailyValueTotalFat', 'unitTotalFat', 'naTotalFat', 'textTotalFat',  useLine, 'fatContent', 'roundFat',       'roundFatRule',        true,    $this.settings.showDailyTotalFat\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSatFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex     dailyValueIndex     unitIndex     naIndex     attributeTexts lineClass             itemPropValue          roundFunctionName roundFunctionRuleName boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueSatFat', 'dailyValueSatFat', 'unitSatFat', 'naSatFat', 'textSatFat',   useLine + ' indent', 'saturatedFatContent', 'roundFat',       'roundFatRule',        false,   $this.settings.showDailySatFat\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showTransFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass            attributeDisplayType itemPropValue     localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueTransFat', 'unitTransFat', 'naTransFat', 'textTransFat', globalTab1,   useLine + ' indent', 3,                  'transFatContent', globalTab2,  'roundFat'\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showPolyFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex      unitIndex      naIndex      attributeText localTabValue lineClass            attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valuePolyFat', 'unitPolyFat', 'naPolyFat', 'textPolyFat', globalTab1,   useLine + ' indent', 2,                   '',           '',          'roundFat'\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showMonoFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex      unitIndex      naIndex      attributeText localTabValue lineClass            attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueMonoFat', 'unitMonoFat', 'naMonoFat', 'textMonoFat', globalTab1,   useLine + ' indent', 2,                   '',           '',          'roundFat'\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showCholesterol) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex          dailyValueIndex          unitIndex          naIndex          attributeTexts    lineClass itemPropValue         roundFunctionName   roundFunctionRuleName  boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueCholesterol', 'dailyValueCholesterol', 'unitCholesterol', 'naCholesterol', 'textCholesterol', useLine, 'cholesterolContent', 'roundCholesterol', 'roundCholesterolRule', true,    $this.settings.showDailyCholesterol\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSodium) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex     dailyValueIndex     unitIndex     naIndex     attributeTexts lineClass itemPropValue    roundFunctionName roundFunctionRuleName boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueSodium', 'dailyValueSodium', 'unitSodium', 'naSodium', 'textSodium',   useLine, 'sodiumContent', 'roundSodium',    'roundSodiumRule',     true,    $this.settings.showDailySodium\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showPotassium) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex        dailyValueIndex        unitIndex        naIndex        attributeTexts  lineClass itemPropValue       roundFunctionName roundFunctionRuleName boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valuePotassium', 'dailyValuePotassium', 'unitPotassium', 'naPotassium', 'textPotassium', useLine, 'potassiumContent', 'roundPotassium', 'roundPotassiumRule',  true,    $this.settings.showDailyPotassium\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showTotalCarb) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex        dailyValueIndex   unitIndex        naIndex        attributeTexts  lineClass itemPropValue          roundFunctionName             roundFunctionRuleName            boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueTotalCarb', 'dailyValueCarb', 'unitTotalCarb', 'naTotalCarb', 'textTotalCarb', useLine, 'carbohydrateContent', 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', true,    $this.settings.showDailyTotalCarb\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showFibers) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex     dailyValueIndex    unitIndex     naIndex     attributeTexts lineClass             itemPropValue   roundFunctionName             roundFunctionRuleName            boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueFibers', 'dailyValueFiber', 'unitFibers', 'naFibers', 'textFibers',   useLine + ' indent', 'fiberContent', 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', false,   $this.settings.showDailyFibers\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSugars) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSetting  valueIndex     dailyValueIndex    unitIndex     naIndex     attributeTexts lineClass             itemPropValue   roundFunctionName             roundFunctionRuleName            boldName showPercentageCode\r\n\t\t\t\t\t$this.settings, 'valueSugars', 'dailyValueSugar', 'unitSugars', 'naSugars', 'textSugars',   useLine + ' indent', 'sugarContent', 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', false,   $this.settings.showDailySugars\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSugarAlcohol) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex           unitIndex           naIndex           attributeText      localTabValue lineClass            attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueSugarAlcohol', 'unitSugarAlcohol', 'naSugarAlcohol', 'textSugarAlcohol', globalTab1,   useLine + ' indent', 4,                   '',            '',          'roundCarbFiberSugarProtein'\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showProteins) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass attributeDisplayType itemPropValue    localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueProteins', 'unitProteins', 'naProteins', 'textProteins', globalTab1,   useLine,  1,                  'proteinContent', '',          'roundCarbFiberSugarProtein'\r\n\t\t\t\t);\r\n\t\t\t\tuseLine = 'line'; //in case we need to add more attributes below this in future updates\r\n\t\t\t}\r\n\r\n\t\t\tnutritionLabel += globalTab1 + '<div class=\"bar1\"></div>\\n';\r\n\r\n\t\t\tif ($this.settings.showVitaminA) {\r\n\t\t\t\t//in case we need to add more attributes above this in future updates\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass                   attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueVitaminA', 'unitVitaminA', 'naVitaminA', 'textVitaminA', globalTab1,   useLineAgain + ' vitaminA', 5,                   '',           globalTab2,  'roundVitaminsCalciumIron'\r\n\t\t\t\t);\r\n\t\t\t\tuseLineAgain = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showVitaminC) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText  localTabValue lineClass                   attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueVitaminC', 'unitVitaminC', 'naVitaminC', 'textVitaminC', globalTab1,   useLineAgain + ' vitaminC', 5,                   '',           globalTab2,  'roundVitaminsCalciumIron'\r\n\t\t\t\t);\r\n\t\t\t\tuseLineAgain = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showCalcium) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex      unitIndex      naIndex      attributeText localTabValue lineClass                  attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueCalcium', 'unitCalcium', 'naCalcium', 'textCalcium', globalTab1,   useLineAgain + ' calcium', 5,                   '',           globalTab2,  'roundVitaminsCalciumIron'\r\n\t\t\t\t);\r\n\t\t\t\tuseLineAgain = 'line';\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showIron) {\r\n\t\t\t\tnutritionLabel += generateAttributeWithoutPercentageHtmlLegacy(\r\n\t\t\t\t\t//$localSettings valueIndex   unitIndex   naIndex   attributeText localTabValue lineClass               attributeDisplayType itemPropValue localExtraTab roundFunctionName\r\n\t\t\t\t\t$this.settings, 'valueIron', 'unitIron', 'naIron', 'textIron',    globalTab1,   useLineAgain + ' iron', 5,                   '',           globalTab2,  'roundVitaminsCalciumIron'\r\n\t\t\t\t);\r\n\t\t\t\tuseLineAgain = 'line'; //in case we need to add more attributes below this in future updates\r\n\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"dvCalorieDiet ' + useLineAgain + '\">\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '<div class=\"calorieNote\">\\n';\r\n\r\n\t\t\t\t\tif (!$this.settings.hidePercentDailyValues) {\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + '<span tabindex=\"0\"><span class=\"star\" aria-hidden=\"true\">*</span> ' +\r\n\t\t\t\t\t\t\t$this.settings.textPercentDailyPart1 + ' ' +\r\n\t\t\t\t\t\t\t$this.settings.calorieIntake + ' ' +\r\n\t\t\t\t\t\t\t$this.settings.textPercentDailyPart2 + '.</span>\\n';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showIngredients) {\r\n\t\t\t\t\t\tnutritionLabel += ingredientsHtmlLegacy($this.settings);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showDisclaimer) {\r\n\t\t\t\t\t\tnutritionLabel += disclaimerHtmlLegacy($this.settings);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '</div><!-- closing class=\"calorieNote\" -->\\n\\n';\r\n\r\n\t\t\t\tif ($this.settings.showCalorieDiet) {\r\n\t\t\t\t\tnutritionLabel += calorieDietHtmlLegacy($this.settings);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '</div><!-- closing class=\"dvCalorieDiet line\" -->\\n\\n';\r\n\r\n\t\t\tif ($this.settings.showBottomLink) {\r\n\t\t\t\tnutritionLabel += bottomLinkHtmlLegacy($this.settings);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showCustomFooter) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"customFooter\" tabindex=\"0\">' + $this.settings.valueCustomFooter + '</div>\\n';\r\n\t\t\t}\r\n\r\n\t\t\t//returns the html for the nutrition label\r\n\t\t\treturn nutritionLabel += '<div class=\"naTooltip\">' + $this.settings.textDataNotAvailable + '</div>\\n</div><!-- closing class=\"nutritionLabel\" -->\\n';\r\n\t\t}, //end of => generateLegacy: function()\r\n\r\n\r\n\t\tgenerate2018: function() {\r\n\t\t\t//this is the function that returns the html code for the nutrition label based on the settings that is supplied by the user\r\n\t\t\tlet $this = this;\r\n\t\t\tlet borderCSS = '';\r\n\t\t\tlet nutritionLabel = '';\r\n\t\t\tlet showLineDiv;\r\n\r\n\t\t\tlet sevingUnitQuantityHtml2018Result = sevingUnitQuantityHtml2018($this.settings);\r\n\t\t\tlet servingSizeIsHidden = sevingUnitQuantityHtml2018Result.servingSizeIsHidden;\r\n\t\t\tlet servingContainerIsHidden = sevingUnitQuantityHtml2018Result.servingContainerIsHidden;\r\n\r\n\t\t\t//return the plugin incase it has already been created\r\n\t\t\tif ($this.nutritionLabel) {\r\n\t\t\t\treturn $this.nutritionLabel;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.hideNotApplicableValues) {\r\n\t\t\t\t$this.settings.showCalories = $this.settings.naCalories ? false : $this.settings.showCalories;\r\n\t\t\t\t$this.settings.showFatCalories = $this.settings.naFatCalories ? false : $this.settings.showFatCalories;\r\n\t\t\t\t$this.settings.showTotalFat = $this.settings.naTotalFat ? false : $this.settings.showTotalFat;\r\n\t\t\t\t$this.settings.showSatFat = $this.settings.naSatFat ? false : $this.settings.showSatFat;\r\n\t\t\t\t$this.settings.showTransFat = $this.settings.naTransFat ? false : $this.settings.showTransFat;\r\n\t\t\t\t$this.settings.showPolyFat = $this.settings.naPolyFat ? false : $this.settings.showPolyFat;\r\n\t\t\t\t$this.settings.showMonoFat = $this.settings.naMonoFat ? false : $this.settings.showMonoFat;\r\n\t\t\t\t$this.settings.showCholesterol = $this.settings.naCholesterol ? false : $this.settings.showCholesterol;\r\n\t\t\t\t$this.settings.showSodium = $this.settings.naSodium ? false : $this.settings.showSodium;\r\n\t\t\t\t$this.settings.showPotassium_2018 = $this.settings.naPotassium_2018 ? false : $this.settings.showPotassium_2018;\r\n\t\t\t\t$this.settings.showTotalCarb = $this.settings.naTotalCarb ? false : $this.settings.showTotalCarb;\r\n\t\t\t\t$this.settings.showFibers = $this.settings.naFibers ? false : $this.settings.showFibers;\r\n\t\t\t\t$this.settings.showSugars = $this.settings.naSugars ? false : $this.settings.showSugars;\r\n\t\t\t\t$this.settings.showAddedSugars = $this.settings.naAddedSugars ? false : $this.settings.showAddedSugars;\r\n\t\t\t\t$this.settings.showSugarAlcohol = $this.settings.naSugarAlcohol ? false : $this.settings.showSugarAlcohol;\r\n\t\t\t\t$this.settings.showProteins = $this.settings.naProteins ? false : $this.settings.showProteins;\r\n\t\t\t\t$this.settings.showVitaminD = $this.settings.naVitaminD ? false : $this.settings.showVitaminD;\r\n\t\t\t\t$this.settings.showCalcium = $this.settings.naCalcium ? false : $this.settings.showCalcium;\r\n\t\t\t\t$this.settings.showIron = $this.settings.naIron ? false : $this.settings.showIron;\r\n\t\t\t\t$this.settings.showCaffeine = $this.settings.naCaffeine ? false : $this.settings.showCaffeine;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.hidePercentDailyValues) {\r\n\t\t\t\t$this.settings.showDailyVitaminD = false;\r\n\t\t\t\t$this.settings.showDailyCalcium = false;\r\n\t\t\t\t$this.settings.showDailyIron = false;\r\n\t\t\t\t$this.settings.showDailyPotassium_2018 = false;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.allowNoBorder) {\r\n\t\t\t\tborderCSS = 'border: 0;';\r\n\t\t\t}\r\n\r\n\t\t\t//creates the html code for the label based on the settings\r\n\t\t\tnutritionLabel = '<div itemscope itemtype=\"http://schema.org/NutritionInformation\" class=\"nf\" role=\"region\" aria-label=\"nutrition label\" style=\"' + borderCSS;\r\n\t\t\t\tif (!$this.settings.allowCustomWidth) {\r\n\t\t\t\t\tnutritionLabel += ' width: ' + $this.settings.width + 'px;\">\\n';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnutritionLabel += ' width: ' + $this.settings.widthCustom + ';\">\\n';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-title\" tabindex=\"0\">' + $this.settings.textNutritionFacts + '</div>\\n';\r\n\r\n\t\t\tshowLineDiv =\r\n\t\t\t\t$this.settings.showItemName ||\r\n\t\t\t\t(\r\n\t\t\t\t\t!$this.settings.showItemName &&\r\n\t\t\t\t\tservingSizeIsHidden &&\r\n\t\t\t\t\tservingContainerIsHidden\r\n\t\t\t\t) ||\r\n\t\t\t\t(\r\n\t\t\t\t\t!$this.settings.showItemName &&\r\n\t\t\t\t\t$this.settings.originalServingUnitQuantity > 0 &&\r\n\t\t\t\t\t$this.settings.showServingWeightGrams &&\r\n\t\t\t\t\t$this.settings.valueServingWeightGrams > 0\r\n\t\t\t\t) ||\r\n\t\t\t\t(\r\n\t\t\t\t\t$this.settings.showServingUnitQuantity &&\r\n\t\t\t\t\t$this.settings.originalServingUnitQuantity > 0 &&\r\n\t\t\t\t\t$this.settings.showServingsPerContainer &&\r\n\t\t\t\t\t$this.settings.valueServingPerContainer > 0\r\n\t\t\t\t);\r\n\r\n\t\t\tif (showLineDiv) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-line\">\\n';\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t\t$this.settings.showServingUnitQuantity &&\r\n\t\t\t\t\t$this.settings.originalServingUnitQuantity > 0 &&\r\n\t\t\t\t\t$this.settings.showServingsPerContainer &&\r\n\t\t\t\t\t$this.settings.valueServingPerContainer > 0\r\n\t\t\t) {\r\n\t\t\t\tnutritionLabel += globalTab2 + '<div class=\"nf-per-container\" tabindex=\"0\">\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab3 + roundLoDash($this.settings.valueServingPerContainer, $this.settings.decimalPlacesForNutrition);\r\n\t\t\t\t\tnutritionLabel += ' ' + $this.settings.textServingsPerContainer + '\\n';\r\n\t\t\t\tnutritionLabel += globalTab2 + '</div>\\n\\n';\r\n\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab2 + '<div class=\"nf-serving\">\\n';\r\n\r\n\t\t\t\t\tnutritionLabel += sevingUnitQuantityHtml2018Result.nutritionLabel;\r\n\r\n\t\t\t\t\tif ($this.settings.showItemName) {\r\n\t\t\t\t\t\tnutritionLabel += itemNameHtml2018($this.settings);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab2 + '</div><!-- end of class=\"nf-serving\" -->\\n\\n';\r\n\r\n\t\t\tif (showLineDiv) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '</div><!-- end of class=\"nf-line\" -->\\n\\n';\r\n\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-bar2\"></div>\\n';\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-amount-per-serving\" tabindex=\"0\">' + $this.settings.textAmountPerServing + '</div>\\n';\r\n\r\n\t\t\t\tif ($this.settings.showCalories) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue topDivClass   showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueCalories', 'unitCalories', 'naCalories', 'textCalories', 'calories',   'nf-calories', false,            'roundCalories',   '',                   '',       'nf-pr',    ''\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-bar1\"></div>\\n';\r\n\r\n\t\t\tif (!$this.settings.hidePercentDailyValues) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-line nf-text-right\">\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '<span class=\"nf-highlight nf-percent-dv\">% ' + $this.settings.textDailyValues + '*</span>\\n';\r\n\t\t\t\tnutritionLabel += globalTab1 + '</div>\\n';\r\n\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showTotalFat) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue topDivClass showPercentageCode                 roundFunctionName roundFunctionRuleName labelClass     valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueTotalFat', 'unitTotalFat', 'naTotalFat', 'textTotalFat', 'fatContent', 'nf-line',   $this.settings.showDailyTotalFat, 'roundFat',       'roundFatRule',       'nf-highlight', '',       'dailyValueTotalFat'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showSatFat) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue          topDivClass         showPercentageCode               roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueSatFat', 'unitSatFat', 'naSatFat', 'textSatFat', 'saturatedFatContent', 'nf-line nf-indent', $this.settings.showDailySatFat, 'roundFat',       'roundFatRule',        '',        '',       'dailyValueSatFat'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showTransFat) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue      topDivClass         showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueTransFat', 'unitTransFat', 'naTransFat', 'textTransFat', 'transFatContent', 'nf-line nf-indent', false,            'roundFat',        '',                   '',        '',        ''\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showPolyFat) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex      unitIndex      naIndex      attributeText itemPropValue topDivClass         showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valuePolyFat', 'unitPolyFat', 'naPolyFat', 'textPolyFat', '',          'nf-line nf-indent', false,            'roundFat',        '',                   '',        '',        ''\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showMonoFat) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex      unitIndex      naIndex      attributeText itemPropValue topDivClass         showPercentageCode roundFunctionName roundFunctionRuleName labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueMonoFat', 'unitMonoFat', 'naMonoFat', 'textMonoFat', '',          'nf-line nf-indent', false,            'roundFat',        '',                   '',        '',        ''\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showCholesterol) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex          unitIndex          naIndex          attributeText      itemPropValue         topDivClass showPercentageCode                    roundFunctionName   roundFunctionRuleName   labelClass     valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueCholesterol', 'unitCholesterol', 'naCholesterol', 'textCholesterol', 'cholesterolContent', 'nf-line',   $this.settings.showDailyCholesterol, 'roundCholesterol', 'roundCholesterolRule', 'nf-highlight', '',       'dailyValueCholesterol'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showSodium) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue    topDivClass showPercentageCode               roundFunctionName roundFunctionRuleName labelClass     valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueSodium', 'unitSodium', 'naSodium', 'textSodium', 'sodiumContent', 'nf-line',   $this.settings.showDailySodium, 'roundSodium',    'roundSodiumRule',    'nf-highlight', '',       'dailyValueSodium'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showTotalCarb) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex        unitIndex        naIndex        attributeText    itemPropValue          topDivClass showPercentageCode                  roundFunctionName             roundFunctionRuleName            labelClass      valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueTotalCarb', 'unitTotalCarb', 'naTotalCarb', 'textTotalCarb', 'carbohydrateContent', 'nf-line',   $this.settings.showDailyTotalCarb, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', 'nf-highlight', '',       'dailyValueCarb'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showFibers) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue   topDivClass         showPercentageCode               roundFunctionName             roundFunctionRuleName            labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueFibers', 'unitFibers', 'naFibers', 'textFibers', 'fiberContent', 'nf-line nf-indent', $this.settings.showDailyFibers, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', '',        '',       'dailyValueFiber'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showSugars) {\r\n\t\t\t\t\tif (!$this.settings.indentSugarAndRemoveBoldStyleFor2018Label) {\r\n\t\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue   topDivClass showPercentageCode               roundFunctionName             roundFunctionRuleName             labelClass     valueClass dailyValueIndex\r\n\t\t\t\t\t\t\t$this.settings, 'valueSugars', 'unitSugars', 'naSugars', 'textSugars', 'sugarContent', 'nf-line',   $this.settings.showDailySugars, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', 'nf-highlight', '',       'dailyValueSugar'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex     unitIndex     naIndex     attributeText itemPropValue   topDivClass         showPercentageCode               roundFunctionName             roundFunctionRuleName            labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t\t$this.settings, 'valueSugars', 'unitSugars', 'naSugars', 'textSugars', 'sugarContent', 'nf-line nf-indent', $this.settings.showDailySugars, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', '',        '',       'dailyValueSugar'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showAddedSugars) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex          unitIndex          naIndex          attributeText      itemPropValue topDivClass          showPercentageCode                    roundFunctionName             roundFunctionRuleName            labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueAddedSugars', 'unitAddedSugars', 'naAddedSugars', 'textAddedSugars1', '',          'nf-line nf-indent2', $this.settings.showDailyAddedSugars, 'roundCarbFiberSugarProtein', 'roundCarbFiberSugarProteinRule', '',        '',       'dailyValueAddedSugar'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showSugarAlcohol) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex           unitIndex           naIndex           attributeText       itemPropValue topDivClass         showPercentageCode roundFunctionName            roundFunctionRuleName labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueSugarAlcohol', 'unitSugarAlcohol', 'naSugarAlcohol', 'textSugarAlcohol', '',           'nf-line nf-indent', false,            'roundCarbFiberSugarProtein', '',                   '',        '',        ''\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showProteins) {\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue     topDivClass showPercentageCode roundFunctionName            roundFunctionRuleName labelClass     valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueProteins', 'unitProteins', 'naProteins', 'textProteins', 'proteinContent', 'nf-line',   false,            'roundCarbFiberSugarProtein', '',                  'nf-highlight', '',        ''\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showVitaminD || $this.settings.showCalcium || $this.settings.showIron || $this.settings.showPotassium_2018) {\r\n\t\t\t\tlet lastRowNutrition = 'valueVitaminD';\r\n\t\t\t\tlet firstRowNutrition = 'valuePotassium_2018';\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-bar2\"></div>\\n';\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-vitamins\">\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '<div class=\"nf-vitamins\">\\n';\r\n\r\n\t\t\t\t\t//check which one is the last row\r\n\t\t\t\t\tif (!$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tif ($this.settings.showPotassium_2018) {\r\n\t\t\t\t\t\t\tlastRowNutrition = 'valuePotassium_2018';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif ($this.settings.showIron) {\r\n\t\t\t\t\t\t\t\tlastRowNutrition = 'valueIron';\r\n\t\t\t\t\t\t\t} else if ($this.settings.showCalcium) {\r\n\t\t\t\t\t\t\t\tlastRowNutrition = 'valueCalcium';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//check which one is the first row\r\n\t\t\t\t\tif ($this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tif ($this.settings.showVitaminD) {\r\n\t\t\t\t\t\t\tfirstRowNutrition = 'valueVitaminD';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif ($this.settings.showCalcium) {\r\n\t\t\t\t\t\t\t\tfirstRowNutrition = 'valueCalcium';\r\n\t\t\t\t\t\t\t} else if ($this.settings.showIron) {\r\n\t\t\t\t\t\t\t\tfirstRowNutrition = 'valueIron';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showVitaminD && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex       dailyValueIndex       unitIndex_base       unitIndex_percent       naIndex       attributeTexts showPercentageCode                lastRow\r\n\t\t\t\t\t\t\t$this.settings, 'valueVitaminD', 'dailyValueVitaminD', 'unitVitaminD_base', 'unitVitaminD_percent', 'naVitaminD', 'textVitaminD', $this.settings.showDailyVitaminD, lastRowNutrition == 'valueVitaminD'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if ($this.settings.showVitaminD && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex       unitIndex            naIndex       attributeText   itemPropValue     topDivClass                                            showPercentageCode                 roundFunctionName                roundFunctionRuleName               labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t\t$this.settings, 'valueVitaminD', 'unitVitaminD_base', 'naVitaminD', 'textVitaminD', 'vitaminDContent', firstRowNutrition == 'valueVitaminD' ? '' : 'nf-line', $this.settings.showDailyVitaminD, 'roundFor2018LabelVitaminDIron', 'roundFor2018LabelVitaminDIronRule', '',        '',       'dailyValueVitaminD'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showCalcium && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex      dailyValueIndex      unitIndex_base      unitIndex_percent      naIndex      attributeTexts showPercentageCode               lastRow\r\n\t\t\t\t\t\t\t$this.settings, 'valueCalcium', 'dailyValueCalcium', 'unitCalcium_base', 'unitCalcium_percent', 'naCalcium', 'textCalcium',  $this.settings.showDailyCalcium, lastRowNutrition == 'valueCalcium'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if ($this.settings.showCalcium && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex      unitIndex            naIndex     attributeText  itemPropValue    topDivClass                                           showPercentageCode                roundFunctionName                    roundFunctionRuleName                   labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t\t$this.settings, 'valueCalcium', 'unitCalcium_base', 'naCalcium', 'textCalcium', 'calciumContent', firstRowNutrition == 'valueCalcium' ? '' : 'nf-line', $this.settings.showDailyCalcium, 'roundFor2018LabelCalciumPotassium', 'roundFor2018LabelCalciumPotassiumRule', '',        '',       'dailyValueCalcium'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showIron && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex    dailyValueIndex  unitIndex_base   unitIndex_percent   naIndex   attributeTexts showPercentageCode            lastRow\r\n\t\t\t\t\t\t\t$this.settings, 'valueIron', 'dailyValueIron', 'unitIron_base', 'unitIron_percent', 'naIron', 'textIron',     $this.settings.showDailyIron, lastRowNutrition == 'valueIron'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if ($this.settings.showIron && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex   unitIndex        naIndex   attributeText itemPropValue topDivClass                                          showPercentageCode             roundFunctionName                roundFunctionRuleName               labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t\t$this.settings, 'valueIron', 'unitIron_base', 'naIron', 'textIron',   'ironContent', firstRowNutrition == 'valueIron' ? '' : 'nf-line',   $this.settings.showDailyIron, 'roundFor2018LabelVitaminDIron', 'roundFor2018LabelVitaminDIronRule', '',        '',       'dailyValueIron'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showPotassium_2018 && !$this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + generate2018HtmlAndComputeValueGivenThePercentage(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex             dailyValueIndex             unitIndex_base        unitIndex_percent        naIndex             attributeTexts  showPercentageCode                      lastRow\r\n\t\t\t\t\t\t\t$this.settings, 'valuePotassium_2018', 'dailyValuePotassium_2018', 'unitPotassium_base', 'unitPotassium_percent', 'naPotassium_2018', 'textPotassium', $this.settings.showDailyPotassium_2018, lastRowNutrition == 'valuePotassium_2018'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else if ($this.settings.showPotassium_2018 && $this.settings.useBaseValueFor2018LabelAndNotDVPercentage) {\r\n\t\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t\t//$localSettings valueIndex             unitIndex             naIndex             attributeText    itemPropValue      topDivClass                                                  showPercentageCode                       roundFunctionName                    roundFunctionRuleName                   labelClass valueClass dailyValueIndex\r\n\t\t\t\t\t\t\t$this.settings, 'valuePotassium_2018', 'unitPotassium_base', 'naPotassium_2018', 'textPotassium', 'potassiumContent', firstRowNutrition == 'valuePotassium_2018' ? '' : 'nf-line', $this.settings.showDailyPotassium_2018, 'roundFor2018LabelCalciumPotassium', 'roundFor2018LabelCalciumPotassiumRule', '',        '',       'dailyValuePotassium_2018'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '</div>\\n';\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '</div>\\n';\r\n\t\t\t}//end of => if ($this.settings.showVitaminD || $this.settings.showCalcium || $this.settings.showIron || $this.settings.showPotassium_2018)\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-bar2\"></div>\\n';\r\n\r\n\t\t\t\tif ($this.settings.showCaffeine) {\r\n\t\t\t\t\tlet labelClassCaffeine = 'nf-highlight';\r\n\t\t\t\t\tif (!$this.settings.boldCaffeine) {\r\n\t\t\t\t\t\tlabelClassCaffeine = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnutritionLabel += generateAttributeHtml2018Version(\r\n\t\t\t\t\t\t//$localSettings valueIndex       unitIndex       naIndex       attributeText   itemPropValue     topDivClass showPercentageCode roundFunctionName roundFunctionRuleName labelClass          valueClass dailyValueIndex\r\n\t\t\t\t\t\t$this.settings, 'valueCaffeine', 'unitCaffeine', 'naCaffeine', 'textCaffeine', 'caffeineContent', '',         false,            'roundCaffeine',   '',                   labelClassCaffeine, '',        ''\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-bar1\"></div>\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-vitamins\">\\n';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"' + ($this.settings.hidePercentDailyValues ? 'nf-footnoteHiddenDailyValues' : 'nf-footnote') + '\">\\n';\r\n\t\t\t\t\tif (!$this.settings.hidePercentDailyValues) {\r\n\t\t\t\t\t\tnutritionLabel += globalTab2 + '<span tabIndex=\"0\">' + $this.settings.textPercentDaily2018VersionPart1;\r\n\t\t\t\t\t\tnutritionLabel += $this.settings.calorieIntake;\r\n\t\t\t\t\t\tnutritionLabel += $this.settings.textPercentDaily2018VersionPart2 + '</span>\\n';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showIngredients) {\r\n\t\t\t\t\t\tnutritionLabel += ingredientsHtml2018Version($this.settings);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.settings.showDisclaimer) {\r\n\t\t\t\t\t\tnutritionLabel += disclaimerHtml2018Version($this.settings);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tnutritionLabel += globalTab1 + '</div>\\n';\r\n\r\n\t\t\t\tif ($this.settings.showBottomLink) {\r\n\t\t\t\t\tnutritionLabel += bottomLinkHtml2018Version($this.settings);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($this.settings.showCustomFooter) {\r\n\t\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"nf-customFooter\" tabindex=\"0\">' + $this.settings.valueCustomFooter + '</div>\\n';\r\n\t\t\t\t}\r\n\r\n\t\t\t//returns the html for the nutrition label\r\n\t\t\treturn nutritionLabel += '<div class=\"naTooltip\">' + $this.settings.textDataNotAvailable + '</div>\\n</div><!-- closing class=\"nf\" -->\\n';\r\n\t\t}, //end of => generate2018: function()\r\n\r\n\r\n\t\tgenerateUK: function() {\r\n\t\t\t//this is the function that returns the html code for the nutrition label based on the settings that is supplied by the user\r\n\t\t\tlet $this = this;\r\n\t\t\tlet borderCSS = '';\r\n\t\t\tlet nutritionLabel = '';\r\n\r\n\t\t\t//return the plugin incase it has already been created\r\n\t\t\tif ($this.nutritionLabel) {\r\n\t\t\t\treturn $this.nutritionLabel;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.hideNotApplicableValues) {\r\n\t\t\t\t$this.settings.showCalories = $this.settings.naCalories ? false : $this.settings.showCalories;\r\n\t\t\t\t$this.settings.showTotalFat = $this.settings.naTotalFat ? false : $this.settings.showTotalFat;\r\n\t\t\t\t$this.settings.showSatFat = $this.settings.naSatFat ? false : $this.settings.showSatFat;\r\n\t\t\t\t$this.settings.showTotalCarb = $this.settings.naTotalCarb ? false : $this.settings.showTotalCarb;\r\n\t\t\t\t$this.settings.showSugars = $this.settings.naSugars ? false : $this.settings.showSugars;\r\n\t\t\t\t$this.settings.showFibers = $this.settings.naFibers ? false : $this.settings.showFibers;\r\n\t\t\t\t$this.settings.showProteins = $this.settings.naProteins ? false : $this.settings.showProteins;\r\n\t\t\t\t$this.settings.showSodium = $this.settings.naSodium ? false : $this.settings.showSodium;\r\n\t\t\t}\r\n\r\n\t\t\t//the uk label requires a non zero serving weight value for the computations to work properly\r\n\t\t\t\t//so i am setting the values to be \"not applicable\" if the serving weight value is not valid\r\n\t\t\tif ($this.settings.valueServingWeightGrams <= 0) {\r\n\t\t\t\t$this.settings.naCalories = true;\r\n\t\t\t\t$this.settings.naTotalFat = true;\r\n\t\t\t\t$this.settings.naSatFat = true;\r\n\t\t\t\t$this.settings.naTotalCarb = true;\r\n\t\t\t\t$this.settings.naSugars = true;\r\n\t\t\t\t$this.settings.naFibers = true;\r\n\t\t\t\t$this.settings.naProteins = true;\r\n\t\t\t\t$this.settings.naSodium = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.allowNoBorder) {\r\n\t\t\t\tborderCSS = 'border: 0;';\r\n\t\t\t}\r\n\r\n\t\t\t//creates the html code for the label based on the settings\r\n\t\t\tnutritionLabel = '<div itemscope itemtype=\"http://schema.org/NutritionInformation\" role=\"region\" aria-label=\"nutrition label\" class=\"uk_nf uk\" style=\"' + borderCSS;\r\n\t\t\tif (!$this.settings.allowCustomWidth) {\r\n\t\t\t\tnutritionLabel += ' width: ' + $this.settings.width + 'px;\">\\n';\r\n\t\t\t} else {\r\n\t\t\t\tnutritionLabel += ' width: ' + $this.settings.widthCustom + ';\">\\n';\r\n\t\t\t}\r\n\r\n\t\t\tnutritionLabel += globalTab1 + '<div class=\"uk_nf-title\" tabindex=\"0\">' + $this.settings.textNutritionFacts + '</div>\\n';\r\n\r\n\t\t\tif ($this.settings.showItemNameForUK) {\r\n\t\t\t\tnutritionLabel += globalTab1 + '<div class=\"uk_nf-item-name\" tabindex=\"0\">' + $this.settings.itemName + '</div>\\n';\r\n\t\t\t}\r\n\r\n\t\t\t//for the uk label, If the serving name is empty, have it default to \"Serving\" ($this.settings.textUKDefaultServingNameIfEmpty)\r\n\t\t\tif ($this.settings.convertEmptyServingNametoServingForUKLabel && String($this.settings.valueServingSizeUnit) === '') {\r\n\t\t\t\t$this.settings.valueServingSizeUnit = $this.settings.textUKDefaultServingNameIfEmpty;\r\n\t\t\t}\r\n\r\n\t\t\tnutritionLabel += globalTab1 + '<table>\\n';\r\n\t\t\t\tnutritionLabel += globalTab2 + '<thead>\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab3 + '<tr>\\n';\r\n\t\t\t\t\t\tnutritionLabel += globalTab4 + '<th>' + $this.settings.textUKTypicalValues + '</th>\\n';\r\n\t\t\t\t\t\tnutritionLabel += globalTab4 + '<th>' + $this.settings.textUKPer100 + ' 100' + $this.settings.unitGramOrMlForThePer100Part + '</th>\\n';\r\n\r\n\t\t\t\t\t\tnutritionLabel += globalTab4 + '<th>';\r\n\r\n\t\t\t\t\tif ($this.settings.showServingUnitQuantityTextbox) {\r\n\t\t\t\t\t\tif (!$this.settings.hideTextboxArrows) {\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '<div class=\"setter\">\\n';\r\n\t\t\t\t\t\t\t\tnutritionLabel += globalTab6 + '<a href=\"' + $this.settings.textAriaLabelIncreaseQuantityArrow + '\" class=\"uk_nf-unitQuantityUp\" ';\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += 'aria-label=\"' + $this.settings.textAriaLabelIncreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\r\n\t\t\t\t\t\t\t\tnutritionLabel += globalTab6 + '<a href=\"' + $this.settings.textAriaLabelDecreaseQuantityArrow + '\" class=\"uk_nf-unitQuantityDown\" ';\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += 'aria-label=\"' + $this.settings.textAriaLabelDecreaseQuantityArrow + '\" rel=\"nofollow\" tabindex=\"0\"></a>\\n';\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '</div><!-- closing class=\"setter\" -->\\n\\n';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '<input type=\"text\" data-role=\"none\" value=\"' +\r\n\t\t\t\t\t\t\t\troundLoDash($this.settings.valueServingUnitQuantity, this.settings.decimalPlacesForQuantityTextbox) + '\" ';\r\n\t\t\t\t\t\t\t\tnutritionLabel += 'class=\"uk_nf-unitQuantityBox uk_nf-modifier-field\" aria-label=\"' + this.settings.textAriaLabelChangeQuantityTextbox + '\">\\n';\r\n\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '<input type=\"hidden\" value=\"' +\r\n\t\t\t\t\t\t\t\troundLoDash(this.settings.valueServingUnitQuantity, this.settings.decimalPlacesForQuantityTextbox) +\r\n\t\t\t\t\t\t\t\t'\" id=\"uk_nf-nixLabelBeforeQuantity\">\\n\\n';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab5 + $this.settings.valueServingUnitQuantity;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '<span class=\"uk_nf-servingUnit\">' + $this.settings.valueServingSizeUnit;\r\n\t\t\t\t\t\t\t\tnutritionLabel += ' (' + roundLoDash($this.settings.valueServingWeightGrams) + $this.settings.unitGramOrMlForThePer100Part + ')</span>\\n';\r\n\t\t\t\t\t\tnutritionLabel += '</th>\\n';\r\n\r\n\t\t\t\t\t\tnutritionLabel += globalTab4 + '<th>%*(' + roundLoDash($this.settings.valueServingWeightGrams) + $this.settings.unitGramOrMlForThePer100Part + ')</th>\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab3 + '</tr>\\n';\r\n\t\t\t\tnutritionLabel += globalTab2 + '</thead>\\n';\r\n\t\t\tnutritionLabel += globalTab1 + '<tbody>\\n';\r\n\r\n\t\t\tif ($this.settings.showCalories) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex       dailyValueIndex unitIndex        naIndex       attributeTexts itemPropValue roundFunctionName    roundFunctionRuleName showPercentageCode indentedName\r\n\t\t\t\t\t$this.settings, 'valueCalories', '',             'unitEnergy_kj', 'naCalories', 'textCalories', '',          'roundToNearestNum', 'roundToNearestNum',   false,             false\r\n\t\t\t\t);\r\n\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex       dailyValueIndex         unitIndex          naIndex      attributeTexts itemPropValue roundFunctionName    roundFunctionRuleName showPercentageCode              indentedName\r\n\t\t\t\t\t$this.settings, 'valueCalories', 'dailyValueEnergyKcal', 'unitEnergy_kcal', 'naCalories', '',            '',          'roundToNearestNum', 'roundToNearestNum',   $this.settings.showDailyEnergy, false\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showTotalFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex       dailyValueIndex       unitIndex       naIndex       attributeTexts  itemPropValue roundFunctionName                                roundFunctionRuleName                               showPercentageCode                indentedName\r\n\t\t\t\t\t$this.settings, 'valueTotalFat', 'dailyValueTotalFat', 'unitTotalFat', 'naTotalFat', 'textTotalFat', 'fatContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailyTotalFat, false\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSatFat) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex     dailyValueIndex     unitIndex     naIndex     attributeTexts itemPropValue          roundFunctionName        roundFunctionRuleName       showPercentageCode              indentedName\r\n\t\t\t\t\t$this.settings, 'valueSatFat', 'dailyValueSatFat', 'unitSatFat', 'naSatFat', 'textSatFat',  'saturatedFatContent', 'roundForUKLabelSatFat', 'roundForUKLabelSatFatRule', $this.settings.showDailySatFat, true\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showTotalCarb) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex        dailyValueIndex   unitIndex        naIndex        attributeTexts   itemPropValue          roundFunctionName                                roundFunctionRuleName                               showPercentageCode                 indentedName\r\n\t\t\t\t\t$this.settings, 'valueTotalCarb', 'dailyValueCarb', 'unitTotalCarb', 'naTotalCarb', 'textTotalCarb', 'carbohydrateContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailyTotalCarb, false\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSugars) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex     dailyValueIndex    unitIndex     naIndex     attributeTexts itemPropValue   roundFunctionName                                roundFunctionRuleName                               showPercentageCode             indentedName\r\n\t\t\t\t\t$this.settings, 'valueSugars', 'dailyValueSugar', 'unitSugars', 'naSugars', 'textSugars',  'sugarContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailySugars, true\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showFibers) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex     dailyValueIndex unitIndex     naIndex     attributeTexts itemPropValue   roundFunctionName                                roundFunctionRuleName                               showPercentageCode indentedName\r\n\t\t\t\t\t$this.settings, 'valueFibers', '',             'unitFibers', 'naFibers', 'textFibers',  'fiberContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', false,             false\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showProteins) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex       dailyValueIndex      unitIndex       naIndex       attributeTexts  itemPropValue     roundFunctionName                                roundFunctionRuleName                               showPercentageCode               indentedName\r\n\t\t\t\t\t$this.settings, 'valueProteins', 'dailyValueProtein', 'unitProteins', 'naProteins', 'textProteins', 'proteinContent', 'roundForUKLabelTotalFatCarbsSugarFiberProtein', 'roundForUKLabelTotalFatCarbsSugarFiberProteinRule', $this.settings.showDailyProtein, false\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ($this.settings.showSodium) {\r\n\t\t\t\tnutritionLabel += generateAttributeForUK(\r\n\t\t\t\t\t//$localSettings valueIndex     dailyValueIndex   unitIndex   naIndex     attributeTexts itemPropValue    roundFunctionName      roundFunctionRuleName     showPercentageCode             indentedName\r\n\t\t\t\t\t$this.settings, 'valueSodium', 'dailyValueSalt', 'unitSalt', 'naSodium', 'textSodium',  'sodiumContent', 'roundForUKLabelSalt', 'roundForUKLabelSaltRule', $this.settings.showDailySodium, false\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '</tbody>\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '<tfoot>\\n';\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + '<tr>\\n';\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab4 + '<td colspan=\"4\">\\n';\r\n\t\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '<div class=\"uk_nf-footnote\">\\n';\r\n\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += referenceIntakeHtmlUKVersion($this.settings);\r\n\r\n\t\t\t\t\t\t\t\tif ($this.settings.showIngredients) {\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += ingredientsHtmlUKVersion($this.settings);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ($this.settings.showDisclaimer) {\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += disclaimerHtmlUKVersion($this.settings);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ($this.settings.showBottomLink) {\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += bottomLinkHtmlUKVersion($this.settings);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ($this.settings.showCustomFooter) {\r\n\t\t\t\t\t\t\t\t\tnutritionLabel += globalTab6 + '<div class=\"uk_nf-customFooter\" tabindex=\"0\">\\n' + globalTab7 + $this.settings.valueCustomFooter + '\\n' + globalTab6 + '</div>\\n';\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tnutritionLabel += globalTab5 + '</div>\\n';\r\n\t\t\t\t\t\t\tnutritionLabel += globalTab4 + '</td>\\n';\r\n\t\t\t\t\t\tnutritionLabel += globalTab3 + '</tr>\\n';\r\n\t\t\t\t\tnutritionLabel += globalTab2 + '</tfoot>\\n';\r\n\t\t\t\tnutritionLabel += globalTab1 + '</table>\\n';\r\n\r\n\t\t\t//returns the html for the nutrition label\r\n\t\t\treturn nutritionLabel += '<div class=\"naTooltip\">' + $this.settings.textDataNotAvailable + '</div>\\n</div><!-- closing class=\"uk_nf\" -->\\n';\r\n\t\t}//end of => generateUK: function()\r\n\t};//end of => NutritionLabel.prototype\r\n})(jQuery);\r\n"]},"metadata":{},"sourceType":"module"}